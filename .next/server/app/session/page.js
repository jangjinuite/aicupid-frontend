(()=>{var e={};e.id=863,e.ids=[863],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},3977:e=>{"use strict";e.exports=require("node:fs/promises")},612:e=>{"use strict";e.exports=require("node:os")},7181:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>f}),a(8863),a(4879),a(5866);var n=a(3191),o=a(8716),i=a(7922),s=a.n(i),l=a(5231),u={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>l[e]);a.d(t,u);let f=["",{children:["session",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8863)),"C:\\Users\\jjw74\\Desktop\\Code\\AIMC\\hackerthon\\frontend\\app\\session\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4879)),"C:\\Users\\jjw74\\Desktop\\Code\\AIMC\\hackerthon\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\jjw74\\Desktop\\Code\\AIMC\\hackerthon\\frontend\\app\\session\\page.tsx"],d="/session/page",p={require:a,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/session/page",pathname:"/session",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:f}})},8444:(e,t,a)=>{Promise.resolve().then(a.bind(a,3401))},7945:(e,t,a)=>{Promise.resolve().then(a.bind(a,7262))},3444:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},3401:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var n=a(326),o=a(7577),i=a(2720),s=a(9086),l=a(5047),u=a(2173),f=a(7262);a(3527);let c=(process.env.NEXT_PUBLIC_BACKEND_URL??"http://localhost:8000").replace(/^http/,"ws")+"/ws";var d=a(3188);let p=[[.08,1,.25,.75,.12,.9,.3],[.3,.55,.95,.2,.8,.35,.7],[.5,.15,.85,.4,.95,.25,.6],[.15,.7,.3,1,.4,.8,.18],[.6,.2,.9,.35,.7,.15,.85],[.25,.9,.45,.7,.2,.95,.4],[.8,.3,.6,.15,.85,.3,.65],[.1,.75,.4,.9,.25,.7,.1]],h=[48,44,38,32,26,20,14,10];function g({status:e,side:t,count:a=8}){let o="speaking"===e,s="listening"===e,l=h.slice(0,a),u="left"===t?[...l].reverse():l;return n.jsx("div",{className:"flex items-center gap-[3px]",style:{flexDirection:"left"===t?"row-reverse":"row"},children:u.map((e,l)=>{let u=p[l%p.length],f="left"===t?a-1-l:l,c=.055*f;return n.jsx(i.E.div,{className:"rounded-full",style:{width:3,backgroundColor:"#86E3E3",transformOrigin:"center"},animate:o?{height:u.map(t=>Math.max(4,e*t)),opacity:.9,transition:{duration:.65+.04*f,repeat:1/0,ease:"easeInOut",delay:c}}:s?{height:[4,.12*e,4],opacity:.45,transition:{duration:1.8,repeat:1/0,ease:"easeInOut",delay:.5*c}}:{height:3,opacity:.18,transition:{duration:.3}}},l)})})}let m={idle:"rgba(134,227,227,0.15)",listening:"rgba(134,227,227,0.5)",speaking:"rgba(134,227,227,0.9)",thinking:"rgba(230,208,142,0.6)"},y="clamp(150px, 46vw, 210px)";function b({avatarState:e,voiceStatus:t,persona:a}){return(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-[clamp(0.5rem,2vw,1rem)]",children:[n.jsx(g,{status:t,side:"left",count:7}),(0,n.jsxs)("div",{className:"relative flex items-center justify-center",children:[n.jsx(i.E.div,{className:"absolute rounded-full",style:{inset:-10,border:`2.5px solid ${m[e]}`},variants:d.id,animate:e}),(0,n.jsxs)("div",{style:{width:y,height:y,border:"3px solid #86E3E3",background:"#F0FAFA",borderRadius:"50%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[n.jsx("img",{src:"/avatar.png",alt:a.name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.target.style.display="none"}}),n.jsx("span",{className:"absolute select-none",style:{fontSize:"clamp(3rem, 12vw, 4.5rem)"},children:a.emoji})]})]}),n.jsx(g,{status:t,side:"right",count:7})]}),n.jsx("p",{className:"font-bold text-[clamp(1rem,4vw,1.25rem)] text-[#1A1A1A] dark:text-[#F0F0F0] tracking-tight",children:a.name})]})}let w={idle:{label:"ë§ˆì´í¬ êº¼ì§",dot:"#9CA3AF",bar:"#9CA3AF"},listening:{label:"ë“£ëŠ” ì¤‘",dot:"#86E3E3",bar:"#86E3E3"},speaking:{label:"ë…¹ìŒ ì¤‘",dot:"#FAA2EE",bar:"#FAA2EE"},ai_speaking:{label:"AI ì‘ë‹µ ì¤‘",dot:"#E6D08E",bar:"#E6D08E"},waiting:{label:"ì²˜ë¦¬ ì¤‘...",dot:"#E6D08E",bar:"#E6D08E"}},v=[[.2,1,.4,.8,.15],[.5,.2,.9,.3,.7],[.3,.8,.15,.95,.4],[.7,.3,.6,.1,.8],[.1,.7,.5,.9,.2],[.6,.15,.85,.4,.65],[.25,.9,.35,.7,.1]];function O({status:e,wsConnected:t}){let a=w[e],o="speaking"===e||"listening"===e;return(0,n.jsxs)("div",{className:"w-full px-5 py-3 rounded-2xl bg-surface dark:bg-dark-card flex items-center gap-3 border border-[#86E3E3]/20",children:[n.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:a.dot,boxShadow:o?`0 0 8px ${a.dot}`:"none"}}),n.jsx("span",{className:"text-sm font-semibold text-[#1A1A1A] dark:text-[#F0F0F0] flex-shrink-0",children:a.label}),n.jsx("div",{className:"flex-1 flex items-center justify-end gap-[3px] h-6",children:v.map((t,s)=>n.jsx(i.E.div,{className:"rounded-full",style:{width:3,backgroundColor:a.bar},animate:o?{height:t.map(e=>Math.max(3,24*e)),opacity:.85,transition:{duration:"speaking"===e?.55:1.2,repeat:1/0,ease:"easeInOut",delay:.07*s}}:{height:3,opacity:.3,transition:{duration:.3}}},s))}),n.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:t?"#86E3E3":"#9CA3AF",opacity:t?1:.4}})]})}let _=(0,a(9664).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function E({question:e,participantCount:t=2,participants:a,voiceStatus:l,wsConnected:u,onClose:f}){let[c,p]=(0,o.useState)(0),h=a??Array.from({length:t},(e,t)=>`ì°¸ê°€ìž ${t+1}`),g=c===t-1;return(0,n.jsxs)(i.E.div,{className:"relative w-full popup-sheet rounded-[2rem] overflow-hidden z-30",style:{maxHeight:"85dvh",overflowY:"auto"},variants:d.z6,initial:"hidden",animate:"visible",exit:"exit",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 pt-5 pb-3",children:[n.jsx("span",{className:"text-xs font-bold tracking-widest uppercase text-primary",children:"ì‹¬ë¦¬ í…ŒìŠ¤íŠ¸"}),n.jsx("button",{onClick:f,className:"w-8 h-8 rounded-full bg-black/5 dark:bg-white/10 flex items-center justify-center",children:n.jsx(_,{className:"w-4 h-4 text-[#1A1A1A] dark:text-[#F0F0F0]"})})]}),n.jsx("p",{className:"px-6 text-base font-medium text-[#1A1A1A] dark:text-[#F0F0F0] leading-relaxed text-balance",children:e}),(0,n.jsxs)("div",{className:"px-6 pt-4 pb-2",children:[n.jsx("div",{className:"flex gap-2 mb-3",children:h.map((e,t)=>n.jsx("div",{className:"h-1.5 rounded-full transition-all duration-300",style:{flex:t===c?2:1,backgroundColor:t<=c?"#86E3E3":"#E5E7EB"}},t))}),n.jsx(s.M,{mode:"wait",children:(0,n.jsxs)(i.E.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:-16},transition:{duration:.2},className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white",style:{backgroundColor:"#86E3E3"},children:c+1}),(0,n.jsxs)("span",{className:"font-semibold text-[#1A1A1A] dark:text-[#F0F0F0]",children:[h[c]," ë‹µë³€ ì¤‘"]})]},c)})]}),n.jsx("div",{className:"px-6 py-3",children:n.jsx(O,{status:l,wsConnected:u})}),n.jsx("div",{className:"px-6 pb-6 pt-1",children:n.jsx("button",{onClick:()=>{g?f():p(e=>e+1)},className:"w-full py-3.5 rounded-2xl font-bold text-base text-white transition-transform active:scale-[0.97]",style:{backgroundColor:"#86E3E3",color:"#0A4040"},children:g?"ì™„ë£Œ":"ë‹¤ìŒ â†’"})})]})}function A({question:e,choices:t,voiceStatus:a,wsConnected:o,onClose:s}){return(0,n.jsxs)(i.E.div,{className:"relative w-full popup-sheet rounded-[2rem] overflow-hidden z-30",variants:d.z6,initial:"hidden",animate:"visible",exit:"exit",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 pt-5 pb-3",children:[n.jsx("span",{className:"text-xs font-bold tracking-widest uppercase text-gold",children:"ë°¸ëŸ°ìŠ¤ ê²Œìž„"}),n.jsx("button",{onClick:s,className:"w-8 h-8 rounded-full bg-black/5 dark:bg-white/10 flex items-center justify-center",children:n.jsx(_,{className:"w-4 h-4 text-[#1A1A1A] dark:text-[#F0F0F0]"})})]}),n.jsx("p",{className:"px-6 pb-4 text-base font-semibold text-[#1A1A1A] dark:text-[#F0F0F0] leading-relaxed text-balance",children:e}),(0,n.jsxs)("div",{className:"px-6 pb-4 grid grid-cols-2 gap-3",children:[n.jsx(i.E.div,{className:"rounded-2xl flex items-center justify-center py-10 px-3 text-center cursor-default",style:{backgroundColor:"#86E3E3"},whileTap:{scale:.97},children:n.jsx("span",{className:"font-black text-xl leading-tight text-[#0A4040]",children:t[0]})}),n.jsx(i.E.div,{className:"rounded-2xl flex items-center justify-center py-10 px-3 text-center cursor-default",style:{backgroundColor:"#FAA2EE"},whileTap:{scale:.97},children:n.jsx("span",{className:"font-black text-xl leading-tight text-[#4A0A40]",children:t[1]})})]}),n.jsx("p",{className:"px-6 pb-2 text-xs text-[#1A1A1A]/40 dark:text-white/30 text-center",children:"ìŒì„±ìœ¼ë¡œ ë‹µë³€í•´ ì£¼ì„¸ìš”"}),n.jsx("div",{className:"px-6 pb-6",children:n.jsx(O,{status:a,wsConnected:o})})]})}let T=[{bg:"#B8F0F0",text:"#0A4040",label:"A"},{bg:"#F5E9BB",text:"#4A3800",label:"B"},{bg:"#FDCFF7",text:"#4A0A40",label:"C"},{bg:"#E8E8F0",text:"#1A1A2A",label:"D"}];function S({question:e,choices:t,voiceStatus:a,wsConnected:o,onClose:s}){let l=t.slice(0,4);return(0,n.jsxs)(i.E.div,{className:"relative w-full popup-sheet rounded-[2rem] overflow-hidden z-30",variants:d.z6,initial:"hidden",animate:"visible",exit:"exit",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 pt-5 pb-3",children:[n.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",style:{color:"#E6D08E"},children:"í€´ì¦ˆ"}),n.jsx("button",{onClick:s,className:"w-8 h-8 rounded-full bg-black/5 dark:bg-white/10 flex items-center justify-center",children:n.jsx(_,{className:"w-4 h-4 text-[#1A1A1A] dark:text-[#F0F0F0]"})})]}),n.jsx("p",{className:"px-6 pb-4 text-base font-semibold text-[#1A1A1A] dark:text-[#F0F0F0] leading-relaxed text-balance",children:e}),n.jsx("div",{className:"px-6 pb-4 grid grid-cols-2 gap-3",children:l.map((e,t)=>{let a=T[t]??T[3];return(0,n.jsxs)(i.E.div,{className:"rounded-2xl p-4 flex flex-col gap-1 cursor-default",style:{backgroundColor:a.bg},whileTap:{scale:.97},children:[n.jsx("span",{className:"text-xs font-black",style:{color:a.text,opacity:.5},children:a.label}),n.jsx("span",{className:"font-bold text-sm leading-snug",style:{color:a.text},children:e})]},t)})}),n.jsx("p",{className:"px-6 pb-2 text-xs text-[#1A1A1A]/40 dark:text-white/30 text-center",children:"A, B, C, D ì¤‘ ìŒì„±ìœ¼ë¡œ ë‹µë³€í•´ ì£¼ì„¸ìš”"}),n.jsx("div",{className:"px-6 pb-6",children:n.jsx(O,{status:a,wsConnected:o})})]})}var x=a(4333);let M={idle:{label:"â— ëŒ€ê¸°",bg:"#F0F0F0",text:"#9CA3AF"},listening:{label:"â—‰ ë“£ëŠ” ì¤‘",bg:"#B8F0F0",text:"#0A4040"},speaking:{label:"\uD83C\uDF99 ë…¹ìŒ ì¤‘",bg:"#FDCFF7",text:"#4A0A40"},ai_speaking:{label:"\uD83D\uDD0A AI ì‘ë‹µ",bg:"#F5E9BB",text:"#4A3800"},waiting:{label:"â³ ì²˜ë¦¬ ì¤‘",bg:"#F5E9BB",text:"#4A3800"}};function C(){let e=(0,l.useRouter)(),{state:t,dispatch:a}=(0,f.b)(),{status:p,wsStatus:h,isWaiting:g,avatarState:m,loading:y,error:w,gameEvent:v,start:_,stop:T,forceCommit:C,dismissEvent:R}=function(){let[e,t]=(0,o.useState)("idle"),[a,n]=(0,o.useState)("disconnected"),[i,s]=(0,o.useState)(!0),[l,u]=(0,o.useState)(null),[f,d]=(0,o.useState)(null),[p,h]=(0,o.useState)([]),g=(0,o.useRef)(crypto.randomUUID()),m=(0,o.useRef)(null),y=(0,o.useRef)(null),b=(0,o.useRef)(null),w=(0,o.useRef)(null),v=(0,o.useRef)(null),O=(0,o.useRef)(!1),_=(0,o.useRef)(16e3);(0,o.useRef)(!1);let E=(0,o.useRef)(0),{playResponse:A,close:T}=function(){let e=(0,o.useRef)(null),t=(0,o.useRef)(0),a=(0,o.useRef)(null),n=(0,o.useCallback)((a,n)=>{if(!a)return;let o=n.match(/rate=(\d+)/),i=o?parseInt(o[1],10):24e3;e.current&&"closed"!==e.current.state||(e.current=new AudioContext({sampleRate:i}),t.current=0);let s=e.current,l=atob(a),u=new Uint8Array(l.length);for(let e=0;e<l.length;e++)u[e]=l.charCodeAt(e);let f=Math.floor(u.length/2),c=new Float32Array(f),d=new DataView(u.buffer);for(let e=0;e<f;e++)c[e]=d.getInt16(2*e,!0)/32768;let p=s.createBuffer(1,f,i);p.copyToChannel(c,0);let h=s.createBufferSource();h.buffer=p,h.connect(s.destination);let g=Math.max(s.currentTime,t.current);h.start(g),t.current=g+p.duration},[]);return{playResponse:(0,o.useCallback)(async(o,i)=>{if(!o)return;let s=atob(o),l=new Uint8Array(s.length);for(let e=0;e<s.length;e++)l[e]=s.charCodeAt(e);if("audio/mpeg"===i||"audio/mp3"===i){let e=new Blob([l],{type:i}),t=URL.createObjectURL(e);a.current||(a.current=new Audio),a.current.src=t,a.current.onended=()=>URL.revokeObjectURL(t),await a.current.play().catch(e=>console.error("[AudioQueue] mp3 play failed:",e));return}e.current&&"closed"!==e.current.state||(e.current=new AudioContext,t.current=0);let u=e.current;try{let e=await u.decodeAudioData(l.buffer.slice(0)),a=u.createBufferSource();a.buffer=e,a.connect(u.destination);let n=Math.max(u.currentTime,t.current);a.start(n),t.current=n+e.duration}catch{n(o,i)}},[n]),enqueueRaw:n,flush:(0,o.useCallback)(()=>{t.current=0},[]),close:(0,o.useCallback)(()=>{e.current?.close(),e.current=null,t.current=0,a.current&&(a.current.pause(),a.current.src="")},[])}}(),S=(()=>{switch(e){case"listening":case"speaking":return"listening";case"ai_speaking":return"speaking";case"waiting":return"thinking";default:return"idle"}})(),x=(0,o.useCallback)((e,t)=>{let a={ts:function(){let e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}.${String(e.getMilliseconds()).padStart(3,"0")}`}(),label:e,color:t};console.log(`[Debug] ${a.ts} ${e}`),h(e=>[a,...e].slice(0,40))},[]),M=(0,o.useCallback)(()=>{if(y.current?.readyState===WebSocket.OPEN)return;n("connecting"),x("WS ì—°ê²° ì‹œë„...","yellow");let e=new WebSocket(`${c}?session_id=${g.current}`);e.binaryType="arraybuffer",y.current=e,e.onopen=()=>{n("connected"),x("âœ“ WS ì—°ê²°ë¨","green")},e.onerror=()=>{n("error"),x("âœ— WS ì—ëŸ¬","red")},e.onclose=e=>{n("disconnected"),x(`WS ì¢…ë£Œ (code=${e.code})`,"yellow"),y.current=null},e.onmessage=async e=>{let a;if("string"==typeof e.data){try{a=JSON.parse(e.data)}catch{return}if("audio"===a.type&&a.data){let e=Math.round(3*a.data.length/4/1024);x(`â—€ ì˜¤ë””ì˜¤ ìˆ˜ì‹  ${e}KB (${a.mime_type})`,"blue"),t("ai_speaking"),await A(a.data,a.mime_type??"audio/wav"),x("âœ“ ìž¬ìƒ ì™„ë£Œ","blue"),t(e=>"ai_speaking"===e||"waiting"===e?"listening":e)}else"event"===a.type&&a.event?(x(`ðŸŽ® ê²Œìž„ ì´ë²¤íŠ¸: ${a.event.type}`,"purple"),d(a.event)):"error"===a.type&&x(`âœ— ì„œë²„ ì˜¤ë¥˜: ${a.message}`,"red")}}},[A,x]),C=(0,o.useCallback)(()=>{y.current?.close(1e3,"session ended"),y.current=null},[]),R=(0,o.useCallback)(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,echoCancellation:!0,noiseSuppression:!0}});v.current=e;let t=new AudioContext;b.current=t,_.current=t.sampleRate,x(`âœ“ AudioContext ${t.sampleRate}Hz`,"green");let a=t.createMediaStreamSource(e),n=t.createScriptProcessor(4096,1,1);w.current=n,E.current=0,n.onaudioprocess=e=>{if(!O.current)return;let t=y.current;if(!t||t.readyState!==WebSocket.OPEN)return;let a=function(e){let t=new ArrayBuffer(2*e.length),a=new DataView(t);for(let t=0;t<e.length;t++){let n=Math.max(-1,Math.min(1,e[t]));a.setInt16(2*t,n<0?32768*n:32767*n,!0)}return t}(e.inputBuffer.getChannelData(0));t.send(a),E.current+=1},a.connect(n),n.connect(t.destination),x("âœ“ PCM ìŠ¤íŠ¸ë¦¬ë° ì¤€ë¹„","green")}catch(t){let e=t instanceof Error?t.message:String(t);x(`âœ— ë§ˆì´í¬ ì˜¤ë¥˜: ${e}`,"red"),u(e)}},[x]),P=(0,o.useCallback)(()=>{O.current=!1,w.current?.disconnect(),w.current=null,b.current?.close(),b.current=null,v.current?.getTracks().forEach(e=>e.stop()),v.current=null},[]),F=(0,o.useCallback)(()=>{let e=y.current;if(!e||e.readyState!==WebSocket.OPEN){x("âœ— speech_end: WS ë¯¸ì—°ê²°","red");return}let t=E.current;E.current=0,x(`â–¶ speech_end ì „ì†¡ (ì²­í¬ ${t}ê°œ, ${_.current}Hz)`,"green"),e.send(JSON.stringify({type:"speech_end",sample_rate:_.current}))},[x]),D=(0,o.useCallback)(()=>{if(!y.current||y.current.readyState!==WebSocket.OPEN){x("âœ— forceCommit: WS ë¯¸ì—°ê²°","red");return}x("\uD83D\uDC46 FORCE COMMIT","yellow"),O.current=!1,F(),t("waiting")},[x,F]);return{status:e,wsStatus:a,isWaiting:"waiting"===e,avatarState:S,loading:i,error:l,gameEvent:f,debugLog:p,start:(0,o.useCallback)(()=>{let e=m.current;e&&(M(),e.start(),R(),t("listening"),x("â–¶ ì„¸ì…˜ ì‹œìž‘","green"))},[M,R,x]),stop:(0,o.useCallback)(()=>{O.current=!1;let e=m.current;e&&e.pause(),P(),C(),T(),t("idle"),x("â–  ì„¸ì…˜ ì¤‘ì§€","yellow")},[P,C,T,x]),forceCommit:D,dismissEvent:(0,o.useCallback)(()=>d(null),[])}}(),[P,F]=(0,o.useState)(null),D=v??P,U=v?R:()=>F(null),N=x.IJ.find(e=>e.id===t.sessionSettings.selectedPersonaId)??x.IJ[0],k="idle"!==p,j="connected"===h,I=M[p]??M.idle;return(0,n.jsxs)("div",{className:"relative flex flex-col bg-white dark:bg-dark-bg overflow-hidden mx-auto w-full",style:{height:"100dvh",maxWidth:430},children:[(0,n.jsxs)("div",{className:"shrink-0 flex items-center justify-between px-5 pb-3",style:{paddingTop:"max(2.5rem, env(safe-area-inset-top, 2.5rem))"},children:[(0,n.jsxs)(i.E.button,{onClick:()=>{T(),a({type:"GO_LANDING"}),e.push("/")},className:"flex items-center gap-1 text-sm font-semibold text-primary",whileTap:{scale:.92},children:[n.jsx(u.Z,{className:"w-4 h-4"}),"ë’¤ë¡œ"]}),n.jsx("span",{className:"font-black text-base text-[#1A1A1A] dark:text-[#F0F0F0] tracking-tight",children:"AI CUPID"}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"connected"===h?"#86E3E3":"connecting"===h?"#E6D08E":"error"===h?"#EF4444":"#9CA3AF",boxShadow:j?"0 0 6px #86E3E3":"none"}}),n.jsx("span",{className:"text-xs text-[#1A1A1A]/40 dark:text-white/30 font-mono",children:h})]})]}),(0,n.jsxs)(i.E.div,{className:"flex-1 flex flex-col items-center justify-center gap-4 px-4 overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:200,damping:24,delay:.08},children:[n.jsx(i.E.button,{onClick:k&&!g?C:void 0,className:k&&!g?"cursor-pointer":"cursor-default",whileTap:k&&!g?{scale:.97}:{},children:n.jsx(b,{avatarState:m,voiceStatus:p,persona:N})}),n.jsx(s.M,{mode:"wait",children:n.jsx(i.E.span,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},transition:{duration:.15},className:"status-pill font-bold",style:{backgroundColor:I.bg,color:I.text},children:I.label},p)}),k&&!g&&n.jsx("p",{className:"text-[11px] text-[#1A1A1A]/25 dark:text-white/20 tracking-widest uppercase",children:"íƒ­í•˜ì—¬ ë‹µë³€ ì „ì†¡"}),w&&n.jsx("p",{className:"text-red-500 text-xs text-center max-w-xs break-words",children:w}),n.jsx("p",{className:"text-[10px] text-[#1A1A1A]/18 dark:text-white/12 font-mono",children:"[dev] í‚¤ë³´ë“œ 1=ì‹¬ë¦¬ 2=ë°¸ëŸ°ìŠ¤ 3=í€´ì¦ˆ"})]}),(0,n.jsxs)("div",{className:"shrink-0 px-5 flex flex-col gap-3",style:{paddingBottom:"max(2rem, env(safe-area-inset-bottom, 2rem))"},children:[n.jsx(i.E.button,{onClick:k?T:_,disabled:y||!!w,className:"w-full py-4 rounded-2xl font-black text-base disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:k?"#FAA2EE":"#86E3E3",color:k?"#4A0A40":"#0A4040"},whileTap:{scale:.97},children:y?"ë¡œë”© ì¤‘...":w?"ì˜¤ë¥˜":k?"ì¤‘ì§€":"ì‹œìž‘"}),n.jsx(O,{status:p,wsConnected:j})]}),n.jsx(s.M,{children:D&&(0,n.jsxs)(i.E.div,{className:"absolute inset-0 z-20 flex items-center justify-center px-5",initial:"hidden",animate:"visible",exit:"exit",variants:d.Yp,children:[n.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:U}),"psych"===D.type&&n.jsx(E,{question:D.question,voiceStatus:p,wsConnected:j,onClose:U}),"balance"===D.type&&n.jsx(A,{question:D.question,choices:[D.choices[0]??"A",D.choices[1]??"B"],voiceStatus:p,wsConnected:j,onClose:U}),"quiz"===D.type&&n.jsx(S,{question:D.question,choices:D.choices,voiceStatus:p,wsConnected:j,onClose:U})]})})]})}function R(){return n.jsx("main",{className:"relative min-h-screen overflow-hidden bg-hero-gradient",children:n.jsx(C,{})})}},7262:(e,t,a)=>{"use strict";a.d(t,{AppProvider:()=>u,b:()=>f});var n=a(326),o=a(7577);let i={phase:"landing",sessionSettings:{selectedPersonaId:a(4333).IJ[0].id,avatarState:"idle"}};function s(e,t){switch(t.type){case"START_TRANSITION":return{...e,phase:"transitioning"};case"SESSION_READY":return{...e,phase:"session"};case"GO_LANDING":return{...e,phase:"landing",sessionSettings:{...e.sessionSettings,avatarState:"idle"}};case"SET_PERSONA":return{...e,sessionSettings:{...e.sessionSettings,selectedPersonaId:t.payload}};case"SET_AVATAR_STATE":return{...e,sessionSettings:{...e.sessionSettings,avatarState:t.payload}};default:return e}}let l=(0,o.createContext)(null);function u({children:e}){let[t,a]=(0,o.useReducer)(s,i);return n.jsx(l.Provider,{value:{state:t,dispatch:a},children:e})}function f(){let e=(0,o.useContext)(l);if(!e)throw Error("useAppContext must be used within AppProvider");return e}},3188:(e,t,a)=>{"use strict";a.d(t,{Yp:()=>o,dJ:()=>s,id:()=>n,z6:()=>i});let n={idle:{scale:1,opacity:0},speaking:{scale:[1,1.12,1],opacity:[.6,1,.6],transition:{duration:.9,repeat:1/0,ease:"easeInOut"}},listening:{scale:[1,1.06,1],opacity:[.3,.7,.3],transition:{duration:1.1,repeat:1/0,ease:"easeInOut"}},thinking:{scale:[1,1.04,1.08,1.04,1],opacity:[.2,.4,.2,.4,.2],transition:{duration:2.2,repeat:1/0,ease:"easeInOut"}}},o={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.18}},exit:{opacity:0,transition:{duration:.14}}},i={hidden:{scale:.88,opacity:0,y:12},visible:{scale:1,opacity:1,y:0,transition:{type:"spring",stiffness:340,damping:28}},exit:{scale:.88,opacity:0,y:12,transition:{duration:.14,ease:"easeIn"}}},s={enter:e=>({x:e>0?60:-60,opacity:0}),center:{x:0,opacity:1},exit:e=>({x:e>0?-60:60,opacity:0})}},4333:(e,t,a)=>{"use strict";a.d(t,{IJ:()=>n});let n=[{id:"hypebot",name:"HypeBot",description:"High-energy party host",accentColor:"rgba(255,255,255,0.70)",avatarGradient:"linear-gradient(135deg, #1c1c1c, #2a2a2a)",emoji:"\uD83D\uDD25"},{id:"oracle",name:"The Oracle",description:"Calm, philosophical MC",accentColor:"rgba(255,255,255,0.65)",avatarGradient:"linear-gradient(135deg, #181818, #242424)",emoji:"\uD83D\uDD2E"},{id:"roastmaster",name:"Roastmaster",description:"Edgy, comedic host",accentColor:"rgba(255,255,255,0.60)",avatarGradient:"linear-gradient(135deg, #1a1a1a, #222222)",emoji:"\uD83D\uDE08"},{id:"narrator",name:"The Narrator",description:"Dramatic storyteller",accentColor:"rgba(255,255,255,0.55)",avatarGradient:"linear-gradient(135deg, #161616, #202020)",emoji:"\uD83D\uDCD6"}]},6025:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baseAssetPath=void 0;let a="undefined"!=typeof window&&void 0!==window.document?window.document.currentScript:null,n="/";a&&(n=a.src.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^/]+$/,"/")),t.baseAssetPath=n},2505:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultModelFetcher=void 0,t.defaultModelFetcher=e=>fetch(e).then(e=>e.arrayBuffer())},1797:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameProcessor=t.validateOptions=t.defaultFrameProcessorOptions=void 0;let n=a(4893),o=a(5905);t.defaultFrameProcessorOptions={positiveSpeechThreshold:.3,negativeSpeechThreshold:.25,preSpeechPadMs:800,redemptionMs:1400,minSpeechMs:400,submitUserSpeechOnPause:!1},t.validateOptions=function(e){(e.positiveSpeechThreshold<0||e.positiveSpeechThreshold>1)&&n.log.error("positiveSpeechThreshold should be a number between 0 and 1"),(e.negativeSpeechThreshold<0||e.negativeSpeechThreshold>e.positiveSpeechThreshold)&&n.log.error("negativeSpeechThreshold should be between 0 and positiveSpeechThreshold"),e.preSpeechPadMs<0&&n.log.error("preSpeechPadMs should be positive"),e.redemptionMs<0&&n.log.error("redemptionMs should be positive"),e.minSpeechMs<0&&n.log.error("minSpeechMs should be positive")};let i=e=>{let t=e.reduce((e,t)=>(e.push(e.at(-1)+t.length),e),[0]),a=new Float32Array(t.at(-1));return e.forEach((e,n)=>{let o=t[n];a.set(e,o)}),a};function s(e,t){return{redemptionFrames:Math.floor(e.redemptionMs/t),preSpeechPadFrames:Math.floor(e.preSpeechPadMs/t),minSpeechFrames:Math.floor(e.minSpeechMs/t)}}class l{constructor(e,t,a,n){this.modelProcessFunc=e,this.modelResetFunc=t,this.options=a,this.msPerFrame=n,this.speaking=!1,this.redemptionCounter=0,this.speechFrameCount=0,this.active=!1,this.speechRealStartFired=!1,this.setOptions=e=>{this.options={...this.options,...e};let{redemptionFrames:t,preSpeechPadFrames:a,minSpeechFrames:n}=s(this.options,this.msPerFrame);this.redemptionFrames=t,this.preSpeechPadFrames=a,this.minSpeechFrames=n},this.reset=()=>{this.speaking=!1,this.speechRealStartFired=!1,this.audioBuffer=[],this.modelResetFunc(),this.redemptionCounter=0,this.speechFrameCount=0},this.pause=e=>{this.active=!1,this.options.submitUserSpeechOnPause?this.endSegment(e):this.reset()},this.resume=()=>{this.active=!0},this.endSegment=e=>{let t=this.audioBuffer;this.audioBuffer=[];let a=this.speaking;if(this.reset(),a){if(t.reduce((e,t)=>t.isSpeech?e+1:e,0)>=this.minSpeechFrames){let a=i(t.map(e=>e.frame));e({msg:o.Message.SpeechEnd,audio:a})}else e({msg:o.Message.VADMisfire})}return{}},this.process=async(e,t)=>{if(!this.active)return;let a=await this.modelProcessFunc(e),n=a.isSpeech>=this.options.positiveSpeechThreshold;if(t({probs:a,msg:o.Message.FrameProcessed,frame:e}),this.audioBuffer.push({frame:e,isSpeech:n}),n&&(this.speechFrameCount++,this.redemptionCounter=0),n&&!this.speaking&&(this.speaking=!0,t({msg:o.Message.SpeechStart})),this.speaking&&this.speechFrameCount===this.minSpeechFrames&&!this.speechRealStartFired&&(this.speechRealStartFired=!0,t({msg:o.Message.SpeechRealStart})),a.isSpeech<this.options.negativeSpeechThreshold&&this.speaking&&++this.redemptionCounter>=this.redemptionFrames){this.redemptionCounter=0,this.speechFrameCount=0,this.speaking=!1,this.speechRealStartFired=!1;let e=this.audioBuffer;if(this.audioBuffer=[],e.reduce((e,t)=>t.isSpeech?e+1:e,0)>=this.minSpeechFrames){let a=i(e.map(e=>e.frame));t({msg:o.Message.SpeechEnd,audio:a})}else t({msg:o.Message.VADMisfire})}if(!this.speaking){for(;this.audioBuffer.length>this.preSpeechPadFrames;)this.audioBuffer.shift();this.speechFrameCount=0}},this.audioBuffer=[];let{redemptionFrames:l,preSpeechPadFrames:u,minSpeechFrames:f}=s(this.options,this.msPerFrame);this.redemptionFrames=l,this.preSpeechPadFrames=u,this.minSpeechFrames=f,this.reset()}}t.FrameProcessor=l},3527:(e,t,a)=>{"use strict";a(6025),a(2505),a(1797),a(5905),a(4035);let n=a(1808);n.audioFileToArray,n.minFramesForTargetMS,n.arrayBufferToBase64,n.encodeWAV,a(9202)},4893:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;let a=e=>t=>{console.log(`VAD | ${e} >`,t)};t.log={error:a("error"),debug:a("debug"),warn:a("warn")}},5905:(e,t)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0,function(e){e.AudioFrame="AUDIO_FRAME",e.SpeechStart="SPEECH_START",e.VADMisfire="VAD_MISFIRE",e.SpeechEnd="SPEECH_END",e.SpeechStop="SPEECH_STOP",e.SpeechRealStart="SPEECH_REAL_START",e.FrameProcessed="FRAME_PROCESSED"}(a||(t.Message=a={}))},7729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7407:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var o=Object.getOwnPropertyDescriptor(t,a);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,o)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),o=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.SileroV5=t.SileroLegacy=void 0,o(a(7729),t);var i=a(3002);Object.defineProperty(t,"SileroLegacy",{enumerable:!0,get:function(){return i.SileroLegacy}});var s=a(5179);Object.defineProperty(t,"SileroV5",{enumerable:!0,get:function(){return s.SileroV5}})},3002:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SileroLegacy=void 0;let n=a(4893);class o{constructor(e,t,a,n,o){this.ortInstance=e,this._session=t,this._h=a,this._c=n,this._sr=o,this.reset_state=()=>{let e=Array(128).fill(0);this._h=new this.ortInstance.Tensor("float32",e,[2,1,64]),this._c=new this.ortInstance.Tensor("float32",e,[2,1,64])},this.process=async e=>{let t={input:new this.ortInstance.Tensor("float32",e,[1,e.length]),h:this._h,c:this._c,sr:this._sr},a=await this._session.run(t);this._h=a.hn,this._c=a.cn;let[n]=a.output?.data;return{notSpeech:1-n,isSpeech:n}},this.release=async()=>{await this._session.release(),this._h.dispose(),this._c.dispose(),this._sr.dispose()}}}t.SileroLegacy=o,o.new=async(e,t)=>{n.log.debug("initializing vad");let a=await t(),i=await e.InferenceSession.create(a),s=new e.Tensor("int64",[16000n]),l=Array(128).fill(0),u=new e.Tensor("float32",l,[2,1,64]),f=new e.Tensor("float32",l,[2,1,64]);return n.log.debug("vad is initialized"),new o(e,i,u,f,s)}},5179:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SileroV5=void 0;let n=a(4893);function o(e){let t=Array(256).fill(0);return new e.Tensor("float32",t,[2,1,128])}class i{constructor(e,t,a,n){this._session=e,this._state=t,this._sr=a,this.ortInstance=n,this.reset_state=()=>{this._state=o(this.ortInstance)},this.process=async e=>{let t={input:new this.ortInstance.Tensor("float32",e,[1,e.length]),state:this._state,sr:this._sr},a=await this._session.run(t);if(!a.stateN)throw Error("No state from model");if(this._state=a.stateN,!a.output?.data)throw Error("No output from model");let n=a.output.data[0];if("number"!=typeof n)throw Error("Weird output data");return{notSpeech:1-n,isSpeech:n}},this.release=async()=>{await this._session.release(),this._state.dispose(),this._sr.dispose()}}}t.SileroV5=i,i.new=async(e,t)=>{n.log.debug("Loading VAD...");let a=await t(),s=await e.InferenceSession.create(a),l=new e.Tensor("int64",[16000n]),u=o(e);return n.log.debug("...finished loading VAD"),new i(s,u,l,e)}},4035:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var o=Object.getOwnPropertyDescriptor(t,a);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,o)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NonRealTimeVAD=t.defaultNonRealTimeVADOptions=void 0;let s=i(a(6499)),l=a(6025),u=a(2505),f=a(1797),c=a(5905),d=a(7407),p=a(3194);t.defaultNonRealTimeVADOptions={...f.defaultFrameProcessorOptions,modelURL:l.baseAssetPath+"silero_vad_legacy.onnx",modelFetcher:u.defaultModelFetcher};class h{static async new(e={}){let a={...t.defaultNonRealTimeVADOptions,...e};(0,f.validateOptions)(a),void 0!==a.ortConfig&&a.ortConfig(s);let n=()=>a.modelFetcher(a.modelURL),o=await d.SileroLegacy.new(s,n),i=new f.FrameProcessor(o.process,o.reset_state,{positiveSpeechThreshold:a.positiveSpeechThreshold,negativeSpeechThreshold:a.negativeSpeechThreshold,redemptionMs:a.redemptionMs,preSpeechPadMs:a.preSpeechPadMs,minSpeechMs:a.minSpeechMs,submitUserSpeechOnPause:a.submitUserSpeechOnPause},96);return i.resume(),new this(n,s,a,i)}constructor(e,t,a,n){this.modelFetcher=e,this.ort=t,this.options=a,this.frameProcessor=n,this.frameSamples=1536}async *run(e,t){let a={nativeSampleRate:t,targetSampleRate:16e3,targetFrameSize:this.frameSamples},n=new p.Resampler(a),o=0,i=0,s=0;for await(let t of n.stream(e)){let e=[];for(let a of(await this.frameProcessor.process(t,t=>{e.push(t)}),e))switch(a.msg){case c.Message.SpeechStart:o=s*this.frameSamples/16;break;case c.Message.SpeechEnd:i=(s+1)*this.frameSamples/16,yield{audio:a.audio,start:o,end:i}}s++}let l=[];for(let e of(this.frameProcessor.endSegment(e=>{l.push(e)}),l))e.msg===c.Message.SpeechEnd&&(yield{audio:e.audio,start:o,end:s*this.frameSamples/16})}}t.NonRealTimeVAD=h},9202:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var o=Object.getOwnPropertyDescriptor(t,a);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,o)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MicVAD=t.getDefaultRealTimeVADOptions=t.ort=t.DEFAULT_MODEL=void 0;let s=i(a(7100)),l=a(2505),u=a(1797),f=a(4893),c=a(5905),d=a(7407),p=a(3194);t.DEFAULT_MODEL="legacy",t.ort=s,t.getDefaultRealTimeVADOptions=e=>({...u.defaultFrameProcessorOptions,onFrameProcessed:()=>{},onVADMisfire:()=>{f.log.debug("VAD misfire")},onSpeechStart:()=>{f.log.debug("Detected speech start")},onSpeechEnd:()=>{f.log.debug("Detected speech end")},onSpeechRealStart:()=>{f.log.debug("Detected real speech start")},baseAssetPath:"./",onnxWASMBasePath:"./",model:e,workletOptions:{},getStream:async()=>await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}}),pauseStream:async e=>{e.getTracks().forEach(e=>{e.stop()})},resumeStream:async()=>await navigator.mediaDevices.getUserMedia({audio:{channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}}),ortConfig:e=>{e.env.logLevel="error"},startOnLoad:!0,processorType:"auto"});let h=e=>"audioWorklet"in e&&"function"==typeof AudioWorkletNode?"AudioWorklet":"ScriptProcessor";async function g(e,t,a,n,o){await a.audioWorklet.addModule(e),t.processorOptions={...t.processorOptions??{},frameSamples:n};let i=new AudioWorkletNode(a,"vad-helper-worklet",t);return i.port.onmessage=async e=>{let t=e.data;if(!("object"==typeof t&&t&&"message"in t)){console.error("Invalid message event",t);return}if(t.message===c.Message.AudioFrame){if(!("data"in t&&t.data instanceof ArrayBuffer)){console.log("Audio frame message has no data");return}let e=new Float32Array(t.data);await o(e)}},i}async function m(e,t,a){let n=new p.Resampler({nativeSampleRate:e.sampleRate,targetSampleRate:16e3,targetFrameSize:t});f.log.debug("using script processor");let o=e.createScriptProcessor(4096,1,1),i=!1;return o.onaudioprocess=async e=>{if(!i){i=!0;try{let t=e.inputBuffer.getChannelData(0);for(let o of(e.outputBuffer.getChannelData(0).fill(0),n.process(t)))await a(o)}catch(e){console.error("Error processing audio:",e)}finally{i=!1}}},o.connect(e.destination),o}class y{constructor(e,t,a,n,o=!1,i=null,s=null,l=null,u=null,d=null,p=null,y="uninitialized",b=!1){this.options=e,this.frameProcessor=t,this.model=a,this.frameSamples=n,this.listening=o,this.errored=i,this._stream=s,this._audioContext=l,this._vadNode=u,this._mediaStreamAudioSourceNode=d,this._audioProcessorAdapterType=p,this.initializationState=y,this.ownsAudioContext=b,this.getAudioInstances=()=>{if(null===this._stream||null===this._audioContext||null==this._vadNode||null==this._mediaStreamAudioSourceNode)throw Error("MicVAD has null stream, audio context, or processor adapter");return{stream:this._stream,audioContext:this._audioContext,vadNode:this._vadNode,mediaStreamAudioSourceNode:this._mediaStreamAudioSourceNode}},this.setErrored=e=>{this.initializationState="errored",this.errored=e},this.start=async()=>{switch(this.initializationState){case"uninitialized":f.log.debug("initializing micVAD"),this.initializationState="initializing",this.frameProcessor.resume();try{this._stream=await this.options.getStream()}catch(e){throw e instanceof Error?this.setErrored(e.message):this.setErrored(String(e)),e}if(this.options.audioContext?(console.log("using custom audio context"),this._audioContext=this.options.audioContext):(console.log("using default audio context"),this._audioContext=new AudioContext,this.ownsAudioContext=!0),!this._audioContext)throw this.setErrored("Audio context is null"),Error("Audio context is null");switch(this._audioProcessorAdapterType="auto"==this.options.processorType?h(this._audioContext):this.options.processorType,this._audioProcessorAdapterType){case"AudioWorklet":this._vadNode=await g(this.options.baseAssetPath+"vad.worklet.bundle.min.js",this.options.workletOptions,this._audioContext,this.frameSamples,this.processFrame);break;case"ScriptProcessor":this._vadNode=await m(this._audioContext,this.frameSamples,this.processFrame);break;default:throw Error(`Unsupported audio processor adapter type: ${this._audioProcessorAdapterType}`)}this._mediaStreamAudioSourceNode=new MediaStreamAudioSourceNode(this._audioContext,{mediaStream:this._stream}),this._mediaStreamAudioSourceNode.connect(this._vadNode),f.log.debug("started micVAD"),this.listening=!0,this.initializationState="initialized";break;case"initializing":f.log.warn("start called while initializing");break;case"initialized":{if(this.listening)return;this.listening=!0,this.frameProcessor.resume();let{stream:e,audioContext:t,vadNode:a}=this.getAudioInstances();this._stream=await this.options.resumeStream(e);let n=new MediaStreamAudioSourceNode(t,{mediaStream:this._stream});this._mediaStreamAudioSourceNode=n,n.connect(a);break}case"destroyed":f.log.warn("start called after destroyed");break;case"errored":f.log.error("start called after errored");break;default:f.log.warn("weird initialization state")}},this.pause=async()=>{if(!this.listening)return;this.listening=!1;let{stream:e,mediaStreamAudioSourceNode:t}=this.getAudioInstances();await this.options.pauseStream(e),t.disconnect(),this.frameProcessor.pause(this.handleFrameProcessorEvent)},this.destroy=async()=>{f.log.debug("destroy called"),this.initializationState="destroyed";let{vadNode:e}=this.getAudioInstances();e instanceof AudioWorkletNode&&e.port.postMessage(c.Message.SpeechStop),this.listening&&await this.pause(),await this.model.release(),this.ownsAudioContext&&await this._audioContext?.close()},this.setOptions=e=>{this.frameProcessor.setOptions(e)},this.processFrame=async e=>{await this.frameProcessor.process(e,this.handleFrameProcessorEvent)},this.handleFrameProcessorEvent=e=>{switch(e.msg){case c.Message.FrameProcessed:this.options.onFrameProcessed(e.probs,e.frame);break;case c.Message.SpeechStart:this.options.onSpeechStart();break;case c.Message.SpeechRealStart:this.options.onSpeechRealStart();break;case c.Message.VADMisfire:this.options.onVADMisfire();break;case c.Message.SpeechEnd:this.options.onSpeechEnd(e.audio)}}}static async new(e={}){let a;let n={...(0,t.getDefaultRealTimeVADOptions)(e.model??t.DEFAULT_MODEL),...e};(0,u.validateOptions)(n),t.ort.env.wasm.wasmPaths=n.onnxWASMBasePath,void 0!==n.ortConfig&&n.ortConfig(t.ort);let o="v5"===n.model?"silero_vad_v5.onnx":"silero_vad_legacy.onnx",i=n.baseAssetPath+o,s="v5"===n.model?d.SileroV5.new:d.SileroLegacy.new;try{a=await s(t.ort,()=>(0,l.defaultModelFetcher)(i))}catch(e){throw console.error(`Encountered an error while loading model file ${i}`),e}let f="v5"===n.model?512:1536,c=new u.FrameProcessor(a.process,a.reset_state,{positiveSpeechThreshold:n.positiveSpeechThreshold,negativeSpeechThreshold:n.negativeSpeechThreshold,redemptionMs:n.redemptionMs,preSpeechPadMs:n.preSpeechPadMs,minSpeechMs:n.minSpeechMs,submitUserSpeechOnPause:n.submitUserSpeechOnPause},f/16),p=new y(n,c,a,f);if(n.startOnLoad)try{await p.start()}catch(e){throw console.error("Error starting micVad",e),e}return p}}t.MicVAD=y},3194:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resampler=void 0;let n=a(4893);class o{constructor(e){this.options=e,this.process=e=>{let t=[];for(let a of e)for(this.inputBuffer.push(a);this.hasEnoughDataForFrame();){let e=this.generateOutputFrame();t.push(e)}return t},e.nativeSampleRate<16e3&&n.log.error("nativeSampleRate is too low. Should have 16000 = targetSampleRate <= nativeSampleRate"),this.inputBuffer=[]}async *stream(e){for(let t of e)for(this.inputBuffer.push(t);this.hasEnoughDataForFrame();){let e=this.generateOutputFrame();yield e}}hasEnoughDataForFrame(){return this.inputBuffer.length*this.options.targetSampleRate/this.options.nativeSampleRate>=this.options.targetFrameSize}generateOutputFrame(){let e=new Float32Array(this.options.targetFrameSize),t=0,a=0;for(;t<this.options.targetFrameSize;){let n=0,o=0;for(;a<Math.min(this.inputBuffer.length,(t+1)*this.options.nativeSampleRate/this.options.targetSampleRate);){let e=this.inputBuffer[a];void 0!==e&&(n+=e,o++),a++}e[t]=n/o,t++}return this.inputBuffer=this.inputBuffer.slice(a),e}}t.Resampler=o},1808:(e,t)=>{"use strict";function a(e,t,a){for(let n=0;n<a.length;n++)e.setUint8(t+n,a.charCodeAt(n))}async function n(e){let t=new OfflineAudioContext(1,1,44100),a=new FileReader,n=null;if(await new Promise(o=>{a.addEventListener("loadend",()=>{let e=a.result;t.decodeAudioData(e,e=>{n=e,t.startRendering().then(()=>{console.log("Rendering completed successfully"),o()}).catch(e=>{console.error("Rendering failed: ",e)})},e=>{console.log("Error with decoding audio data: ",e)})}),a.readAsArrayBuffer(e)}),null===n)throw Error("some shit");let o=n,i=new Float32Array(o.length);for(let e=0;e<o.length;e++)for(let t=0;t<o.numberOfChannels;t++){let a=o.getChannelData(t)[e],n=i[e];if(void 0===a||void 0===n)throw Error("sample or out[i] is undefined");i[e]=n+a}return{audio:i,sampleRate:o.sampleRate}}Object.defineProperty(t,"__esModule",{value:!0}),t.audioFileToArray=t.encodeWAV=t.arrayBufferToBase64=t.minFramesForTargetMS=void 0,t.minFramesForTargetMS=function(e,t,a=16e3){return Math.ceil(e*a/1e3/t)},t.arrayBufferToBase64=function(e){let t=new Uint8Array(e),a=t.byteLength,n=Array(a);for(let e=0;e<a;e++){let a=t[e];if(void 0===a)break;n[e]=String.fromCharCode(a)}return btoa(n.join(""))},t.encodeWAV=function(e,t=3,n=16e3,o=1,i=32){let s=i/8,l=o*s,u=new ArrayBuffer(44+e.length*s),f=new DataView(u);return a(f,0,"RIFF"),f.setUint32(4,36+e.length*s,!0),a(f,8,"WAVE"),a(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,t,!0),f.setUint16(22,o,!0),f.setUint32(24,n,!0),f.setUint32(28,n*l,!0),f.setUint16(32,l,!0),f.setUint16(34,i,!0),a(f,36,"data"),f.setUint32(40,e.length*s,!0),1===t?function(e,t,a){for(let n=0;n<a.length;n++,t+=2){let o=Math.max(-1,Math.min(1,a[n]));e.setInt16(t,o<0?32768*o:32767*o,!0)}}(f,44,e):function(e,t,a){for(let n=0;n<a.length;n++,t+=4)e.setFloat32(t,a[n],!0)}(f,44,e),u},t.audioFileToArray=n},6499:(e,t,a)=>{"use strict";let n,o,i,s;var l,u,f,c,d,p,h,g,m,y,b,w,v,O,_,E,A,T,S,x,M,C,R,P,F,D,U,N,k,j,I,B,L,$,H,W,G,Y,z,V,q,J,X,Z,Q,K,ee,et,er,ea,en,eo,ei,es,el,eu,ef,ec,ed,ep,eh,eg=Object.create,em=Object.defineProperty,ey=Object.getOwnPropertyDescriptor,eb=Object.getOwnPropertyNames,ew=Object.getPrototypeOf,ev=Object.prototype.hasOwnProperty,eO=(e,t)=>()=>(e&&(t=e(e=0)),t),e_=(e,t)=>{for(var a in t)em(e,a,{get:t[a],enumerable:!0})},eE=(e,t,a,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of eb(t))ev.call(e,o)||o===a||em(e,o,{get:()=>t[o],enumerable:!(n=ey(t,o))||n.enumerable});return e},eA=(e,t,a)=>(a=null!=e?eg(ew(e)):{},eE(!t&&e&&e.__esModule?a:em(a,"default",{value:e,enumerable:!0}),e)),eT=e=>eE(em({},"__esModule",{value:!0}),e),eS=(n=(n,o)=>{var i=(()=>{var e="u">typeof document?document.currentScript?.src:void 0;return e||=__filename,function(t={}){var n,o,i,s,l,u,f=new Promise((e,t)=>{o=e,i=t}),c=Object.assign({},t),d="./this.program",p="object"==typeof window,h="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";if(g){var y=a(2048),b=a(5315);m=h?b.dirname(m)+"/":__dirname+"/",s=(e,t)=>(e=I(e)?new URL(e):b.normalize(e),y.readFileSync(e,t?void 0:"utf8")),u=e=>((e=s(e,!0)).buffer||(e=new Uint8Array(e)),e),l=(e,t,a,n=!0)=>{e=I(e)?new URL(e):b.normalize(e),y.readFile(e,n?void 0:"utf8",(e,o)=>{e?a(e):t(n?o.buffer:o)})},!t.thisProgram&&1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(p||h)&&(h?m=self.location.href:"u">typeof document&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m=m.startsWith("blob:")?"":m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1),s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},h&&(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),l=(e,t,a)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):a()},n.onerror=a,n.send(null)});var w=console.log.bind(console),v=console.error.bind(console);Object.assign(t,c),c=null;var O,_,E,A,T,S,x=!1;function M(){var e=O.buffer;t.HEAP8=_=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAPU8=E=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAP32=A=new Int32Array(e),t.HEAPU32=T=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=S=new Float64Array(e)}var C=[],R=[],P=[],F=0,D=null,U=null;function N(e){throw v(e="Aborted("+e+")"),x=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),i(e),e}var k,j=e=>e.startsWith("data:application/octet-stream;base64,"),I=e=>e.startsWith("file://");if(!j(k="ort-wasm.wasm")){var B=k;k=t.locateFile?t.locateFile(B,m):m+B}function L(e){if(u)return u(e);throw"both async and sync fetching of the wasm failed"}function $(e,t,a){return(function(e){if(p||h){if("function"==typeof fetch&&!I(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw`failed to load wasm binary file at '${e}'`;return t.arrayBuffer()}).catch(()=>L(e));if(l)return new Promise((t,a)=>{l(e,e=>t(new Uint8Array(e)),a)})}return Promise.resolve().then(()=>L(e))})(e).then(e=>WebAssembly.instantiate(e,t)).then(a,e=>{v(`failed to asynchronously prepare wasm: ${e}`),N(e)})}var H,W={798088:(e,a,n,o)=>{if(typeof t>"u"||!t.ya)return 1;if((e=X(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=t.ya.get(e)))return 2;if((a>>>=0)+(n>>>=0)>e.byteLength)return 3;try{return E.set(e.subarray(a,a+n),o>>>0>>>0),0}catch{return 4}}};class G{constructor(e){this.wa=e-24}}var Y,z=0,V=0,q="u">typeof TextDecoder?new TextDecoder("utf8"):void 0,J=(e,t,a)=>{var n=(t>>>=0)+a;for(a=t;e[a]&&!(a>=n);)++a;if(16<a-t&&e.buffer&&q)return q.decode(e.subarray(t,a));for(n="";t<a;){var o=e[t++];if(128&o){var i=63&e[t++];if((224&o)==192)n+=String.fromCharCode((31&o)<<6|i);else{var s=63&e[t++];65536>(o=(240&o)==224?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&e[t++])?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else n+=String.fromCharCode(o)}return n},X=(e,t)=>(e>>>=0)?J(E,e,t):"",Z=e=>{for(var t=0,a=0;a<e.length;++a){var n=e.charCodeAt(a);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++a):t+=3}return t},Q=(e,t,a,n)=>{if(a>>>=0,!(0<n))return 0;var o=a;n=a+n-1;for(var i=0;i<e.length;++i){var s=e.charCodeAt(i);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),127>=s){if(a>=n)break;t[a++>>>0]=s}else{if(2047>=s){if(a+1>=n)break;t[a++>>>0]=192|s>>6}else{if(65535>=s){if(a+2>=n)break;t[a++>>>0]=224|s>>12}else{if(a+3>=n)break;t[a++>>>0]=240|s>>18,t[a++>>>0]=128|s>>12&63}t[a++>>>0]=128|s>>6&63}t[a++>>>0]=128|63&s}}return t[a>>>0]=0,a-o},K=e=>e%4==0&&(e%100!=0||e%400==0),ee=[0,31,60,91,121,152,182,213,244,274,305,335],et=[0,31,59,90,120,151,181,212,243,273,304,334],er=[],ea={},en=()=>{if(!Y){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(e in ea)void 0===ea[e]?delete t[e]:t[e]=ea[e];var a=[];for(e in t)a.push(`${e}=${t[e]}`);Y=a}return Y},eo=[null,[],[]],ei=[31,29,31,30,31,30,31,31,30,31,30,31],es=[31,28,31,30,31,30,31,31,30,31,30,31];function el(e,t,a,n){function o(e,t,a){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=a[0]+e;return e}function i(e,t){return o(e,t,"0")}function s(e,t){var a;function n(e){return 0>e?-1:0<e?1:0}return 0===(a=n(e.getFullYear()-t.getFullYear()))&&0===(a=n(e.getMonth()-t.getMonth()))&&(a=n(e.getDate()-t.getDate())),a}function l(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.sa;for(e=new Date(new Date(e.ta+1900,0,1).getTime());0<t;){var a=e.getMonth(),n=(K(e.getFullYear())?ei:es)[a];if(t>n-e.getDate())t-=n-e.getDate()+1,e.setDate(1),11>a?e.setMonth(a+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));else{e.setDate(e.getDate()+t);break}}return a=new Date(e.getFullYear()+1,0,4),t=l(new Date(e.getFullYear(),0,4)),a=l(a),0>=s(t,e)?0>=s(a,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,a>>>=0;var f,c,d=T[(n>>>=0)+40>>>2>>>0];for(var p in n={Ba:A[n>>>2>>>0],Aa:A[n+4>>>2>>>0],ua:A[n+8>>>2>>>0],xa:A[n+12>>>2>>>0],va:A[n+16>>>2>>>0],ta:A[n+20>>>2>>>0],na:A[n+24>>>2>>>0],sa:A[n+28>>>2>>>0],Da:A[n+32>>>2>>>0],za:A[n+36>>>2>>>0],Ca:d?X(d):""},a=X(a),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})a=a.replace(RegExp(p,"g"),d[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),g="January February March April May June July August September October November December".split(" ");for(p in d={"%a":e=>h[e.na].substring(0,3),"%A":e=>h[e.na],"%b":e=>g[e.va].substring(0,3),"%B":e=>g[e.va],"%C":e=>i((e.ta+1900)/100|0,2),"%d":e=>i(e.xa,2),"%e":e=>o(e.xa,2," "),"%g":e=>u(e).toString().substring(2),"%G":u,"%H":e=>i(e.ua,2),"%I":e=>(0==(e=e.ua)?e=12:12<e&&(e-=12),i(e,2)),"%j":e=>{for(var t=0,a=0;a<=e.va-1;t+=(K(e.ta+1900)?ei:es)[a++]);return i(e.xa+t,3)},"%m":e=>i(e.va+1,2),"%M":e=>i(e.Aa,2),"%n":()=>`
`,"%p":e=>0<=e.ua&&12>e.ua?"AM":"PM","%S":e=>i(e.Ba,2),"%t":()=>"	","%u":e=>e.na||7,"%U":e=>i(Math.floor((e.sa+7-e.na)/7),2),"%V":e=>{var t=Math.floor((e.sa+7-(e.na+6)%7)/7);if(2>=(e.na+371-e.sa-2)%7&&t++,t)53==t&&(4==(a=(e.na+371-e.sa)%7)||3==a&&K(e.ta)||(t=1));else{t=52;var a=(e.na+7-e.sa-1)%7;(4==a||5==a&&K(e.ta%400-1))&&t++}return i(t,2)},"%w":e=>e.na,"%W":e=>i(Math.floor((e.sa+7-(e.na+6)%7)/7),2),"%y":e=>(e.ta+1900).toString().substring(2),"%Y":e=>e.ta+1900,"%z":e=>(0<=(e=e.za)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4),"%Z":e=>e.Ca,"%%":()=>"%"},a=a.replace(/%%/g,"\0\0"),d)a.includes(p)&&(a=a.replace(RegExp(p,"g"),d[p](n)));return c=Array(Z(f=a=a.replace(/\0\0/g,"%"))+1),Q(f,c,0,c.length),(p=c).length>t?0:(_.set(p,e>>>0),p.length-1)}var eu={a:function(e,t,a){var n=new G(e>>>=0);throw T[n.wa+16>>>2>>>0]=0,T[n.wa+4>>>2>>>0]=t>>>0,T[n.wa+8>>>2>>>0]=a>>>0,z=e,V++,z},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(e,t,a){return t>>>=0,E.copyWithin(e>>>0>>>0,t>>>0,t+(a>>>0)>>>0)},n:function(e,t,a){a>>>=0,e=new Date(1e3*(e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN)),A[a>>>2>>>0]=e.getUTCSeconds(),A[a+4>>>2>>>0]=e.getUTCMinutes(),A[a+8>>>2>>>0]=e.getUTCHours(),A[a+12>>>2>>>0]=e.getUTCDate(),A[a+16>>>2>>>0]=e.getUTCMonth(),A[a+20>>>2>>>0]=e.getUTCFullYear()-1900,A[a+24>>>2>>>0]=e.getUTCDay(),A[a+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(e,t,a){a>>>=0,e=new Date(1e3*(e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN)),A[a>>>2>>>0]=e.getSeconds(),A[a+4>>>2>>>0]=e.getMinutes(),A[a+8>>>2>>>0]=e.getHours(),A[a+12>>>2>>>0]=e.getDate(),A[a+16>>>2>>>0]=e.getMonth(),A[a+20>>>2>>>0]=e.getFullYear()-1900,A[a+24>>>2>>>0]=e.getDay(),A[a+28>>>2>>>0]=(K(e.getFullYear())?ee:et)[e.getMonth()]+e.getDate()-1|0,A[a+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[a+32>>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t))},p:function(e){var t=new Date(A[(e>>>=0)+20>>>2>>>0]+1900,A[e+16>>>2>>>0],A[e+12>>>2>>>0],A[e+8>>>2>>>0],A[e+4>>>2>>>0],A[e>>>2>>>0],0),a=A[e+32>>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,o);return 0>a?A[e+32>>>2>>>0]=+(o!=i&&s==n):0<a!=(s==n)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<a?s:o)-n))),A[e+24>>>2>>>0]=t.getDay(),A[e+28>>>2>>>0]=(K(t.getFullYear())?ee:et)[t.getMonth()]+t.getDate()-1|0,A[e>>>2>>>0]=t.getSeconds(),A[e+4>>>2>>>0]=t.getMinutes(),A[e+8>>>2>>>0]=t.getHours(),A[e+12>>>2>>>0]=t.getDate(),A[e+16>>>2>>>0]=t.getMonth(),A[e+20>>>2>>>0]=t.getYear(),e=isNaN(e=t.getTime())?-1:e/1e3,ec(1<=+Math.abs(H=e)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0),e>>>0},l:function(){return -52},m:function(){},t:function(e,t,a,n){a>>>=0,n>>>=0;var o=new Date().getFullYear(),i=new Date(o,0,1),s=new Date(o,6,1);o=i.getTimezoneOffset();var l=s.getTimezoneOffset();T[e>>>0>>>2>>>0]=60*Math.max(o,l),A[t>>>0>>>2>>>0]=+(o!=l),i=(e=e=>e.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1])(i),s=e(s),l<o?(Q(i,E,a,17),Q(s,E,n,17)):(Q(i,E,n,17),Q(s,E,a,17))},d:()=>{N("")},B:function(e,t,a){e>>>=0,t>>>=0,a>>>=0,er.length=0;for(var n;n=E[t++>>>0];){var o=105!=n;o&=112!=n,a+=o&&a%8?4:0,er.push(112==n?T[a>>>2>>>0]:105==n?A[a>>>2>>>0]:S[a>>>3>>>0]),a+=o?8:4}return W[e](...er)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(e){e>>>=0;var t=E.length;if(4294901760<e)return!1;for(var a=1;4>=a;a*=2){var n=t*(1+.2/a);n=Math.min(n,e+100663296);var o=Math;n=Math.max(e,n);e:{o=(o.min.call(o,4294901760,n+(65536-n%65536)%65536)-O.buffer.byteLength+65535)/65536;try{O.grow(o),M();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},C:function(e,t){e>>>=0,t>>>=0;var a=0;return en().forEach((n,o)=>{var i=t+a;for(o=T[e+4*o>>>2>>>0]=i,i=0;i<n.length;++i)_[o++>>>0]=n.charCodeAt(i);_[o>>>0]=0,a+=n.length+1}),0},D:function(e,t){e>>>=0,t>>>=0;var a=en();T[e>>>2>>>0]=a.length;var n=0;return a.forEach(e=>n+=e.length+1),T[t>>>2>>>0]=n,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(e,t,a,n){t>>>=0,a>>>=0,n>>>=0;for(var o=0,i=0;i<a;i++){var s=T[t>>>2>>>0],l=T[t+4>>>2>>>0];t+=8;for(var u=0;u<l;u++){var f=E[s+u>>>0],c=eo[e];0===f||10===f?((1===e?w:v)(J(c,0)),c.length=0):c.push(f)}o+=l}return T[n>>>2>>>0]=o,0},r:el,c:function(e,t,a,n){return el(e>>>0,t>>>0,a>>>0,n>>>0)}},ef=function(){function e(e){var t,a;let n;return O=(t=Object.assign({},t=ef=e.exports),a=e=>t=>e(t)>>>0,t.la=a(t.la),t.qa=a(t.qa),t.ra=(n=t.ra,()=>n()>>>0),ef=t).K,M(),R.unshift(ef.L),0==--F&&(null!==D&&(clearInterval(D),D=null),U&&(e=U,U=null,e())),ef}var a,n,o={a:eu};if(F++,t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(e){v(`Module.instantiateWasm callback failed with error: ${e}`),i(e)}return(a=function(t){e(t.instance)},n=k,"function"!=typeof WebAssembly.instantiateStreaming||j(n)||I(n)||g||"function"!=typeof fetch?$(n,o,a):fetch(n,{credentials:"same-origin"}).then(e=>WebAssembly.instantiateStreaming(e,o).then(a,function(e){return v(`wasm streaming compile failed: ${e}`),v("falling back to ArrayBuffer instantiation"),$(n,o,a)}))).catch(i),{}}();t._OrtInit=(e,a)=>(t._OrtInit=ef.M)(e,a),t._OrtGetLastError=(e,a)=>(t._OrtGetLastError=ef.N)(e,a),t._OrtCreateSessionOptions=(e,a,n,o,i,s,l,u,f,c)=>(t._OrtCreateSessionOptions=ef.O)(e,a,n,o,i,s,l,u,f,c),t._OrtAppendExecutionProvider=(e,a)=>(t._OrtAppendExecutionProvider=ef.P)(e,a),t._OrtAddFreeDimensionOverride=(e,a,n)=>(t._OrtAddFreeDimensionOverride=ef.Q)(e,a,n),t._OrtAddSessionConfigEntry=(e,a,n)=>(t._OrtAddSessionConfigEntry=ef.R)(e,a,n),t._OrtReleaseSessionOptions=e=>(t._OrtReleaseSessionOptions=ef.S)(e),t._OrtCreateSession=(e,a,n)=>(t._OrtCreateSession=ef.T)(e,a,n),t._OrtReleaseSession=e=>(t._OrtReleaseSession=ef.U)(e),t._OrtGetInputOutputCount=(e,a,n)=>(t._OrtGetInputOutputCount=ef.V)(e,a,n),t._OrtGetInputName=(e,a)=>(t._OrtGetInputName=ef.W)(e,a),t._OrtGetOutputName=(e,a)=>(t._OrtGetOutputName=ef.X)(e,a),t._OrtFree=e=>(t._OrtFree=ef.Y)(e),t._OrtCreateTensor=(e,a,n,o,i,s)=>(t._OrtCreateTensor=ef.Z)(e,a,n,o,i,s),t._OrtGetTensorData=(e,a,n,o,i)=>(t._OrtGetTensorData=ef._)(e,a,n,o,i),t._OrtReleaseTensor=e=>(t._OrtReleaseTensor=ef.$)(e),t._OrtCreateRunOptions=(e,a,n,o)=>(t._OrtCreateRunOptions=ef.aa)(e,a,n,o),t._OrtAddRunConfigEntry=(e,a,n)=>(t._OrtAddRunConfigEntry=ef.ba)(e,a,n),t._OrtReleaseRunOptions=e=>(t._OrtReleaseRunOptions=ef.ca)(e),t._OrtCreateBinding=e=>(t._OrtCreateBinding=ef.da)(e),t._OrtBindInput=(e,a,n)=>(t._OrtBindInput=ef.ea)(e,a,n),t._OrtBindOutput=(e,a,n,o)=>(t._OrtBindOutput=ef.fa)(e,a,n,o),t._OrtClearBoundOutputs=e=>(t._OrtClearBoundOutputs=ef.ga)(e),t._OrtReleaseBinding=e=>(t._OrtReleaseBinding=ef.ha)(e),t._OrtRunWithBinding=(e,a,n,o,i)=>(t._OrtRunWithBinding=ef.ia)(e,a,n,o,i),t._OrtRun=(e,a,n,o,i,s,l,u)=>(t._OrtRun=ef.ja)(e,a,n,o,i,s,l,u),t._OrtEndProfiling=e=>(t._OrtEndProfiling=ef.ka)(e),t._malloc=e=>(t._malloc=ef.la)(e),t._free=e=>(t._free=ef.ma)(e);var ec=e=>(ec=ef.oa)(e),ed=e=>(ed=ef.pa)(e),ep=e=>(ep=ef.qa)(e),eh=()=>(eh=ef.ra)();function eg(){if(!(0<F)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;){var e=t.preRun.shift();C.unshift(e)}for(;0<C.length;)C.shift()(t);if(!(0<F||n||(n=!0,t.calledRun=!0,x))){for(;0<R.length;)R.shift()(t);for(o(t);0<P.length;)P.shift()(t)}}}return t.stackSave=()=>eh(),t.stackRestore=e=>ed(e),t.stackAlloc=e=>ep(e),t.UTF8ToString=X,t.stringToUTF8=(e,t,a)=>Q(e,E,t,a),t.lengthBytesUTF8=Z,U=function e(){n||eg(),n||(U=e)},eg(),f}})();"object"==typeof n&&"object"==typeof o?o.exports=i:void 0!==(l=(()=>i).apply(t,[]))&&(e.exports=l)},()=>(o||n((o={exports:{}}).exports,o),o.exports)),ex=eO(()=>{f=u=eS(),d=!1,p=!1,h=!1,g=e=>{if(1===e)return!1;if(typeof SharedArrayBuffer>"u")return"u">typeof self&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;"u">typeof process&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return"u">typeof MessageChannel&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},m=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},y=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",b=async e=>{if(d)return Promise.resolve();if(p)throw Error("multiple calls to 'initializeWebAssembly()' detected.");if(h)throw Error("previous call to 'initializeWebAssembly()' failed.");p=!0;let t=e.initTimeout,a=e.numThreads,n=e.simd,o=g(a),i=n&&m(),s=e.wasmPaths,l="string"==typeof s?s:void 0,b=y(i,o),w="object"==typeof s?s[b]:void 0,v=!1,O=[];if(t>0&&O.push(new Promise(e=>{setTimeout(()=>{v=!0,e()},t)})),O.push(new Promise((e,t)=>{(o?f:u)({locateFile:(e,t)=>e.endsWith(".wasm")?w||(l??t)+b:t+e}).then(t=>{p=!1,d=!0,c=t,e()},e=>{p=!1,h=!0,t(e)})})),await Promise.race(O),v)throw Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},w=()=>{if(d&&c)return c;throw Error("WebAssembly is not initialized yet.")}}),eM=eO(()=>{ex(),v=(e,t)=>{let a=w(),n=a.lengthBytesUTF8(e)+1,o=a._malloc(n);return a.stringToUTF8(e,o,n),t.push(o),o},O=(e,t,a,n)=>{if("object"==typeof e&&null!==e){if(a.has(e))throw Error("Circular reference in options");a.add(e)}Object.entries(e).forEach(([e,o])=>{let i=t?t+e:e;if("object"==typeof o)O(o,i+".",a,n);else if("string"==typeof o||"number"==typeof o)n(i,o.toString());else if("boolean"==typeof o)n(i,o?"1":"0");else throw Error(`Can't handle extra config type: ${typeof o}`)})},_=e=>{let t=w(),a=t.stackSave();try{let a=t.stackAlloc(8);t._OrtGetLastError(a,a+4);let n=t.HEAP32[a/4],o=t.HEAPU32[a/4+1],i=o?t.UTF8ToString(o):"";throw Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${i}`)}finally{t.stackRestore(a)}}}),eC=eO(()=>{ex(),eM(),E=e=>{let t=w(),a=0,n=[],o=e||{};try{if(e?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(o.terminate=!1);let i=0;return e?.tag!==void 0&&(i=v(e.tag,n)),a=t._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,i),0===a&&_("Can't create run options."),e?.extra!==void 0&&O(e.extra,"",new WeakSet,(e,o)=>{let i=v(e,n),s=v(o,n);0!==t._OrtAddRunConfigEntry(a,i,s)&&_(`Can't set a run config entry: ${e} - ${o}.`)}),[a,n]}catch(e){throw 0!==a&&t._OrtReleaseRunOptions(a),n.forEach(e=>t._free(e)),e}}}),eR=eO(()=>{ex(),eM(),A=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw Error(`unsupported graph optimization level: ${e}`)}},T=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw Error(`unsupported execution mode: ${e}`)}},S=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(e=>("string"==typeof e?e:e.name)==="webgpu")&&(e.enableMemPattern=!1)},x=(e,t,a)=>{for(let n of t){let t="string"==typeof n?n:n.name;switch(t){case"webnn":if(t="WEBNN","string"!=typeof n){if(n?.deviceType){let t=v("deviceType",a),o=v(n.deviceType,a);0!==w()._OrtAddSessionConfigEntry(e,t,o)&&_(`Can't set a session config entry: 'deviceType' - ${n.deviceType}.`)}if(n?.numThreads){let t=n.numThreads;("number"!=typeof t||!Number.isInteger(t)||t<0)&&(t=0);let o=v("numThreads",a),i=v(t.toString(),a);0!==w()._OrtAddSessionConfigEntry(e,o,i)&&_(`Can't set a session config entry: 'numThreads' - ${n.numThreads}.`)}if(n?.powerPreference){let t=v("powerPreference",a),o=v(n.powerPreference,a);0!==w()._OrtAddSessionConfigEntry(e,t,o)&&_(`Can't set a session config entry: 'powerPreference' - ${n.powerPreference}.`)}}break;case"webgpu":if(t="JS","string"!=typeof n&&n?.preferredLayout){if("NCHW"!==n.preferredLayout&&"NHWC"!==n.preferredLayout)throw Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${n.preferredLayout}`);let t=v("preferredLayout",a),o=v(n.preferredLayout,a);0!==w()._OrtAddSessionConfigEntry(e,t,o)&&_(`Can't set a session config entry: 'preferredLayout' - ${n.preferredLayout}.`)}break;case"wasm":case"cpu":continue;default:throw Error(`not supported execution provider: ${t}`)}let o=v(t,a);0!==w()._OrtAppendExecutionProvider(e,o)&&_(`Can't append execution provider: ${t}.`)}},M=e=>{let t=w(),a=0,n=[],o=e||{};S(o);try{let e=A(o.graphOptimizationLevel??"all"),i=T(o.executionMode??"sequential"),s="string"==typeof o.logId?v(o.logId,n):0,l=o.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw Error(`log serverity level is not valid: ${l}`);let u=o.logVerbosityLevel??0;if(!Number.isInteger(u)||u<0||u>4)throw Error(`log verbosity level is not valid: ${u}`);let f="string"==typeof o.optimizedModelFilePath?v(o.optimizedModelFilePath,n):0;if(a=t._OrtCreateSessionOptions(e,!!o.enableCpuMemArena,!!o.enableMemPattern,i,!!o.enableProfiling,0,s,l,u,f),0===a&&_("Can't create session options."),o.executionProviders&&x(a,o.executionProviders,n),void 0!==o.enableGraphCapture){if("boolean"!=typeof o.enableGraphCapture)throw Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);let e=v("enableGraphCapture",n),i=v(o.enableGraphCapture.toString(),n);0!==t._OrtAddSessionConfigEntry(a,e,i)&&_(`Can't set a session config entry: 'enableGraphCapture' - ${o.enableGraphCapture}.`)}if(o.freeDimensionOverrides)for(let[e,i]of Object.entries(o.freeDimensionOverrides)){if("string"!=typeof e)throw Error(`free dimension override name must be a string: ${e}`);if("number"!=typeof i||!Number.isInteger(i)||i<0)throw Error(`free dimension override value must be a non-negative integer: ${i}`);let o=v(e,n);0!==t._OrtAddFreeDimensionOverride(a,o,i)&&_(`Can't set a free dimension override: ${e} - ${i}.`)}return void 0!==o.extra&&O(o.extra,"",new WeakSet,(e,o)=>{let i=v(e,n),s=v(o,n);0!==t._OrtAddSessionConfigEntry(a,i,s)&&_(`Can't set a session config entry: ${e} - ${o}.`)}),[a,n]}catch(e){throw 0!==a&&t._OrtReleaseSessionOptions(a),n.forEach(e=>t._free(e)),e}}}),eP=eO(()=>{C=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw Error(`unsupported data type: ${e}`)}},R=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw Error(`unsupported data type: ${e}`)}},P=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],F=e=>{switch(e){case"float16":return"u">typeof Float16Array&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw Error(`unsupported type: ${e}`)}},D=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw Error(`unsupported logging level: ${e}`)}},U=e=>"float32"===e||"float16"===e||"int32"===e||"int64"===e||"uint32"===e||"uint8"===e||"bool"===e,N=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw Error(`unsupported data location: ${e}`)}}}),eF=eO(()=>{k=eA(a(2048)),j=a(3977),I=async e=>{if("string"!=typeof e)return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e);if("u">typeof process&&process.versions&&process.versions.node)try{return new Uint8Array(await (0,j.readFile)(e))}catch(t){if("ERR_FS_FILE_TOO_LARGE"===t.code){let t=k.createReadStream(e),a=[];for await(let e of t)a.push(e);return new Uint8Array(Buffer.concat(a))}throw t}else{let t=await fetch(e);if(!t.ok)throw Error(`failed to load external data file: ${e}`);let a=t.headers.get("Content-Length"),n=a?parseInt(a,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw Error(`failed to load external data file: ${e}, no response body.`);let a=t.body.getReader(),o;try{o=new ArrayBuffer(n)}catch(e){if(e instanceof RangeError){let e=Math.ceil(n/65536);o=new WebAssembly.Memory({initial:e,maximum:e}).buffer}else throw e}let i=0;for(;;){let{done:e,value:t}=await a.read();if(e)break;let n=t.byteLength;new Uint8Array(o,i,n).set(t),i+=n}return new Uint8Array(o,0,n)}}}}),eD=eO(()=>{eC(),eR(),eP(),ex(),eM(),eF(),B=(e,t)=>{0!==w()._OrtInit(e,t)&&_("Can't initialize onnxruntime.")},L=async e=>{B(e.wasm.numThreads,D(e.logLevel))},$=async(e,t)=>{},H=new Map,W=e=>{let t=w(),a=t.stackSave();try{let a=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,a,a+4)&&_("Can't get session input/output count."),[t.HEAP32[a/4],t.HEAP32[a/4+1]]}finally{t.stackRestore(a)}},G=e=>{let t=w(),a=t._malloc(e.byteLength);if(0===a)throw Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,a),[a,e.byteLength]},Y=async(e,t)=>{let a,n,o=w();Array.isArray(e)?[a,n]=e:e.buffer===o.HEAPU8.buffer?[a,n]=[e.byteOffset,e.byteLength]:[a,n]=G(e);let i=0,s=0,l=[],u=[],f=[];try{if([s,l]=M(t),t?.externalData&&o.mountExternalData){let e=[];for(let a of t.externalData){let t="string"==typeof a?a:a.path;e.push(I("string"==typeof a?a:a.data).then(e=>{o.mountExternalData(t,e)}))}await Promise.all(e)}i=await o._OrtCreateSession(a,n,s),0===i&&_("Can't create a session.");let[e,c]=W(i),d=!!t?.enableGraphCapture,p=[],h=[];for(let t=0;t<e;t++){let e=o._OrtGetInputName(i,t);0===e&&_("Can't get an input name."),u.push(e),p.push(o.UTF8ToString(e))}for(let e=0;e<c;e++){let t=o._OrtGetOutputName(i,e);0===t&&_("Can't get an output name."),f.push(t);let a=o.UTF8ToString(t);h.push(a)}return H.set(i,[i,u,f,null,d,!1]),[i,p,h]}catch(e){throw u.forEach(e=>o._OrtFree(e)),f.forEach(e=>o._OrtFree(e)),0!==i&&o._OrtReleaseSession(i),e}finally{o._free(a),0!==s&&o._OrtReleaseSessionOptions(s),l.forEach(e=>o._free(e)),o.unmountExternalData?.()}},z=e=>{let t=w(),a=H.get(e);if(!a)throw Error(`cannot release session. invalid session id: ${e}`);let[n,o,i,s,l]=a;s&&(l&&t._OrtClearBoundOutputs(s.handle),t._OrtReleaseBinding(s.handle)),t.jsepOnReleaseSession?.(e),o.forEach(e=>t._OrtFree(e)),i.forEach(e=>t._OrtFree(e)),t._OrtReleaseSession(n),H.delete(e)},V=(e,t,a,n,o,i=!1)=>{if(!e){t.push(0);return}let s=w(),l=e[0],u=e[1],f=e[3],c,d;if("string"===l&&"gpu-buffer"===f)throw Error("String tensor is not supported on GPU.");if(i&&"gpu-buffer"!==f)throw Error(`External buffer must be provided for input/output index ${o} when enableGraphCapture is true.`);if("gpu-buffer"===f){let t=e[2].gpuBuffer,a=P(C(l));d=u.reduce((e,t)=>e*t,1)*a;let i=s.jsepRegisterBuffer;if(!i)throw Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');c=i(n,o,t,d)}else{let t=e[2];if(Array.isArray(t)){d=4*t.length,c=s._malloc(d),a.push(c);let e=c/4;for(let n=0;n<t.length;n++){if("string"!=typeof t[n])throw TypeError(`tensor data at index ${n} is not a string`);s.HEAPU32[e++]=v(t[n],a)}}else d=t.byteLength,c=s._malloc(d),a.push(c),s.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,d),c)}let p=s.stackSave(),h=s.stackAlloc(4*u.length);try{let e=h/4;u.forEach(t=>s.HEAP32[e++]=t);let a=s._OrtCreateTensor(C(l),c,d,h,u.length,N(f));0===a&&_(`Can't create tensor for input/output. session=${n}, index=${o}.`),t.push(a)}finally{s.stackRestore(p)}},q=async(e,t,a,n,o,i)=>{let s=w(),l=H.get(e);if(!l)throw Error(`cannot run inference. invalid session id: ${e}`);let u=l[0],f=l[1],c=l[2],d=l[3],p=l[4],h=(l[5],t.length),g=n.length,m=0,y=[],b=[],v=[],O=[],A=s.stackSave(),T=s.stackAlloc(4*h),S=s.stackAlloc(4*h),x=s.stackAlloc(4*g),M=s.stackAlloc(4*g);try{let l;[m,y]=E(i);for(let n=0;n<h;n++)V(a[n],b,O,e,t[n],p);for(let t=0;t<g;t++)V(o[t],v,O,e,h+n[t],p);let w=T/4,A=S/4,C=x/4,D=M/4;for(let e=0;e<h;e++)s.HEAPU32[w++]=b[e],s.HEAPU32[A++]=f[t[e]];for(let e=0;e<g;e++)s.HEAPU32[C++]=v[e],s.HEAPU32[D++]=c[n[e]];s.jsepOnRunStart?.(u),l=await s._OrtRun(u,S,T,h,M,g,x,m),0!==l&&_("failed to call OrtRun().");let N=[];for(let e=0;e<g;e++){let t=s.HEAPU32[x/4+e];if(t===v[e]){N.push(o[e]);continue}let a=s.stackSave(),i=s.stackAlloc(16),l=!1,u,f=0;try{0!==s._OrtGetTensorData(t,i,i+4,i+8,i+12)&&_(`Can't access output tensor data on index ${e}.`);let a=i/4,o=s.HEAPU32[a++];f=s.HEAPU32[a++];let c=s.HEAPU32[a++],p=s.HEAPU32[a++],h=[];for(let e=0;e<p;e++)h.push(s.HEAPU32[c/4+e]);s._OrtFree(c);let g=h.reduce((e,t)=>e*t,1);u=R(o);let m=d?.outputPreferredLocations[n[e]];if("string"===u){if("gpu-buffer"===m)throw Error("String tensor is not supported on GPU.");let e=[],t=f/4;for(let a=0;a<g;a++){let n=s.HEAPU32[t++],o=a===g-1?void 0:s.HEAPU32[t]-n;e.push(s.UTF8ToString(n,o))}N.push([u,h,e,"cpu"])}else if("gpu-buffer"===m&&g>0){let e=s.jsepGetBuffer;if(!e)throw Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let a=e(f),n=P(o);if(void 0===n||!U(u))throw Error(`Unsupported data type: ${u}`);l=!0,N.push([u,h,{gpuBuffer:a,download:s.jsepCreateDownloader(a,g*n,u),dispose:()=>{s._OrtReleaseTensor(t)}},"gpu-buffer"])}else{let e=new(F(u))(g);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(s.HEAPU8.subarray(f,f+e.byteLength)),N.push([u,h,e,"cpu"])}}finally{s.stackRestore(a),"string"===u&&f&&s._free(f),l||s._OrtReleaseTensor(t)}}return d&&!p&&(s._OrtClearBoundOutputs(d.handle),H.set(e,[u,f,c,d,p,!1])),N}finally{s.stackRestore(A),b.forEach(e=>s._OrtReleaseTensor(e)),v.forEach(e=>s._OrtReleaseTensor(e)),O.forEach(e=>s._free(e)),0!==m&&s._OrtReleaseRunOptions(m),y.forEach(e=>s._free(e))}},J=e=>{let t=w(),a=H.get(e);if(!a)throw Error("invalid session id");let n=a[0],o=t._OrtEndProfiling(n);0===o&&_("Can't get an profile file name."),t._OrtFree(o)}}),eU=eO(()=>{X=a(8372),eD(),ex(),Z=!1,Q=!1,K=!1,"u">typeof document&&document?.currentScript?.src,ee=async()=>{if(!Q){if(Z)throw Error("multiple calls to 'initWasm()' detected.");if(K)throw Error("previous call to 'initWasm()' failed.");Z=!0;try{await b(X.env.wasm),await L(X.env),Q=!0}catch(e){throw K=!0,e}finally{Z=!1}}},et=async e=>{await $(X.env,e)},er=async e=>G(e),ea=async(e,t)=>Y(e,t),en=async e=>{z(e)},eo=async(e,t,a,n,o,i)=>q(e,t,a,n,o,i),ei=async e=>{J(e)}}),eN=eO(()=>{es=a(8372),eU(),eP(),eF(),el=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw Error(`invalid data location: ${e.location} for ${t()}`)}},eu=e=>{switch(e[3]){case"cpu":return new es.Tensor(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!U(t))throw Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:a,download:n,dispose:o}=e[2];return es.Tensor.fromGpuBuffer(a,{dataType:t,dims:e[1],download:n,dispose:o})}default:throw Error(`invalid data location: ${e[3]}`)}},ef=class{async fetchModelAndCopyToWasmMemory(e){return er(await I(e))}async loadModel(e,t){let a;(0,es.TRACE_FUNC_BEGIN)(),"string"==typeof e?"u">typeof process&&process.versions&&process.versions.node?a=await I(e):a=await this.fetchModelAndCopyToWasmMemory(e):a=e,[this.sessionId,this.inputNames,this.outputNames]=await ea(a,t),(0,es.TRACE_FUNC_END)()}async dispose(){return en(this.sessionId)}async run(e,t,a){(0,es.TRACE_FUNC_BEGIN)();let n=[],o=[];Object.entries(e).forEach(e=>{let t=e[0],a=e[1],i=this.inputNames.indexOf(t);if(-1===i)throw Error(`invalid input '${t}'`);n.push(a),o.push(i)});let i=[],s=[];Object.entries(t).forEach(e=>{let t=e[0],a=e[1],n=this.outputNames.indexOf(t);if(-1===n)throw Error(`invalid output '${t}'`);i.push(a),s.push(n)});let l=n.map((e,t)=>el(e,()=>`input "${this.inputNames[o[t]]}"`)),u=i.map((e,t)=>e?el(e,()=>`output "${this.outputNames[s[t]]}"`):null),f=await eo(this.sessionId,o,l,s,u,a),c={};for(let e=0;e<f.length;e++)c[this.outputNames[s[e]]]=i[e]??eu(f[e]);return(0,es.TRACE_FUNC_END)(),c}startProfiling(){}endProfiling(){ei(this.sessionId)}}}),ek=eO(()=>{ec=a(612),ed=a(8372),eU(),eN(),ep=()=>{if(("number"!=typeof ed.env.wasm.initTimeout||ed.env.wasm.initTimeout<0)&&(ed.env.wasm.initTimeout=0),"boolean"!=typeof ed.env.wasm.simd&&(ed.env.wasm.simd=!0),"boolean"!=typeof ed.env.wasm.proxy&&(ed.env.wasm.proxy=!1),"boolean"!=typeof ed.env.wasm.trace&&(ed.env.wasm.trace=!1),"number"!=typeof ed.env.wasm.numThreads||!Number.isInteger(ed.env.wasm.numThreads)||ed.env.wasm.numThreads<=0){("u">typeof self&&!self.crossOriginIsolated||"u">typeof process&&process.versions&&process.versions.node)&&(ed.env.wasm.numThreads=1);let e=typeof navigator>"u"?(0,ec.cpus)().length:navigator.hardwareConcurrency;ed.env.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},eh=class{async init(e){ep(),await ee(),await et(e)}async createInferenceSessionHandler(e,t){let a=new ef;return await a.loadModel(e,t),Promise.resolve(a)}}}),ej={};e_(ej,{wasmBackend:()=>eI});var eI,eB=eO(()=>{ek(),eI=new eh}),eL={};e_(eL,{default:()=>eW}),e.exports=eT(eL),i=a(8372),s=e.exports,eE(eL,i,"default"),s&&eE(s,i,"default");var e$=eA(a(8372)),eH=a(8372),eW=e$;{let e=(eB(),eT(ej)).wasmBackend;(0,eH.registerBackend)("cpu",e,10),(0,eH.registerBackend)("wasm",e,10)}Object.defineProperty(eH.env.versions,"web",{value:"1.18.0",enumerable:!0})},4879:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f,metadata:()=>u});var n=a(9510),o=a(7366),i=a.n(o),s=a(8570);let l=(0,s.createProxy)(String.raw`C:\Users\jjw74\Desktop\Code\AIMC\hackerthon\frontend\context\AppContext.tsx#AppProvider`);(0,s.createProxy)(String.raw`C:\Users\jjw74\Desktop\Code\AIMC\hackerthon\frontend\context\AppContext.tsx#useAppContext`),a(7272);let u={title:"AI CUPID",description:"AI-powered Cupid MC"};function f({children:e}){return n.jsx("html",{lang:"ko",children:n.jsx("body",{className:`${i().className} antialiased bg-white dark:bg-dark-bg text-[#1A1A1A] dark:text-[#F0F0F0]`,children:n.jsx(l,{children:e})})})}},8863:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let n=(0,a(8570).createProxy)(String.raw`C:\Users\jjw74\Desktop\Code\AIMC\hackerthon\frontend\app\session\page.tsx#default`)},7272:()=>{},5449:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveBackendAndExecutionProviders=t.registerBackend=void 0;let a=new Map,n=[];t.registerBackend=(e,t,o)=>{if(t&&"function"==typeof t.init&&"function"==typeof t.createInferenceSessionHandler){let i=a.get(e);if(void 0===i)a.set(e,{backend:t,priority:o});else if(i.priority>o)return;else if(i.priority===o&&i.backend!==t)throw Error(`cannot register backend "${e}" using priority ${o}`);if(o>=0){let t=n.indexOf(e);-1!==t&&n.splice(t,1);for(let t=0;t<n.length;t++)if(a.get(n[t]).priority<=o){n.splice(t,0,e);return}n.push(e)}return}throw TypeError("not a valid backend")};let o=async e=>{let t=a.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let a=!!t.initPromise;try{return a||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(e){return a||(t.error=`${e}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},i=async e=>{let t;let a=e.executionProviders||[],i=a.map(e=>"string"==typeof e?e:e.name),s=0===i.length?n:i,l=[],u=new Set;for(let e of s){let a=await o(e);"string"==typeof a?l.push({name:e,err:a}):(t||(t=a),t===a&&u.add(e))}if(!t)throw Error(`no available backend found. ERR: ${l.map(e=>`[${e.name}] ${e.err}`).join(", ")}`);for(let{name:e,err:t}of l)i.includes(e)&&console.warn(`removing requested execution provider "${e}" from session options because it is not available: ${t}`);let f=a.filter(e=>u.has("string"==typeof e?e:e.name));return[t,new Proxy(e,{get:(e,t)=>"executionProviders"===t?f:Reflect.get(e,t)})]};t.resolveBackendAndExecutionProviders=i},4925:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerBackend=void 0;var n=a(5449);Object.defineProperty(t,"registerBackend",{enumerable:!0,get:function(){return n.registerBackend}})},6989:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;let n=a(6077),o="warning";t.env={wasm:{},webgl:{},webgpu:{},versions:{common:n.version},set logLevel(value){if(void 0===value)return;if("string"!=typeof value||-1===["verbose","info","warning","error","fatal"].indexOf(value))throw Error(`Unsupported logging level: ${value}`);o=value},get logLevel(){return o}},Object.defineProperty(t.env,"logLevel",{enumerable:!0})},4481:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;let n=a(6989);t.env=n.env},8372:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var o=Object.getOwnPropertyDescriptor(t,a);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,o)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),o=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),o(a(4925),t),o(a(4481),t),o(a(1394),t),o(a(207),t),o(a(2554),t),o(a(2813),t),o(a(7883),t),o(a(5017),t),o(a(7837),t),o(a(2287),t)},3507:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;let n=a(5449),o=a(207),i=a(7883);class s{constructor(e){this.handler=e}async run(e,t,a){(0,i.TRACE_FUNC_BEGIN)();let n={},s={};if("object"!=typeof e||null===e||e instanceof o.Tensor||Array.isArray(e))throw TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if("object"==typeof t){if(null===t)throw TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof o.Tensor)throw TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw TypeError("'fetches' cannot be an empty array.");for(let e of(l=!1,t)){if("string"!=typeof e)throw TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw RangeError(`'fetches' contains invalid output name: ${e}.`);n[e]=null}if("object"==typeof a&&null!==a)s=a;else if(void 0!==a)throw TypeError("'options' must be an object.")}else{let e=!1,i=Object.getOwnPropertyNames(t);for(let a of this.outputNames)if(-1!==i.indexOf(a)){let i=t[a];(null===i||i instanceof o.Tensor)&&(e=!0,l=!1,n[a]=i)}if(e){if("object"==typeof a&&null!==a)s=a;else if(void 0!==a)throw TypeError("'options' must be an object.")}else s=t}}else if(void 0!==t)throw TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let t of this.inputNames)if(void 0===e[t])throw Error(`input '${t}' is missing in 'feeds'.`);if(l)for(let e of this.outputNames)n[e]=null;let u=await this.handler.run(e,n,s),f={};for(let e in u)if(Object.hasOwnProperty.call(u,e)){let t=u[e];t instanceof o.Tensor?f[e]=t:f[e]=new o.Tensor(t.type,t.data,t.dims)}return(0,i.TRACE_FUNC_END)(),f}async release(){return this.handler.dispose()}static async create(e,t,a,o){let l;(0,i.TRACE_FUNC_BEGIN)();let u={};if("string"==typeof e){if(l=e,"object"==typeof t&&null!==t)u=t;else if(void 0!==t)throw TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(l=e,"object"==typeof t&&null!==t)u=t;else if(void 0!==t)throw TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer){let n=0,i=e.byteLength;if("object"==typeof t&&null!==t)u=t;else if("number"==typeof t){if(!Number.isSafeInteger(n=t))throw RangeError("'byteOffset' must be an integer.");if(n<0||n>=e.byteLength)throw RangeError(`'byteOffset' is out of range [0, ${e.byteLength}).`);if(i=e.byteLength-n,"number"==typeof a){if(!Number.isSafeInteger(i=a))throw RangeError("'byteLength' must be an integer.");if(i<=0||n+i>e.byteLength)throw RangeError(`'byteLength' is out of range (0, ${e.byteLength-n}].`);if("object"==typeof o&&null!==o)u=o;else if(void 0!==o)throw TypeError("'options' must be an object.")}else if(void 0!==a)throw TypeError("'byteLength' must be a number.")}else if(void 0!==t)throw TypeError("'options' must be an object.");l=new Uint8Array(e,n,i)}else throw TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[f,c]=await (0,n.resolveBackendAndExecutionProviders)(u),d=await f.createInferenceSessionHandler(l,c);return(0,i.TRACE_FUNC_END)(),new s(d)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}t.InferenceSession=s},1394:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InferenceSession=void 0;let n=a(3507);t.InferenceSession=n.InferenceSession},5017:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6170:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorToImageData=t.tensorToDataURL=void 0,t.tensorToDataURL=(e,t)=>{let a="undefined"!=typeof document?document.createElement("canvas"):new OffscreenCanvas(1,1);a.width=e.dims[3],a.height=e.dims[2];let n=a.getContext("2d");if(null!=n){let o,i,s,l;t?.tensorLayout!==void 0&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[3]):(o=e.dims[3],i=e.dims[2]);let u=t?.format!==void 0?t.format:"RGB",f=t?.norm;void 0===f||void 0===f.mean?s=[255,255,255,255]:"number"==typeof f.mean?s=[f.mean,f.mean,f.mean,f.mean]:(s=[f.mean[0],f.mean[1],f.mean[2],0],void 0!==f.mean[3]&&(s[3]=f.mean[3])),void 0===f||void 0===f.bias?l=[0,0,0,0]:"number"==typeof f.bias?l=[f.bias,f.bias,f.bias,f.bias]:(l=[f.bias[0],f.bias[1],f.bias[2],0],void 0!==f.bias[3]&&(l[3]=f.bias[3]));let c=i*o,d=0,p=c,h=2*c,g=-1;"RGBA"===u?(d=0,p=c,h=2*c,g=3*c):"RGB"===u?(d=0,p=c,h=2*c):"RBG"===u&&(d=0,h=c,p=2*c);for(let t=0;t<i;t++)for(let a=0;a<o;a++){let o=(e.data[d++]-l[0])*s[0],i=(e.data[p++]-l[1])*s[1],u=(e.data[h++]-l[2])*s[2],f=-1===g?255:(e.data[g++]-l[3])*s[3];n.fillStyle="rgba("+o+","+i+","+u+","+f+")",n.fillRect(a,t,1,1)}if("toDataURL"in a)return a.toDataURL();throw Error("toDataURL is not supported")}throw Error("Can not access image data")},t.tensorToImageData=(e,t)=>{let a;let n="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");if(null!=n){let o,i,s,l,u;t?.tensorLayout!==void 0&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[1],s=e.dims[3]):(o=e.dims[3],i=e.dims[2],s=e.dims[1]);let f=void 0!==t&&void 0!==t.format?t.format:"RGB",c=t?.norm;void 0===c||void 0===c.mean?l=[255,255,255,255]:"number"==typeof c.mean?l=[c.mean,c.mean,c.mean,c.mean]:(l=[c.mean[0],c.mean[1],c.mean[2],255],void 0!==c.mean[3]&&(l[3]=c.mean[3])),void 0===c||void 0===c.bias?u=[0,0,0,0]:"number"==typeof c.bias?u=[c.bias,c.bias,c.bias,c.bias]:(u=[c.bias[0],c.bias[1],c.bias[2],0],void 0!==c.bias[3]&&(u[3]=c.bias[3]));let d=i*o;if(void 0!==t&&(void 0!==t.format&&4===s&&"RGBA"!==t.format||3===s&&"RGB"!==t.format&&"BGR"!==t.format))throw Error("Tensor format doesn't match input tensor dims");let p=0,h=1,g=2,m=3,y=0,b=d,w=2*d,v=-1;"RGBA"===f?(y=0,b=d,w=2*d,v=3*d):"RGB"===f?(y=0,b=d,w=2*d):"RBG"===f&&(y=0,w=d,b=2*d),a=n.createImageData(o,i);for(let t=0;t<i*o;p+=4,h+=4,g+=4,m+=4,t++)a.data[p]=(e.data[y++]-u[0])*l[0],a.data[h]=(e.data[b++]-u[1])*l[1],a.data[g]=(e.data[w++]-u[2])*l[2],a.data[m]=-1===v?255:(e.data[v++]-u[3])*l[3]}else throw Error("Can not access image data");return a}},2554:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6467:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorFromPinnedBuffer=t.tensorFromGpuBuffer=t.tensorFromTexture=t.tensorFromImage=t.bufferToTensor=void 0;let n=a(9778);t.bufferToTensor=(e,t)=>{let a,o;if(void 0===e)throw Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw Error("NHWC Tensor layout is not supported yet");let{height:i,width:s}=t,l=t.norm??{mean:255,bias:0};a="number"==typeof l.mean?[l.mean,l.mean,l.mean,l.mean]:[l.mean[0],l.mean[1],l.mean[2],l.mean[3]??255],o="number"==typeof l.bias?[l.bias,l.bias,l.bias,l.bias]:[l.bias[0],l.bias[1],l.bias[2],l.bias[3]??0];let u=void 0!==t.format?t.format:"RGBA",f=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",c=i*s,d=new Float32Array("RGBA"===f?4*c:3*c),p=4,h=0,g=1,m=2,y=3,b=0,w=c,v=2*c,O=-1;"RGB"===u&&(p=3,h=0,g=1,m=2,y=-1),"RGBA"===f?O=3*c:"RBG"===f?(b=0,v=c,w=2*c):"BGR"===f&&(v=0,w=c,b=2*c);for(let t=0;t<c;t++,h+=p,m+=p,g+=p,y+=p)d[b++]=(e[h]+o[0])/a[0],d[w++]=(e[g]+o[1])/a[1],d[v++]=(e[m]+o[2])/a[2],-1!==O&&-1!==y&&(d[O++]=(e[y]+o[3])/a[3]);return"RGBA"===f?new n.Tensor("float32",d,[1,4,i,s]):new n.Tensor("float32",d,[1,3,i,s])};let o=async(e,a)=>{let n;let o="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,i="undefined"!=typeof ImageData&&e instanceof ImageData,s="undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap,l="string"==typeof e,u=a??{},f=()=>{if("undefined"!=typeof document)return document.createElement("canvas");if("undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(1,1);throw Error("Canvas is not supported")},c=e=>e instanceof HTMLCanvasElement?e.getContext("2d"):e instanceof OffscreenCanvas?e.getContext("2d"):null;if(o){let t=f();t.width=e.width,t.height=e.height;let o=c(t);if(null!=o){let t=e.height,i=e.width;if(void 0!==a&&void 0!==a.resizedHeight&&void 0!==a.resizedWidth&&(t=a.resizedHeight,i=a.resizedWidth),void 0!==a){if(u=a,void 0!==a.tensorFormat)throw Error("Image input config format must be RGBA for HTMLImageElement");u.tensorFormat="RGBA",u.height=t,u.width=i}else u.tensorFormat="RGBA",u.height=t,u.width=i;o.drawImage(e,0,0),n=o.getImageData(0,0,i,t).data}else throw Error("Can not access image data")}else if(i){let t,o;if(void 0!==a&&void 0!==a.resizedWidth&&void 0!==a.resizedHeight?(t=a.resizedHeight,o=a.resizedWidth):(t=e.height,o=e.width),void 0!==a&&(u=a),u.format="RGBA",u.height=t,u.width=o,void 0!==a){let a=f();a.width=o,a.height=t;let i=c(a);if(null!=i)i.putImageData(e,0,0),n=i.getImageData(0,0,o,t).data;else throw Error("Can not access image data")}else n=e.data}else if(s){if(void 0===a)throw Error("Please provide image config with format for Imagebitmap");let o=f();o.width=e.width,o.height=e.height;let i=c(o);if(null!=i){let a=e.height,o=e.width;return i.drawImage(e,0,0,o,a),n=i.getImageData(0,0,o,a).data,u.height=a,u.width=o,(0,t.bufferToTensor)(n,u)}throw Error("Can not access image data")}else if(l)return new Promise((a,n)=>{let o=f(),i=c(o);if(!e||!i)return n();let s=new Image;s.crossOrigin="Anonymous",s.src=e,s.onload=()=>{o.width=s.width,o.height=s.height,i.drawImage(s,0,0,o.width,o.height);let e=i.getImageData(0,0,o.width,o.height);u.height=o.height,u.width=o.width,a((0,t.bufferToTensor)(e.data,u))}});else throw Error("Input data provided is not supported - aborted tensor creation");if(void 0!==n)return(0,t.bufferToTensor)(n,u);throw Error("Input data provided is not supported - aborted tensor creation")};t.tensorFromImage=o,t.tensorFromTexture=(e,t)=>{let{width:a,height:o,download:i,dispose:s}=t;return new n.Tensor({location:"texture",type:"float32",texture:e,dims:[1,o,a,4],download:i,dispose:s})},t.tensorFromGpuBuffer=(e,t)=>{let{dataType:a,dims:o,download:i,dispose:s}=t;return new n.Tensor({location:"gpu-buffer",type:a??"float32",gpuBuffer:e,dims:o,download:i,dispose:s})},t.tensorFromPinnedBuffer=(e,t,a)=>new n.Tensor({location:"cpu-pinned",type:e,data:t,dims:a??[t.length]})},2813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},45:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkTypedArray=t.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=t.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=void 0,t.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),t.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let a=!1;t.checkTypedArray=()=>{if(!a){a=!0;let e="undefined"!=typeof BigInt64Array&&BigInt64Array.from,n="undefined"!=typeof BigUint64Array&&BigUint64Array.from,o="undefined"!=typeof Float16Array&&Float16Array.from;e&&(t.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),t.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64")),n&&(t.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),t.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64")),o?(t.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("float16",Float16Array),t.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(Float16Array,"float16")):t.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("float16",Uint16Array)}}},9778:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;let n=a(6170),o=a(6467),i=a(45),s=a(8885);class l{constructor(e,t,a){let n,o;if((0,i.checkTypedArray)(),"object"==typeof e&&"location"in e)switch(this.dataLocation=e.location,n=e.type,o=e.dims,e.location){case"cpu-pinned":{let t=i.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(n);if(!t)throw TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof t))throw TypeError(`buffer should be of type ${t.name}`);this.cpuData=e.data;break}case"texture":if("float32"!==n)throw TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==n&&"float16"!==n&&"int32"!==n&&"int64"!==n&&"uint32"!==n&&"uint8"!==n&&"bool"!==n)throw TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;default:throw Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let s,l;if("string"==typeof e){if(n=e,l=a,"string"===e){if(!Array.isArray(t))throw TypeError("A string tensor's data must be a string array.");s=t}else{let a=i.NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(void 0===a)throw TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if("float16"===e&&a===Uint16Array)throw TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");s="uint64"===e||"int64"===e?a.from(t,BigInt):a.from(t)}else if(t instanceof a)s=t;else throw TypeError(`A ${n} tensor's data must be type of ${a}`)}}else if(l=t,Array.isArray(e)){if(0===e.length)throw TypeError("Tensor type cannot be inferred from an empty array.");let t=typeof e[0];if("string"===t)n="string",s=e;else if("boolean"===t)n="bool",s=Uint8Array.from(e);else throw TypeError(`Invalid element type of data array: ${t}.`)}else{let t=i.NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(void 0===t)throw TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=t,s=e}if(void 0===l)l=[s.length];else if(!Array.isArray(l))throw TypeError("A tensor's dims must be a number array");o=l,this.cpuData=s,this.dataLocation="cpu"}let l=(0,s.calculateSize)(o);if(this.cpuData&&l!==this.cpuData.length)throw Error(`Tensor's size(${l}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=o,this.size=l}static async fromImage(e,t){return(0,o.tensorFromImage)(e,t)}static fromTexture(e,t){return(0,o.tensorFromTexture)(e,t)}static fromGpuBuffer(e,t){return(0,o.tensorFromGpuBuffer)(e,t)}static fromPinnedBuffer(e,t,a){return(0,o.tensorFromPinnedBuffer)(e,t,a)}toDataURL(e){return(0,n.tensorToDataURL)(this,e)}toImageData(e){return(0,n.tensorToImageData)(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":if(!this.downloader)throw Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}default:throw Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw Error("Cannot reshape a tensor that owns GPU resource.");return(0,s.tensorReshape)(this,e)}}t.Tensor=l},8885:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tensorReshape=t.calculateSize=void 0;let n=a(9778);t.calculateSize=e=>{let t=1;for(let a=0;a<e.length;a++){let n=e[a];if("number"!=typeof n||!Number.isSafeInteger(n))throw TypeError(`dims[${a}] must be an integer, got: ${n}`);if(n<0)throw RangeError(`dims[${a}] must be a non-negative integer, got: ${n}`);t*=n}return t},t.tensorReshape=(e,t)=>{switch(e.location){case"cpu":return new n.Tensor(e.type,e.data,t);case"cpu-pinned":return new n.Tensor({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new n.Tensor({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new n.Tensor({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw Error(`tensorReshape: tensor location ${e.location} is not supported`)}}},207:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;let n=a(9778);t.Tensor=n.Tensor},7883:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRACE_FUNC_END=t.TRACE_FUNC_BEGIN=t.TRACE=void 0;let n=a(6989);t.TRACE=(e,t)=>{(void 0===n.env.trace?!n.env.wasm.trace:!n.env.trace)||console.timeStamp(`${e}::ORT::${t}`)};let o=(e,a)=>{let n=Error().stack?.split(/\r\n|\r|\n/g)||[],o=!1;for(let i=0;i<n.length;i++){if(o&&!n[i].includes("TRACE_FUNC")){let o=`FUNC_${e}::${n[i].trim().split(" ")[1]}`;a&&(o+=`::${a}`),(0,t.TRACE)("CPU",o);return}n[i].includes("TRACE_FUNC")&&(o=!0)}};t.TRACE_FUNC_BEGIN=e=>{(void 0===n.env.trace?!n.env.wasm.trace:!n.env.trace)||o("BEGIN",e)},t.TRACE_FUNC_END=e=>{(void 0===n.env.trace?!n.env.wasm.trace:!n.env.trace)||o("END",e)}},2387:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrainingSession=void 0;let n=a(5449),o=a(207);class i{constructor(e,t,a){this.handler=e,this.hasOptimizerModel=t,this.hasEvalModel=a}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw Error("This training session has no evalModel loaded.")}static async create(e,t){let a=e.evalModel||"",o=e.optimizerModel||"",[s,l]=await (0,n.resolveBackendAndExecutionProviders)(t||{});if(s.createTrainingSessionHandler)return new i(await s.createTrainingSessionHandler(e.checkpointState,e.trainModel,a,o,l),!!e.optimizerModel,!!e.evalModel);throw Error("Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.")}typeNarrowingForRunStep(e,t,a,n,i){let s={},l={};if("object"!=typeof a||null===a||a instanceof o.Tensor||Array.isArray(a))throw TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if("object"==typeof n){if(null===n)throw TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof o.Tensor)throw TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(0===n.length)throw TypeError("'fetches' cannot be an empty array.");for(let e of(u=!1,n)){if("string"!=typeof e)throw TypeError("'fetches' must be a string array or an object.");if(-1===t.indexOf(e))throw RangeError(`'fetches' contains invalid output name: ${e}.`);s[e]=null}if("object"==typeof i&&null!==i)l=i;else if(void 0!==i)throw TypeError("'options' must be an object.")}else{let e=!1,a=Object.getOwnPropertyNames(n);for(let i of t)if(-1!==a.indexOf(i)){let t=n[i];(null===t||t instanceof o.Tensor)&&(e=!0,u=!1,s[i]=t)}if(e){if("object"==typeof i&&null!==i)l=i;else if(void 0!==i)throw TypeError("'options' must be an object.")}else l=n}}else if(void 0!==n)throw TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let t of e)if(void 0===a[t])throw Error(`input '${t}' is missing in 'feeds'.`);if(u)for(let e of t)s[e]=null;return[s,l]}convertHandlerReturnTypeToMapOfTensors(e){let t={};for(let a in e)if(Object.hasOwnProperty.call(e,a)){let n=e[a];n instanceof o.Tensor?t[a]=n:t[a]=new o.Tensor(n.type,n.data,n.dims)}return t}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,t,a){let[n,o]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,t,a),i=await this.handler.runTrainStep(e,n,o);return this.convertHandlerReturnTypeToMapOfTensors(i)}async runOptimizerStep(e){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(e||{});else throw Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(e,t,a){if(this.hasEvalModel){let[n,o]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,t,a),i=await this.handler.runEvalStep(e,n,o);return this.convertHandlerReturnTypeToMapOfTensors(i)}throw Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,t=!0){let a=await this.getParametersSize(t);if(e.length!==4*a)throw Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,t)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}t.TrainingSession=i},2287:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrainingSession=void 0;let n=a(2387);t.TrainingSession=n.TrainingSession},6077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="1.18.0"},7100:(e,t)=>{"use strict";var a,n,o,i,s,l,u,f,c,d,p,h,g,m,y,b,w,v,O,_,E,A,T,S,x,M,C,R,P,F,D,U,N,k,j=Object.defineProperty,I=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyNames,L=Object.prototype.hasOwnProperty,$=(e,t)=>()=>(e&&(t=e(e=0)),t),H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),W=(e,t)=>{for(var a in t)j(e,a,{get:t[a],enumerable:!0})},G=(e,t,a,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of B(t))L.call(e,o)||o===a||j(e,o,{get:()=>t[o],enumerable:!(n=I(t,o))||n.enumerable});return e},Y=e=>G(j({},"__esModule",{value:!0}),e),z=$(()=>{n=new Map,o=[],i=(e,t,a)=>{if(t&&"function"==typeof t.init&&"function"==typeof t.createInferenceSessionHandler){let i=n.get(e);if(void 0===i)n.set(e,{backend:t,priority:a});else{if(i.priority>a)return;if(i.priority===a&&i.backend!==t)throw Error(`cannot register backend "${e}" using priority ${a}`)}if(a>=0){let t=o.indexOf(e);-1!==t&&o.splice(t,1);for(let t=0;t<o.length;t++)if(n.get(o[t]).priority<=a){o.splice(t,0,e);return}o.push(e)}return}throw TypeError("not a valid backend")},s=async e=>{let t=n.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let a=!!t.initPromise;try{return a||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(e){return a||(t.error=`${e}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},l=async e=>{let t=e.executionProviders||[],a=t.map(e=>"string"==typeof e?e:e.name),n=0===a.length?o:a,i,l=[],u=new Set;for(let e of n){let t=await s(e);"string"==typeof t?l.push({name:e,err:t}):(i||(i=t),i===t&&u.add(e))}if(!i)throw Error(`no available backend found. ERR: ${l.map(e=>`[${e.name}] ${e.err}`).join(", ")}`);for(let{name:e,err:t}of l)a.includes(e)&&console.warn(`removing requested execution provider "${e}" from session options because it is not available: ${t}`);let f=t.filter(e=>u.has("string"==typeof e?e:e.name));return[i,new Proxy(e,{get:(e,t)=>"executionProviders"===t?f:Reflect.get(e,t)})]}}),V=$(()=>{z()}),q=$(()=>{u="1.18.0"}),J=$(()=>{q(),f="warning",Object.defineProperty(c={wasm:{},webgl:{},webgpu:{},versions:{common:u},set logLevel(r){if(void 0!==r){if("string"!=typeof r||-1===["verbose","info","warning","error","fatal"].indexOf(r))throw Error(`Unsupported logging level: ${r}`);f=r}},get logLevel(){return f}},"logLevel",{enumerable:!0})}),X=$(()=>{J(),d=c}),Z=$(()=>{p=(e,t)=>{let a="u">typeof document?document.createElement("canvas"):new OffscreenCanvas(1,1);a.width=e.dims[3],a.height=e.dims[2];let n=a.getContext("2d");if(null!=n){let o,i;t?.tensorLayout!==void 0&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[3]):(o=e.dims[3],i=e.dims[2]);let s=t?.format!==void 0?t.format:"RGB",l=t?.norm,u,f;void 0===l||void 0===l.mean?u=[255,255,255,255]:"number"==typeof l.mean?u=[l.mean,l.mean,l.mean,l.mean]:(u=[l.mean[0],l.mean[1],l.mean[2],0],void 0!==l.mean[3]&&(u[3]=l.mean[3])),void 0===l||void 0===l.bias?f=[0,0,0,0]:"number"==typeof l.bias?f=[l.bias,l.bias,l.bias,l.bias]:(f=[l.bias[0],l.bias[1],l.bias[2],0],void 0!==l.bias[3]&&(f[3]=l.bias[3]));let c=i*o,d=0,p=c,h=2*c,g=-1;"RGBA"===s?(d=0,p=c,h=2*c,g=3*c):"RGB"===s?(d=0,p=c,h=2*c):"RBG"===s&&(d=0,h=c,p=2*c);for(let t=0;t<i;t++)for(let a=0;a<o;a++){let o=(e.data[d++]-f[0])*u[0],i=(e.data[p++]-f[1])*u[1],s=(e.data[h++]-f[2])*u[2],l=-1===g?255:(e.data[g++]-f[3])*u[3];n.fillStyle="rgba("+o+","+i+","+s+","+l+")",n.fillRect(a,t,1,1)}if("toDataURL"in a)return a.toDataURL();throw Error("toDataURL is not supported")}throw Error("Can not access image data")},h=(e,t)=>{let a="u">typeof document?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(null!=a){let o,i,s;t?.tensorLayout!==void 0&&"NHWC"===t.tensorLayout?(o=e.dims[2],i=e.dims[1],s=e.dims[3]):(o=e.dims[3],i=e.dims[2],s=e.dims[1]);let l=void 0!==t&&void 0!==t.format?t.format:"RGB",u=t?.norm,f,c;void 0===u||void 0===u.mean?f=[255,255,255,255]:"number"==typeof u.mean?f=[u.mean,u.mean,u.mean,u.mean]:(f=[u.mean[0],u.mean[1],u.mean[2],255],void 0!==u.mean[3]&&(f[3]=u.mean[3])),void 0===u||void 0===u.bias?c=[0,0,0,0]:"number"==typeof u.bias?c=[u.bias,u.bias,u.bias,u.bias]:(c=[u.bias[0],u.bias[1],u.bias[2],0],void 0!==u.bias[3]&&(c[3]=u.bias[3]));let d=i*o;if(void 0!==t&&(void 0!==t.format&&4===s&&"RGBA"!==t.format||3===s&&"RGB"!==t.format&&"BGR"!==t.format))throw Error("Tensor format doesn't match input tensor dims");let p=0,h=1,g=2,m=3,y=0,b=d,w=2*d,v=-1;"RGBA"===l?(y=0,b=d,w=2*d,v=3*d):"RGB"===l?(y=0,b=d,w=2*d):"RBG"===l&&(y=0,w=d,b=2*d),n=a.createImageData(o,i);for(let t=0;t<i*o;p+=4,h+=4,g+=4,m+=4,t++)n.data[p]=(e.data[y++]-c[0])*f[0],n.data[h]=(e.data[b++]-c[1])*f[1],n.data[g]=(e.data[w++]-c[2])*f[2],n.data[m]=-1===v?255:(e.data[v++]-c[3])*f[3]}else throw Error("Can not access image data");return n}}),Q=$(()=>{et(),g=(e,t)=>{if(void 0===e)throw Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw Error("Image height and width must be defined");if("NHWC"===t.tensorLayout)throw Error("NHWC Tensor layout is not supported yet");let{height:a,width:n}=t,o=t.norm??{mean:255,bias:0},i,s;i="number"==typeof o.mean?[o.mean,o.mean,o.mean,o.mean]:[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],s="number"==typeof o.bias?[o.bias,o.bias,o.bias,o.bias]:[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let l=void 0!==t.format?t.format:"RGBA",u=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",f=a*n,c=new Float32Array("RGBA"===u?4*f:3*f),d=4,p=0,h=1,g=2,m=3,y=0,b=f,w=2*f,v=-1;"RGB"===l&&(d=3,p=0,h=1,g=2,m=-1),"RGBA"===u?v=3*f:"RBG"===u?(y=0,w=f,b=2*f):"BGR"===u&&(w=0,b=f,y=2*f);for(let t=0;t<f;t++,p+=d,g+=d,h+=d,m+=d)c[y++]=(e[p]+s[0])/i[0],c[b++]=(e[h]+s[1])/i[1],c[w++]=(e[g]+s[2])/i[2],-1!==v&&-1!==m&&(c[v++]=(e[m]+s[3])/i[3]);return"RGBA"===u?new S("float32",c,[1,4,a,n]):new S("float32",c,[1,3,a,n])},m=async(e,t)=>{let a="u">typeof HTMLImageElement&&e instanceof HTMLImageElement,n="u">typeof ImageData&&e instanceof ImageData,o="u">typeof ImageBitmap&&e instanceof ImageBitmap,i="string"==typeof e,s,l=t??{},u=()=>{if("u">typeof document)return document.createElement("canvas");if("u">typeof OffscreenCanvas)return new OffscreenCanvas(1,1);throw Error("Canvas is not supported")},f=e=>e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas?e.getContext("2d"):null;if(a){let a=u();a.width=e.width,a.height=e.height;let n=f(a);if(null!=n){let a=e.height,o=e.width;if(void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(a=t.resizedHeight,o=t.resizedWidth),void 0!==t){if(l=t,void 0!==t.tensorFormat)throw Error("Image input config format must be RGBA for HTMLImageElement");l.tensorFormat="RGBA",l.height=a,l.width=o}else l.tensorFormat="RGBA",l.height=a,l.width=o;n.drawImage(e,0,0),s=n.getImageData(0,0,o,a).data}else throw Error("Can not access image data")}else if(n){let a,n;if(void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(a=t.resizedHeight,n=t.resizedWidth):(a=e.height,n=e.width),void 0!==t&&(l=t),l.format="RGBA",l.height=a,l.width=n,void 0!==t){let t=u();t.width=n,t.height=a;let o=f(t);if(null!=o)o.putImageData(e,0,0),s=o.getImageData(0,0,n,a).data;else throw Error("Can not access image data")}else s=e.data}else if(o){if(void 0===t)throw Error("Please provide image config with format for Imagebitmap");let a=u();a.width=e.width,a.height=e.height;let n=f(a);if(null!=n){let t=e.height,a=e.width;return n.drawImage(e,0,0,a,t),s=n.getImageData(0,0,a,t).data,l.height=t,l.width=a,g(s,l)}throw Error("Can not access image data")}else{if(i)return new Promise((t,a)=>{let n=u(),o=f(n);if(!e||!o)return a();let i=new Image;i.crossOrigin="Anonymous",i.src=e,i.onload=()=>{n.width=i.width,n.height=i.height,o.drawImage(i,0,0,n.width,n.height);let e=o.getImageData(0,0,n.width,n.height);l.height=n.height,l.width=n.width,t(g(e.data,l))}});throw Error("Input data provided is not supported - aborted tensor creation")}if(void 0!==s)return g(s,l);throw Error("Input data provided is not supported - aborted tensor creation")},y=(e,t)=>{let{width:a,height:n,download:o,dispose:i}=t;return new S({location:"texture",type:"float32",texture:e,dims:[1,n,a,4],download:o,dispose:i})},b=(e,t)=>{let{dataType:a,dims:n,download:o,dispose:i}=t;return new S({location:"gpu-buffer",type:a??"float32",gpuBuffer:e,dims:n,download:o,dispose:i})},w=(e,t,a)=>new S({location:"cpu-pinned",type:e,data:t,dims:a??[t.length]})}),K=$(()=>{v=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),O=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),_=!1,E=()=>{if(!_){_=!0;let e="u">typeof BigInt64Array&&BigInt64Array.from,t="u">typeof BigUint64Array&&BigUint64Array.from,a="u">typeof Float16Array&&Float16Array.from;e&&(v.set("int64",BigInt64Array),O.set(BigInt64Array,"int64")),t&&(v.set("uint64",BigUint64Array),O.set(BigUint64Array,"uint64")),a?(v.set("float16",Float16Array),O.set(Float16Array,"float16")):v.set("float16",Uint16Array)}}}),ee=$(()=>{et(),A=e=>{let t=1;for(let a=0;a<e.length;a++){let n=e[a];if("number"!=typeof n||!Number.isSafeInteger(n))throw TypeError(`dims[${a}] must be an integer, got: ${n}`);if(n<0)throw RangeError(`dims[${a}] must be a non-negative integer, got: ${n}`);t*=n}return t},T=(e,t)=>{switch(e.location){case"cpu":return new S(e.type,e.data,t);case"cpu-pinned":return new S({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new S({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new S({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});default:throw Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),et=$(()=>{Z(),Q(),K(),ee(),S=class{constructor(e,t,a){let n,o;if(E(),"object"==typeof e&&"location"in e)switch(this.dataLocation=e.location,n=e.type,o=e.dims,e.location){case"cpu-pinned":{let t=v.get(n);if(!t)throw TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof t))throw TypeError(`buffer should be of type ${t.name}`);this.cpuData=e.data;break}case"texture":if("float32"!==n)throw TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==n&&"float16"!==n&&"int32"!==n&&"int64"!==n&&"uint32"!==n&&"uint8"!==n&&"bool"!==n)throw TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;default:throw Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let i,s;if("string"==typeof e){if(n=e,s=a,"string"===e){if(!Array.isArray(t))throw TypeError("A string tensor's data must be a string array.");i=t}else{let a=v.get(e);if(void 0===a)throw TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if("float16"===e&&a===Uint16Array)throw TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");i="uint64"===e||"int64"===e?a.from(t,BigInt):a.from(t)}else if(t instanceof a)i=t;else throw TypeError(`A ${n} tensor's data must be type of ${a}`)}}else if(s=t,Array.isArray(e)){if(0===e.length)throw TypeError("Tensor type cannot be inferred from an empty array.");let t=typeof e[0];if("string"===t)n="string",i=e;else if("boolean"===t)n="bool",i=Uint8Array.from(e);else throw TypeError(`Invalid element type of data array: ${t}.`)}else{let t=O.get(e.constructor);if(void 0===t)throw TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=t,i=e}if(void 0===s)s=[i.length];else if(!Array.isArray(s))throw TypeError("A tensor's dims must be a number array");o=s,this.cpuData=i,this.dataLocation="cpu"}let i=A(o);if(this.cpuData&&i!==this.cpuData.length)throw Error(`Tensor's size(${i}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=o,this.size=i}static async fromImage(e,t){return m(e,t)}static fromTexture(e,t){return y(e,t)}static fromGpuBuffer(e,t){return b(e,t)}static fromPinnedBuffer(e,t,a){return w(e,t,a)}toDataURL(e){return p(this,e)}toImageData(e){return h(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":if(!this.downloader)throw Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}default:throw Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw Error("Cannot reshape a tensor that owns GPU resource.");return T(this,e)}}}),er=$(()=>{et(),x=S}),ea=$(()=>{J(),M=(e,t)=>{(typeof c.trace>"u"?c.wasm.trace:c.trace)&&console.timeStamp(`${e}::ORT::${t}`)},C=(e,t)=>{let a=Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let o=0;o<a.length;o++){if(n&&!a[o].includes("TRACE_FUNC")){let n=`FUNC_${e}::${a[o].trim().split(" ")[1]}`;t&&(n+=`::${t}`),M("CPU",n);return}a[o].includes("TRACE_FUNC")&&(n=!0)}},R=e=>{(typeof c.trace>"u"?c.wasm.trace:c.trace)&&C("BEGIN",e)},P=e=>{(typeof c.trace>"u"?c.wasm.trace:c.trace)&&C("END",e)}}),en=$(()=>{z(),er(),ea(),F=class e{constructor(e){this.handler=e}async run(e,t,a){R();let n={},o={};if("object"!=typeof e||null===e||e instanceof x||Array.isArray(e))throw TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if("object"==typeof t){if(null===t)throw TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof x)throw TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw TypeError("'fetches' cannot be an empty array.");for(let e of(i=!1,t)){if("string"!=typeof e)throw TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw RangeError(`'fetches' contains invalid output name: ${e}.`);n[e]=null}if("object"==typeof a&&null!==a)o=a;else if("u">typeof a)throw TypeError("'options' must be an object.")}else{let e=!1,s=Object.getOwnPropertyNames(t);for(let a of this.outputNames)if(-1!==s.indexOf(a)){let o=t[a];(null===o||o instanceof x)&&(e=!0,i=!1,n[a]=o)}if(e){if("object"==typeof a&&null!==a)o=a;else if("u">typeof a)throw TypeError("'options' must be an object.")}else o=t}}else if("u">typeof t)throw TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let t of this.inputNames)if(typeof e[t]>"u")throw Error(`input '${t}' is missing in 'feeds'.`);if(i)for(let e of this.outputNames)n[e]=null;let s=await this.handler.run(e,n,o),l={};for(let e in s)if(Object.hasOwnProperty.call(s,e)){let t=s[e];t instanceof x?l[e]=t:l[e]=new x(t.type,t.data,t.dims)}return P(),l}async release(){return this.handler.dispose()}static async create(t,a,n,o){R();let i,s={};if("string"==typeof t){if(i=t,"object"==typeof a&&null!==a)s=a;else if("u">typeof a)throw TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(i=t,"object"==typeof a&&null!==a)s=a;else if("u">typeof a)throw TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer){let e=0,l=t.byteLength;if("object"==typeof a&&null!==a)s=a;else if("number"==typeof a){if(!Number.isSafeInteger(e=a))throw RangeError("'byteOffset' must be an integer.");if(e<0||e>=t.byteLength)throw RangeError(`'byteOffset' is out of range [0, ${t.byteLength}).`);if(l=t.byteLength-e,"number"==typeof n){if(!Number.isSafeInteger(l=n))throw RangeError("'byteLength' must be an integer.");if(l<=0||e+l>t.byteLength)throw RangeError(`'byteLength' is out of range (0, ${t.byteLength-e}].`);if("object"==typeof o&&null!==o)s=o;else if("u">typeof o)throw TypeError("'options' must be an object.")}else if("u">typeof n)throw TypeError("'byteLength' must be a number.")}else if("u">typeof a)throw TypeError("'options' must be an object.");i=new Uint8Array(t,e,l)}else throw TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[u,f]=await l(s),c=await u.createInferenceSessionHandler(i,f);return P(),new e(c)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),eo=$(()=>{en(),D=F}),ei=$(()=>{}),es=$(()=>{}),el=$(()=>{}),eu=$(()=>{}),ef=$(()=>{z(),er(),U="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",N=class e{constructor(e,t,a){this.handler=e,this.hasOptimizerModel=t,this.hasEvalModel=a}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw Error("This training session has no evalModel loaded.")}static async create(t,a){let n=t.evalModel||"",o=t.optimizerModel||"",[i,s]=await l(a||{});if(i.createTrainingSessionHandler)return new e(await i.createTrainingSessionHandler(t.checkpointState,t.trainModel,n,o,s),!!t.optimizerModel,!!t.evalModel);throw Error(U)}typeNarrowingForRunStep(e,t,a,n,o){let i={},s={};if("object"!=typeof a||null===a||a instanceof x||Array.isArray(a))throw TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if("object"==typeof n){if(null===n)throw TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof x)throw TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(0===n.length)throw TypeError("'fetches' cannot be an empty array.");for(let e of(l=!1,n)){if("string"!=typeof e)throw TypeError("'fetches' must be a string array or an object.");if(-1===t.indexOf(e))throw RangeError(`'fetches' contains invalid output name: ${e}.`);i[e]=null}if("object"==typeof o&&null!==o)s=o;else if("u">typeof o)throw TypeError("'options' must be an object.")}else{let e=!1,a=Object.getOwnPropertyNames(n);for(let o of t)if(-1!==a.indexOf(o)){let t=n[o];(null===t||t instanceof x)&&(e=!0,l=!1,i[o]=t)}if(e){if("object"==typeof o&&null!==o)s=o;else if("u">typeof o)throw TypeError("'options' must be an object.")}else s=n}}else if("u">typeof n)throw TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let t of e)if(typeof a[t]>"u")throw Error(`input '${t}' is missing in 'feeds'.`);if(l)for(let e of t)i[e]=null;return[i,s]}convertHandlerReturnTypeToMapOfTensors(e){let t={};for(let a in e)if(Object.hasOwnProperty.call(e,a)){let n=e[a];n instanceof x?t[a]=n:t[a]=new x(n.type,n.data,n.dims)}return t}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,t,a){let[n,o]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,t,a),i=await this.handler.runTrainStep(e,n,o);return this.convertHandlerReturnTypeToMapOfTensors(i)}async runOptimizerStep(e){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(e||{});else throw Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(e,t,a){if(this.hasEvalModel){let[n,o]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,t,a),i=await this.handler.runEvalStep(e,n,o);return this.convertHandlerReturnTypeToMapOfTensors(i)}throw Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,t=!0){let a=await this.getParametersSize(t);if(e.length!==4*a)throw Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,t)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}}),ec=$(()=>{ef(),k=N}),ed={};W(ed,{InferenceSession:()=>D,TRACE:()=>M,TRACE_FUNC_BEGIN:()=>R,TRACE_FUNC_END:()=>P,Tensor:()=>x,TrainingSession:()=>k,env:()=>d,registerBackend:()=>i});var ep=$(()=>{V(),X(),eo(),er(),ei(),es(),ea(),el(),eu(),ec()}),eh={};W(eh,{createReadStream:()=>ey,readFile:()=>eg,readFileSync:()=>em});var eg,em,ey,eb=$(()=>{eg=void 0,em=void 0,ey=void 0}),ew={};W(ew,{join:()=>ev});var ev,eO=$(()=>{ev=void 0}),e_=H((n,o)=>{var i=(()=>{var e="u">typeof document?document.currentScript?.src:void 0;return e||=__filename,function(t={}){var a,n,o,i,s,l,u=new Promise((e,t)=>{n=e,o=t}),f=Object.assign({},t),c="./this.program",d="object"==typeof window,p="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g="";if(h){var m=(eb(),Y(eh)),y=(eO(),Y(ew));g=p?y.dirname(g)+"/":__dirname+"/",i=(e,t)=>(e=j(e)?new URL(e):y.normalize(e),m.readFileSync(e,t?void 0:"utf8")),l=e=>((e=i(e,!0)).buffer||(e=new Uint8Array(e)),e),s=(e,t,a,n=!0)=>{e=j(e)?new URL(e):y.normalize(e),m.readFile(e,n?void 0:"utf8",(e,o)=>{e?a(e):t(n?o.buffer:o)})},!t.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(d||p)&&(p?g=self.location.href:"u">typeof document&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g=g.startsWith("blob:")?"":g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),i=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=(e,t,a)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):a()},n.onerror=a,n.send(null)});var b=console.log.bind(console),w=console.error.bind(console);Object.assign(t,f),f=null;var v,O,_,E,A,T,S=!1;function x(){var e=v.buffer;t.HEAP8=O=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAPU8=_=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAP32=E=new Int32Array(e),t.HEAPU32=A=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=T=new Float64Array(e)}var M=[],C=[],R=[],P=0,F=null,D=null;function U(e){throw w(e="Aborted("+e+")"),S=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),o(e),e}var N,k=e=>e.startsWith("data:application/octet-stream;base64,"),j=e=>e.startsWith("file://");if(!k(N="ort-wasm.wasm")){var I=N;N=t.locateFile?t.locateFile(I,g):g+I}function B(e){if(l)return l(e);throw"both async and sync fetching of the wasm failed"}function L(e,t,a){return(function(e){if(d||p){if("function"==typeof fetch&&!j(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw`failed to load wasm binary file at '${e}'`;return t.arrayBuffer()}).catch(()=>B(e));if(s)return new Promise((t,a)=>{s(e,e=>t(new Uint8Array(e)),a)})}return Promise.resolve().then(()=>B(e))})(e).then(e=>WebAssembly.instantiate(e,t)).then(a,e=>{w(`failed to asynchronously prepare wasm: ${e}`),U(e)})}var $,H={798088:(e,a,n,o)=>{if(typeof t>"u"||!t.ya)return 1;if((e=X(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=t.ya.get(e)))return 2;if((a>>>=0)+(n>>>=0)>e.byteLength)return 3;try{return _.set(e.subarray(a,a+n),o>>>0>>>0),0}catch{return 4}}};class W{constructor(e){this.wa=e-24}}var G,z=0,V=0,q="u">typeof TextDecoder?new TextDecoder("utf8"):void 0,J=(e,t,a)=>{var n=(t>>>=0)+a;for(a=t;e[a]&&!(a>=n);)++a;if(16<a-t&&e.buffer&&q)return q.decode(e.subarray(t,a));for(n="";t<a;){var o=e[t++];if(128&o){var i=63&e[t++];if((224&o)==192)n+=String.fromCharCode((31&o)<<6|i);else{var s=63&e[t++];65536>(o=(240&o)==224?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&e[t++])?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else n+=String.fromCharCode(o)}return n},X=(e,t)=>(e>>>=0)?J(_,e,t):"",Z=e=>{for(var t=0,a=0;a<e.length;++a){var n=e.charCodeAt(a);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++a):t+=3}return t},Q=(e,t,a,n)=>{if(a>>>=0,!(0<n))return 0;var o=a;n=a+n-1;for(var i=0;i<e.length;++i){var s=e.charCodeAt(i);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),127>=s){if(a>=n)break;t[a++>>>0]=s}else{if(2047>=s){if(a+1>=n)break;t[a++>>>0]=192|s>>6}else{if(65535>=s){if(a+2>=n)break;t[a++>>>0]=224|s>>12}else{if(a+3>=n)break;t[a++>>>0]=240|s>>18,t[a++>>>0]=128|s>>12&63}t[a++>>>0]=128|s>>6&63}t[a++>>>0]=128|63&s}}return t[a>>>0]=0,a-o},K=e=>e%4==0&&(e%100!=0||e%400==0),ee=[0,31,60,91,121,152,182,213,244,274,305,335],et=[0,31,59,90,120,151,181,212,243,273,304,334],er=[],ea={},en=()=>{if(!G){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(e in ea)void 0===ea[e]?delete t[e]:t[e]=ea[e];var a=[];for(e in t)a.push(`${e}=${t[e]}`);G=a}return G},eo=[null,[],[]],ei=[31,29,31,30,31,30,31,31,30,31,30,31],es=[31,28,31,30,31,30,31,31,30,31,30,31];function el(e,t,a,n){function o(e,t,a){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=a[0]+e;return e}function i(e,t){return o(e,t,"0")}function s(e,t){var a;function n(e){return 0>e?-1:0<e?1:0}return 0===(a=n(e.getFullYear()-t.getFullYear()))&&0===(a=n(e.getMonth()-t.getMonth()))&&(a=n(e.getDate()-t.getDate())),a}function l(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.sa;for(e=new Date(new Date(e.ta+1900,0,1).getTime());0<t;){var a=e.getMonth(),n=(K(e.getFullYear())?ei:es)[a];if(t>n-e.getDate())t-=n-e.getDate()+1,e.setDate(1),11>a?e.setMonth(a+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));else{e.setDate(e.getDate()+t);break}}return a=new Date(e.getFullYear()+1,0,4),t=l(new Date(e.getFullYear(),0,4)),a=l(a),0>=s(t,e)?0>=s(a,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,a>>>=0;var f,c,d=A[(n>>>=0)+40>>>2>>>0];for(var p in n={Ba:E[n>>>2>>>0],Aa:E[n+4>>>2>>>0],ua:E[n+8>>>2>>>0],xa:E[n+12>>>2>>>0],va:E[n+16>>>2>>>0],ta:E[n+20>>>2>>>0],na:E[n+24>>>2>>>0],sa:E[n+28>>>2>>>0],Da:E[n+32>>>2>>>0],za:E[n+36>>>2>>>0],Ca:d?X(d):""},a=X(a),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})a=a.replace(RegExp(p,"g"),d[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),g="January February March April May June July August September October November December".split(" ");for(p in d={"%a":e=>h[e.na].substring(0,3),"%A":e=>h[e.na],"%b":e=>g[e.va].substring(0,3),"%B":e=>g[e.va],"%C":e=>i((e.ta+1900)/100|0,2),"%d":e=>i(e.xa,2),"%e":e=>o(e.xa,2," "),"%g":e=>u(e).toString().substring(2),"%G":u,"%H":e=>i(e.ua,2),"%I":e=>(0==(e=e.ua)?e=12:12<e&&(e-=12),i(e,2)),"%j":e=>{for(var t=0,a=0;a<=e.va-1;t+=(K(e.ta+1900)?ei:es)[a++]);return i(e.xa+t,3)},"%m":e=>i(e.va+1,2),"%M":e=>i(e.Aa,2),"%n":()=>`
`,"%p":e=>0<=e.ua&&12>e.ua?"AM":"PM","%S":e=>i(e.Ba,2),"%t":()=>"	","%u":e=>e.na||7,"%U":e=>i(Math.floor((e.sa+7-e.na)/7),2),"%V":e=>{var t=Math.floor((e.sa+7-(e.na+6)%7)/7);if(2>=(e.na+371-e.sa-2)%7&&t++,t)53==t&&(4==(a=(e.na+371-e.sa)%7)||3==a&&K(e.ta)||(t=1));else{t=52;var a=(e.na+7-e.sa-1)%7;(4==a||5==a&&K(e.ta%400-1))&&t++}return i(t,2)},"%w":e=>e.na,"%W":e=>i(Math.floor((e.sa+7-(e.na+6)%7)/7),2),"%y":e=>(e.ta+1900).toString().substring(2),"%Y":e=>e.ta+1900,"%z":e=>(0<=(e=e.za)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4),"%Z":e=>e.Ca,"%%":()=>"%"},a=a.replace(/%%/g,"\0\0"),d)a.includes(p)&&(a=a.replace(RegExp(p,"g"),d[p](n)));return c=Array(Z(f=a=a.replace(/\0\0/g,"%"))+1),Q(f,c,0,c.length),(p=c).length>t?0:(O.set(p,e>>>0),p.length-1)}var eu={a:function(e,t,a){var n=new W(e>>>=0);throw A[n.wa+16>>>2>>>0]=0,A[n.wa+4>>>2>>>0]=t>>>0,A[n.wa+8>>>2>>>0]=a>>>0,z=e,V++,z},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(e,t,a){return t>>>=0,_.copyWithin(e>>>0>>>0,t>>>0,t+(a>>>0)>>>0)},n:function(e,t,a){a>>>=0,e=new Date(1e3*(e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN)),E[a>>>2>>>0]=e.getUTCSeconds(),E[a+4>>>2>>>0]=e.getUTCMinutes(),E[a+8>>>2>>>0]=e.getUTCHours(),E[a+12>>>2>>>0]=e.getUTCDate(),E[a+16>>>2>>>0]=e.getUTCMonth(),E[a+20>>>2>>>0]=e.getUTCFullYear()-1900,E[a+24>>>2>>>0]=e.getUTCDay(),E[a+28>>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(e,t,a){a>>>=0,e=new Date(1e3*(e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN)),E[a>>>2>>>0]=e.getSeconds(),E[a+4>>>2>>>0]=e.getMinutes(),E[a+8>>>2>>>0]=e.getHours(),E[a+12>>>2>>>0]=e.getDate(),E[a+16>>>2>>>0]=e.getMonth(),E[a+20>>>2>>>0]=e.getFullYear()-1900,E[a+24>>>2>>>0]=e.getDay(),E[a+28>>>2>>>0]=(K(e.getFullYear())?ee:et)[e.getMonth()]+e.getDate()-1|0,E[a+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();E[a+32>>>2>>>0]=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t))},p:function(e){var t=new Date(E[(e>>>=0)+20>>>2>>>0]+1900,E[e+16>>>2>>>0],E[e+12>>>2>>>0],E[e+8>>>2>>>0],E[e+4>>>2>>>0],E[e>>>2>>>0],0),a=E[e+32>>>2>>>0],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,o);return 0>a?E[e+32>>>2>>>0]=+(o!=i&&s==n):0<a!=(s==n)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<a?s:o)-n))),E[e+24>>>2>>>0]=t.getDay(),E[e+28>>>2>>>0]=(K(t.getFullYear())?ee:et)[t.getMonth()]+t.getDate()-1|0,E[e>>>2>>>0]=t.getSeconds(),E[e+4>>>2>>>0]=t.getMinutes(),E[e+8>>>2>>>0]=t.getHours(),E[e+12>>>2>>>0]=t.getDate(),E[e+16>>>2>>>0]=t.getMonth(),E[e+20>>>2>>>0]=t.getYear(),e=isNaN(e=t.getTime())?-1:e/1e3,ec(1<=+Math.abs($=e)?0<$?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0),e>>>0},l:function(){return -52},m:function(){},t:function(e,t,a,n){a>>>=0,n>>>=0;var o=new Date().getFullYear(),i=new Date(o,0,1),s=new Date(o,6,1);o=i.getTimezoneOffset();var l=s.getTimezoneOffset();A[e>>>0>>>2>>>0]=60*Math.max(o,l),E[t>>>0>>>2>>>0]=+(o!=l),i=(e=e=>e.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1])(i),s=e(s),l<o?(Q(i,_,a,17),Q(s,_,n,17)):(Q(i,_,n,17),Q(s,_,a,17))},d:()=>{U("")},B:function(e,t,a){e>>>=0,t>>>=0,a>>>=0,er.length=0;for(var n;n=_[t++>>>0];){var o=105!=n;o&=112!=n,a+=o&&a%8?4:0,er.push(112==n?A[a>>>2>>>0]:105==n?E[a>>>2>>>0]:T[a>>>3>>>0]),a+=o?8:4}return H[e](...er)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(e){e>>>=0;var t=_.length;if(4294901760<e)return!1;for(var a=1;4>=a;a*=2){var n=t*(1+.2/a);n=Math.min(n,e+100663296);var o=Math;n=Math.max(e,n);e:{o=(o.min.call(o,4294901760,n+(65536-n%65536)%65536)-v.buffer.byteLength+65535)/65536;try{v.grow(o),x();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},C:function(e,t){e>>>=0,t>>>=0;var a=0;return en().forEach((n,o)=>{var i=t+a;for(o=A[e+4*o>>>2>>>0]=i,i=0;i<n.length;++i)O[o++>>>0]=n.charCodeAt(i);O[o>>>0]=0,a+=n.length+1}),0},D:function(e,t){e>>>=0,t>>>=0;var a=en();A[e>>>2>>>0]=a.length;var n=0;return a.forEach(e=>n+=e.length+1),A[t>>>2>>>0]=n,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(e,t,a,n){t>>>=0,a>>>=0,n>>>=0;for(var o=0,i=0;i<a;i++){var s=A[t>>>2>>>0],l=A[t+4>>>2>>>0];t+=8;for(var u=0;u<l;u++){var f=_[s+u>>>0],c=eo[e];0===f||10===f?((1===e?b:w)(J(c,0)),c.length=0):c.push(f)}o+=l}return A[n>>>2>>>0]=o,0},r:el,c:function(e,t,a,n){return el(e>>>0,t>>>0,a>>>0,n>>>0)}},ef=function(){function e(e){var t,a;let n;return v=(t=Object.assign({},t=ef=e.exports),a=e=>t=>e(t)>>>0,t.la=a(t.la),t.qa=a(t.qa),t.ra=(n=t.ra,()=>n()>>>0),ef=t).K,x(),C.unshift(ef.L),0==--P&&(null!==F&&(clearInterval(F),F=null),D&&(e=D,D=null,e())),ef}var a,n,i={a:eu};if(P++,t.instantiateWasm)try{return t.instantiateWasm(i,e)}catch(e){w(`Module.instantiateWasm callback failed with error: ${e}`),o(e)}return(a=function(t){e(t.instance)},n=N,"function"!=typeof WebAssembly.instantiateStreaming||k(n)||j(n)||h||"function"!=typeof fetch?L(n,i,a):fetch(n,{credentials:"same-origin"}).then(e=>WebAssembly.instantiateStreaming(e,i).then(a,function(e){return w(`wasm streaming compile failed: ${e}`),w("falling back to ArrayBuffer instantiation"),L(n,i,a)}))).catch(o),{}}();t._OrtInit=(e,a)=>(t._OrtInit=ef.M)(e,a),t._OrtGetLastError=(e,a)=>(t._OrtGetLastError=ef.N)(e,a),t._OrtCreateSessionOptions=(e,a,n,o,i,s,l,u,f,c)=>(t._OrtCreateSessionOptions=ef.O)(e,a,n,o,i,s,l,u,f,c),t._OrtAppendExecutionProvider=(e,a)=>(t._OrtAppendExecutionProvider=ef.P)(e,a),t._OrtAddFreeDimensionOverride=(e,a,n)=>(t._OrtAddFreeDimensionOverride=ef.Q)(e,a,n),t._OrtAddSessionConfigEntry=(e,a,n)=>(t._OrtAddSessionConfigEntry=ef.R)(e,a,n),t._OrtReleaseSessionOptions=e=>(t._OrtReleaseSessionOptions=ef.S)(e),t._OrtCreateSession=(e,a,n)=>(t._OrtCreateSession=ef.T)(e,a,n),t._OrtReleaseSession=e=>(t._OrtReleaseSession=ef.U)(e),t._OrtGetInputOutputCount=(e,a,n)=>(t._OrtGetInputOutputCount=ef.V)(e,a,n),t._OrtGetInputName=(e,a)=>(t._OrtGetInputName=ef.W)(e,a),t._OrtGetOutputName=(e,a)=>(t._OrtGetOutputName=ef.X)(e,a),t._OrtFree=e=>(t._OrtFree=ef.Y)(e),t._OrtCreateTensor=(e,a,n,o,i,s)=>(t._OrtCreateTensor=ef.Z)(e,a,n,o,i,s),t._OrtGetTensorData=(e,a,n,o,i)=>(t._OrtGetTensorData=ef._)(e,a,n,o,i),t._OrtReleaseTensor=e=>(t._OrtReleaseTensor=ef.$)(e),t._OrtCreateRunOptions=(e,a,n,o)=>(t._OrtCreateRunOptions=ef.aa)(e,a,n,o),t._OrtAddRunConfigEntry=(e,a,n)=>(t._OrtAddRunConfigEntry=ef.ba)(e,a,n),t._OrtReleaseRunOptions=e=>(t._OrtReleaseRunOptions=ef.ca)(e),t._OrtCreateBinding=e=>(t._OrtCreateBinding=ef.da)(e),t._OrtBindInput=(e,a,n)=>(t._OrtBindInput=ef.ea)(e,a,n),t._OrtBindOutput=(e,a,n,o)=>(t._OrtBindOutput=ef.fa)(e,a,n,o),t._OrtClearBoundOutputs=e=>(t._OrtClearBoundOutputs=ef.ga)(e),t._OrtReleaseBinding=e=>(t._OrtReleaseBinding=ef.ha)(e),t._OrtRunWithBinding=(e,a,n,o,i)=>(t._OrtRunWithBinding=ef.ia)(e,a,n,o,i),t._OrtRun=(e,a,n,o,i,s,l,u)=>(t._OrtRun=ef.ja)(e,a,n,o,i,s,l,u),t._OrtEndProfiling=e=>(t._OrtEndProfiling=ef.ka)(e),t._malloc=e=>(t._malloc=ef.la)(e),t._free=e=>(t._free=ef.ma)(e);var ec=e=>(ec=ef.oa)(e),ed=e=>(ed=ef.pa)(e),ep=e=>(ep=ef.qa)(e),eg=()=>(eg=ef.ra)();function em(){if(!(0<P)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;){var e=t.preRun.shift();M.unshift(e)}for(;0<M.length;)M.shift()(t);if(!(0<P||a||(a=!0,t.calledRun=!0,S))){for(;0<C.length;)C.shift()(t);for(n(t);0<R.length;)R.shift()(t)}}}return t.stackSave=()=>eg(),t.stackRestore=e=>ed(e),t.stackAlloc=e=>ep(e),t.UTF8ToString=X,t.stringToUTF8=(e,t,a)=>Q(e,_,t,a),t.lengthBytesUTF8=Z,D=function e(){a||em(),a||(D=e)},em(),u}})();"object"==typeof n&&"object"==typeof o?o.exports=i:void 0!==(a=(()=>i).apply(t,[]))&&(e.exports=a)}),eE=H(()=>{}),eA=H(()=>{}),eT={};W(eT,{cpus:()=>eS});var eS,ex,eM,eC,eR,eP,eF,eD,eU,eN,ek,ej,eI,eB,eL,e$,eH,eW,eG,eY,ez,eV,eq,eJ,eX,eZ,eQ,eK,e0,e1,e2,e3,e6,e4,e5,e8,e7,e9,te,tt,tr,ta,tn,to,ti,ts,tl,tu,tf,tc,td,tp,th,tg,tm,ty,tb,tw,tv,tO,t_,tE,tA,tT,tS=$(()=>{eS=void 0}),tx=H((n,o)=>{var i=(()=>{var e="u">typeof document?document.currentScript?.src:void 0;return e||=__filename,function(t={}){function a(){return R.buffer!=D.buffer&&B(),D}function n(){return R.buffer!=D.buffer&&B(),U}function o(){return R.buffer!=D.buffer&&B(),N}function i(){return R.buffer!=D.buffer&&B(),k}function s(){return R.buffer!=D.buffer&&B(),j}var l,u,f,c=new Promise((e,t)=>{u=e,f=t}),d=Object.assign({},t),p="./this.program",h=(e,t)=>{throw t},g="object"==typeof window,m="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=t.ENVIRONMENT_IS_PTHREAD||!1,w="";function v(e){return t.locateFile?t.locateFile(e,w):w+e}if(y){var O=(eb(),Y(eh)),_=(eO(),Y(ew));w=m?_.dirname(w)+"/":__dirname+"/",x=(e,t)=>(e=Q(e)?new URL(e):_.normalize(e),O.readFileSync(e,t?void 0:"utf8")),C=e=>((e=x(e,!0)).buffer||(e=new Uint8Array(e)),e),M=(e,t,a,n=!0)=>{e=Q(e)?new URL(e):_.normalize(e),O.readFile(e,n?void 0:"utf8",(e,o)=>{e?a(e):t(n?o.buffer:o)})},!t.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),h=(e,t)=>{throw process.exitCode=e,t},global.Worker=eE().Worker}else(g||m)&&(m?w=self.location.href:"u">typeof document&&document.currentScript&&(w=document.currentScript.src),"u">typeof e&&e&&(w=e),w=w.startsWith("blob:")?"":w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1),y||(x=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(C=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),M=(e,t,a)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):a()},n.onerror=a,n.send(null)}));y&&typeof performance>"u"&&(global.performance=eA().performance);var E=console.log.bind(console),A=console.error.bind(console);y&&(E=(...e)=>O.writeSync(1,e.join(" ")+`
`),A=(...e)=>O.writeSync(2,e.join(" ")+`
`));var T=E,S=A;Object.assign(t,d),d=null;var x,M,C,R,P,F,D,U,N,k,j,I=!1;function B(){var e=R.buffer;t.HEAP8=D=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAPU8=U=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAP32=N=new Int32Array(e),t.HEAPU32=k=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=j=new Float64Array(e)}var L=16777216;if(b)R=t.wasmMemory;else if(t.wasmMemory)R=t.wasmMemory;else if(!((R=new WebAssembly.Memory({initial:L/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw S("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&S("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");B(),L=R.buffer.byteLength;var $=[],H=[],W=[],G=0,z=null,V=null;function q(){if(0==--G&&(null!==z&&(clearInterval(z),z=null),V)){var e=V;V=null,e()}}function J(e){throw S(e="Aborted("+e+")"),I=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),f(e),e}var X,Z=e=>e.startsWith("data:application/octet-stream;base64,"),Q=e=>e.startsWith("file://");function K(e){if(C)return C(e);throw"both async and sync fetching of the wasm failed"}function ee(e,t,a){return(function(e){if(g||m){if("function"==typeof fetch&&!Q(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw`failed to load wasm binary file at '${e}'`;return t.arrayBuffer()}).catch(()=>K(e));if(M)return new Promise((t,a)=>{M(e,e=>t(new Uint8Array(e)),a)})}return Promise.resolve().then(()=>K(e))})(e).then(e=>WebAssembly.instantiate(e,t)).then(a,e=>{S(`failed to asynchronously prepare wasm: ${e}`),J(e)})}Z(X="ort-wasm-threaded.wasm")||(X=v(X));var et,er={799444:(e,a,o,i)=>{if(typeof t>"u"||!t.bb)return 1;if((e=eP(e>>>0)).startsWith("./")&&(e=e.substring(2)),!(e=t.bb.get(e)))return 2;if(i>>>=0,(a>>>=0)+(o>>>=0)>e.byteLength)return 3;try{return n().set(e.subarray(a,a+o),i>>>0),0}catch{return 4}}};function ea(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var en=e=>{e.terminate(),e.onmessage=()=>{}},eo=e=>{0==ed.Oa.length&&(ec(),ed.Xa(ed.Oa[0]));var t=ed.Oa.pop();if(!t)return 6;ed.Pa.push(t),ed.La[e.Na]=t,t.Na=e.Na;var a={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return y&&t.unref(),t.postMessage(a,e.mb),0},ei=0,es=e=>{var t=tv();return e=e(),tb(t),e},el=(e,t,...a)=>es(()=>{for(var n=a.length,o=tw(8*n),i=o>>>3,l=0;l<a.length;l++){var u=a[l];s()[i+l>>>0]=u}return td(e,0,n,o,t)});function eu(e){if(b)return el(0,1,e);F=e,0<ei||(ed.hb(),t.onExit?.(e),I=!0),h(e,new ea(e))}var ef=e=>{if(F=e,b)throw eg(e),"unwind";eu(e)};function ec(){var e=v("ort-wasm-threaded.worker.js");e=new Worker(e),ed.Oa.push(e)}var ed={Oa:[],Pa:[],ab:[],La:{},Va(){b?(ed.receiveObjectTransfer=ed.fb,ed.threadInitTLS=ed.$a,ed.setExitStatus=ed.Za):function(){for(var e=t.numThreads;e--;)ec();$.unshift(()=>{var e;G++,e=()=>q(),b?e():Promise.all(ed.Oa.map(ed.Xa)).then(e)})}()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of ed.Pa)en(e);for(e of ed.Oa)en(e);ed.Oa=[],ed.Pa=[],ed.La=[]},Ya:e=>{var t=e.Na;delete ed.La[t],ed.Oa.push(e),ed.Pa.splice(ed.Pa.indexOf(e),1),e.Na=0,tp(t)},fb(){},$a(){ed.ab.forEach(e=>e())},Xa:a=>new Promise(n=>{a.onmessage=e=>{var o=(e=e.data).cmd;if(e.targetThread&&e.targetThread!=tf()){var i=ed.La[e.targetThread];i?i.postMessage(e,e.transferList):S(`Internal error! Worker sent a message "${o}" to target pthread ${e.targetThread}, but that thread no longer exists!`)}else"checkMailbox"===o?eJ():"spawnThread"===o?eo(e):"cleanupThread"===o?ed.Ya(ed.La[e.thread]):"killThread"===o?(e=e.thread,o=ed.La[e],delete ed.La[e],en(o),tp(e),ed.Pa.splice(ed.Pa.indexOf(o),1),o.Na=0):"cancelThread"===o?ed.La[e.thread].postMessage({cmd:"cancel"}):"loaded"===o?(a.loaded=!0,y&&!a.Na&&a.unref(),n(a)):"alert"===o?alert(`Thread ${e.threadId}: ${e.text}`):"setimmediate"===e.target?a.postMessage(e):"callHandler"===o?t[e.handler](...e.args):o&&S(`worker sent an unknown command ${o}`)},a.onerror=e=>{throw S(`worker sent an error! ${e.filename}:${e.lineno}: ${e.message}`),e},y&&(a.on("message",e=>a.onmessage({data:e})),a.on("error",e=>a.onerror(e)));var o,i=[];for(o of["onExit"])t.hasOwnProperty(o)&&i.push(o);a.postMessage({cmd:"load",handlers:i,urlOrBlob:t.mainScriptUrlOrBlob||e,wasmMemory:R,wasmModule:P})})};t.PThread=ed;var ep=e=>{for(;0<e.length;)e.shift()(t)};function eg(e){if(b)return el(1,0,e);ef(e)}t.establishStackSpace=()=>{var e=tf(),t=i()[e+52>>>2>>>0];e=i()[e+56>>>2>>>0],ty(t,t-e),tb(t)};var em,ey=[];t.invokeEntryPoint=(e,t)=>{ei=0;var a=ey[e];a||(e>=ey.length&&(ey.length=e+1),ey[e]=a=em.get(e)),e=a(t),0<ei?ed.Za(e):th(e)};class ev{constructor(e){this.Ua=e-24}Va(e,t){i()[this.Ua+16>>>2>>>0]=0,i()[this.Ua+4>>>2>>>0]=e,i()[this.Ua+8>>>2>>>0]=t}}var e_=0,eS=0;function ex(e,t,a,n){return b?el(2,1,e,t,a,n):eM(e,t,a,n)}function eM(e,t,a,n){if(e>>>=0,t>>>=0,a>>>=0,n>>>=0,typeof SharedArrayBuffer>"u")return S("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var o=[];return b&&0===o.length?ex(e,t,a,n):(e={gb:a,Na:e,cb:n,mb:o},b?(e.ob="spawnThread",postMessage(e,o),0):eo(e))}var eC="u">typeof TextDecoder?new TextDecoder("utf8"):void 0,eR=(e,t,a)=>{var n=(t>>>=0)+a;for(a=t;e[a]&&!(a>=n);)++a;if(16<a-t&&e.buffer&&eC)return eC.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,a):e.subarray(t,a));for(n="";t<a;){var o=e[t++];if(128&o){var i=63&e[t++];if((224&o)==192)n+=String.fromCharCode((31&o)<<6|i);else{var s=63&e[t++];65536>(o=(240&o)==224?(15&o)<<12|i<<6|s:(7&o)<<18|i<<12|s<<6|63&e[t++])?n+=String.fromCharCode(o):(o-=65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else n+=String.fromCharCode(o)}return n},eP=(e,t)=>(e>>>=0)?eR(n(),e,t):"";function eF(e,t,a){return b?el(3,1,e,t,a):0}function eD(e,t){if(b)return el(4,1,e,t)}var eU=e=>{for(var t=0,a=0;a<e.length;++a){var n=e.charCodeAt(a);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++a):t+=3}return t},eN=(e,t,a,n)=>{if(a>>>=0,!(0<n))return 0;var o=a;n=a+n-1;for(var i=0;i<e.length;++i){var s=e.charCodeAt(i);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),127>=s){if(a>=n)break;t[a++>>>0]=s}else{if(2047>=s){if(a+1>=n)break;t[a++>>>0]=192|s>>6}else{if(65535>=s){if(a+2>=n)break;t[a++>>>0]=224|s>>12}else{if(a+3>=n)break;t[a++>>>0]=240|s>>18,t[a++>>>0]=128|s>>12&63}t[a++>>>0]=128|s>>6&63}t[a++>>>0]=128|63&s}}return t[a>>>0]=0,a-o},ek=(e,t,a)=>eN(e,n(),t,a);function ej(e,t){if(b)return el(5,1,e,t)}function eI(e,t,a){if(b)return el(6,1,e,t,a)}function eB(e,t,a){return b?el(7,1,e,t,a):0}function eL(e,t){if(b)return el(8,1,e,t)}function e$(e,t,a){if(b)return el(9,1,e,t,a)}function eH(e,t,a,n){if(b)return el(10,1,e,t,a,n)}function eW(e,t,a,n){if(b)return el(11,1,e,t,a,n)}function eG(e,t,a,n){if(b)return el(12,1,e,t,a,n)}function eY(e){if(b)return el(13,1,e)}function ez(e,t){if(b)return el(14,1,e,t)}function eV(e,t,a){if(b)return el(15,1,e,t,a)}function eq(e){e>>>=0,"function"==typeof Atomics.nb&&(Atomics.nb(o(),e>>>2,e).value.then(eJ),e+=128,Atomics.store(o(),e>>>2,1))}t.__emscripten_thread_mailbox_await=eq;var eJ=()=>{var e=tf();if(e&&(eq(e),e=tg,!I))try{if(e(),!(0<ei))try{b?th(F):ef(F)}catch(e){e instanceof ea||"unwind"==e||h(1,e)}}catch(e){e instanceof ea||"unwind"==e||h(1,e)}};t.checkMailbox=eJ;var eX=[],eZ=e=>e%4==0&&(e%100!=0||e%400==0),eQ=[0,31,60,91,121,152,182,213,244,274,305,335],eK=[0,31,59,90,120,151,181,212,243,273,304,334];function e0(e,t,a,n,o,i,s,l){return b?el(16,1,e,t,a,n,o,i,s,l):-52}function e1(e,t,a,n,o,i,s){if(b)return el(17,1,e,t,a,n,o,i,s)}var e2,e3=[],e6={},e4=()=>{if(!e2){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(e in e6)void 0===e6[e]?delete t[e]:t[e]=e6[e];var a=[];for(e in t)a.push(`${e}=${t[e]}`);e2=a}return e2};function e5(e,t){if(b)return el(18,1,e,t);e>>>=0,t>>>=0;var n=0;return e4().forEach((o,s)=>{var l=t+n;for(s=i()[e+4*s>>>2>>>0]=l,l=0;l<o.length;++l)a()[s++>>>0]=o.charCodeAt(l);a()[s>>>0]=0,n+=o.length+1}),0}function e8(e,t){if(b)return el(19,1,e,t);e>>>=0,t>>>=0;var a=e4();i()[e>>>2>>>0]=a.length;var n=0;return a.forEach(e=>n+=e.length+1),i()[t>>>2>>>0]=n,0}function e7(e){return b?el(20,1,e):52}function e9(e,t,a,n){return b?el(21,1,e,t,a,n):52}function te(e,t,a,n,o){return b?el(22,1,e,t,a,n,o):70}var tt=[null,[],[]];function tr(e,t,a,o){if(b)return el(23,1,e,t,a,o);t>>>=0,a>>>=0,o>>>=0;for(var s=0,l=0;l<a;l++){var u=i()[t>>>2>>>0],f=i()[t+4>>>2>>>0];t+=8;for(var c=0;c<f;c++){var d=n()[u+c>>>0],p=tt[e];0===d||10===d?((1===e?T:S)(eR(p,0)),p.length=0):p.push(d)}s+=f}return i()[o>>>2>>>0]=s,0}var ta=[31,29,31,30,31,30,31,31,30,31,30,31],tn=[31,28,31,30,31,30,31,31,30,31,30,31],to=(e,t)=>{a().set(e,t>>>0)};function ti(e,t,a,n){function s(e,t,a){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=a[0]+e;return e}function l(e,t){return s(e,t,"0")}function u(e,t){var a;function n(e){return 0>e?-1:0<e?1:0}return 0===(a=n(e.getFullYear()-t.getFullYear()))&&0===(a=n(e.getMonth()-t.getMonth()))&&(a=n(e.getDate()-t.getDate())),a}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function c(e){var t=e.Qa;for(e=new Date(new Date(e.Ra+1900,0,1).getTime());0<t;){var a=e.getMonth(),n=(eZ(e.getFullYear())?ta:tn)[a];if(t>n-e.getDate())t-=n-e.getDate()+1,e.setDate(1),11>a?e.setMonth(a+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1));else{e.setDate(e.getDate()+t);break}}return a=new Date(e.getFullYear()+1,0,4),t=f(new Date(e.getFullYear(),0,4)),a=f(a),0>=u(t,e)?0>=u(a,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}e>>>=0,t>>>=0,a>>>=0,n>>>=0;var d,p,h=i()[n+40>>>2>>>0];for(var g in n={kb:o()[n>>>2>>>0],jb:o()[n+4>>>2>>>0],Sa:o()[n+8>>>2>>>0],Wa:o()[n+12>>>2>>>0],Ta:o()[n+16>>>2>>>0],Ra:o()[n+20>>>2>>>0],Ma:o()[n+24>>>2>>>0],Qa:o()[n+28>>>2>>>0],qb:o()[n+32>>>2>>>0],ib:o()[n+36>>>2>>>0],lb:h?eP(h):""},a=eP(a),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})a=a.replace(RegExp(g,"g"),h[g]);var m="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),y="January February March April May June July August September October November December".split(" ");for(g in h={"%a":e=>m[e.Ma].substring(0,3),"%A":e=>m[e.Ma],"%b":e=>y[e.Ta].substring(0,3),"%B":e=>y[e.Ta],"%C":e=>l((e.Ra+1900)/100|0,2),"%d":e=>l(e.Wa,2),"%e":e=>s(e.Wa,2," "),"%g":e=>c(e).toString().substring(2),"%G":c,"%H":e=>l(e.Sa,2),"%I":e=>(0==(e=e.Sa)?e=12:12<e&&(e-=12),l(e,2)),"%j":e=>{for(var t=0,a=0;a<=e.Ta-1;t+=(eZ(e.Ra+1900)?ta:tn)[a++]);return l(e.Wa+t,3)},"%m":e=>l(e.Ta+1,2),"%M":e=>l(e.jb,2),"%n":()=>`
`,"%p":e=>0<=e.Sa&&12>e.Sa?"AM":"PM","%S":e=>l(e.kb,2),"%t":()=>"	","%u":e=>e.Ma||7,"%U":e=>l(Math.floor((e.Qa+7-e.Ma)/7),2),"%V":e=>{var t=Math.floor((e.Qa+7-(e.Ma+6)%7)/7);if(2>=(e.Ma+371-e.Qa-2)%7&&t++,t)53==t&&(4==(a=(e.Ma+371-e.Qa)%7)||3==a&&eZ(e.Ra)||(t=1));else{t=52;var a=(e.Ma+7-e.Qa-1)%7;(4==a||5==a&&eZ(e.Ra%400-1))&&t++}return l(t,2)},"%w":e=>e.Ma,"%W":e=>l(Math.floor((e.Qa+7-(e.Ma+6)%7)/7),2),"%y":e=>(e.Ra+1900).toString().substring(2),"%Y":e=>e.Ra+1900,"%z":e=>(0<=(e=e.ib)?"+":"-")+("0000"+((e=Math.abs(e)/60)/60*100+e%60)).slice(-4),"%Z":e=>e.lb,"%%":()=>"%"},a=a.replace(/%%/g,"\0\0"),h)a.includes(g)&&(a=a.replace(RegExp(g,"g"),h[g](n)));return p=Array(eU(d=a=a.replace(/\0\0/g,"%"))+1),eN(d,p,0,p.length),(g=p).length>t?0:(to(g,e),g.length-1)}ed.Va();var ts=[eu,eg,ex,eF,eD,ej,eI,eB,eL,e$,eH,eW,eG,eY,ez,eV,e0,e1,e5,e8,e7,e9,te,tr],tl={b:function(e,t,a){throw new ev(e>>>=0).Va(t>>>0,a>>>0),e_=e,eS++,e_},L:function(e){tc(e>>>0,!m,1,!g,131072,!1),ed.$a()},j:function(e){e>>>=0,b?postMessage({cmd:"cleanupThread",thread:e}):ed.Ya(ed.La[e])},H:eM,h:eF,S:eD,D:ej,F:eI,T:eB,Q:eL,J:e$,P:eH,n:eW,E:eG,B:eY,R:ez,C:eV,p:()=>1,z:function(e,t){(e>>>=0)==t>>>0?setTimeout(eJ):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=ed.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,a,n,o){t>>>=0,a>>>=0,eX.length=n,o=o>>>0>>>3;for(var i=0;i<n;i++)eX[i]=s()[o+i>>>0];return e=t?er[t]:ts[e],ed.eb=a,a=e(...eX),ed.eb=0,a},K:eq,o:function(e){y&&ed.La[e>>>0].ref()},s:function(e,t,a){a>>>=0,e=new Date(1e3*(e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN)),o()[a>>>2>>>0]=e.getUTCSeconds(),o()[a+4>>>2>>>0]=e.getUTCMinutes(),o()[a+8>>>2>>>0]=e.getUTCHours(),o()[a+12>>>2>>>0]=e.getUTCDate(),o()[a+16>>>2>>>0]=e.getUTCMonth(),o()[a+20>>>2>>>0]=e.getUTCFullYear()-1900,o()[a+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,o()[a+28>>>2>>>0]=e},t:function(e,t,a){a>>>=0,e=new Date(1e3*(e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN)),o()[a>>>2>>>0]=e.getSeconds(),o()[a+4>>>2>>>0]=e.getMinutes(),o()[a+8>>>2>>>0]=e.getHours(),o()[a+12>>>2>>>0]=e.getDate(),o()[a+16>>>2>>>0]=e.getMonth(),o()[a+20>>>2>>>0]=e.getFullYear()-1900,o()[a+24>>>2>>>0]=e.getDay(),t=(eZ(e.getFullYear())?eQ:eK)[e.getMonth()]+e.getDate()-1|0,o()[a+28>>>2>>>0]=t,o()[a+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(t!=n&&e.getTimezoneOffset()==Math.min(n,t)),o()[a+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(o()[e+20>>>2>>>0]+1900,o()[e+16>>>2>>>0],o()[e+12>>>2>>>0],o()[e+8>>>2>>>0],o()[e+4>>>2>>>0],o()[e>>>2>>>0],0),a=o()[e+32>>>2>>>0],n=t.getTimezoneOffset(),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=new Date(t.getFullYear(),0,1).getTimezoneOffset(),l=Math.min(s,i);return 0>a?o()[e+32>>>2>>>0]=+(i!=s&&l==n):0<a!=(l==n)&&(i=Math.max(s,i),t.setTime(t.getTime()+6e4*((0<a?l:i)-n))),o()[e+24>>>2>>>0]=t.getDay(),a=(eZ(t.getFullYear())?eQ:eK)[t.getMonth()]+t.getDate()-1|0,o()[e+28>>>2>>>0]=a,o()[e>>>2>>>0]=t.getSeconds(),o()[e+4>>>2>>>0]=t.getMinutes(),o()[e+8>>>2>>>0]=t.getHours(),o()[e+12>>>2>>>0]=t.getDate(),o()[e+16>>>2>>>0]=t.getMonth(),o()[e+20>>>2>>>0]=t.getYear(),e=isNaN(e=t.getTime())?-1:e/1e3,tm(1<=+Math.abs(et=e)?0<et?+Math.floor(et/4294967296)>>>0:~~+Math.ceil((et-+(~~et>>>0))/4294967296)>>>0:0),e>>>0},q:e0,r:e1,y:function(e,t,a,n){e>>>=0,t>>>=0,a>>>=0,n>>>=0;var s=new Date().getFullYear(),l=new Date(s,0,1),u=new Date(s,6,1);s=l.getTimezoneOffset();var f=u.getTimezoneOffset(),c=Math.max(s,f);i()[e>>>2>>>0]=60*c,o()[t>>>2>>>0]=+(s!=f),l=(e=e=>e.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1])(l),u=e(u),f<s?(ek(l,a,17),ek(u,n,17)):(ek(l,n,17),ek(u,a,17))},c:()=>{J("")},O:function(e,t,a){e>>>=0,t>>>=0,a>>>=0,e3.length=0;for(var l;l=n()[t++>>>0];){var u=105!=l;u&=112!=l,a+=u&&a%8?4:0,e3.push(112==l?i()[a>>>2>>>0]:105==l?o()[a>>>2>>>0]:s()[a>>>3>>>0]),a+=u?8:4}return er[e](...e3)},k:()=>{},i:()=>Date.now(),U:()=>{throw ei+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>y?(tS(),Y(eT)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=n().length;if(e<=t||4294901760<e)return!1;for(var a=1;4>=a;a*=2){var o=t*(1+.2/a);o=Math.min(o,e+100663296);var i=Math;o=Math.max(e,o);e:{i=(i.min.call(i,4294901760,o+(65536-o%65536)%65536)-R.buffer.byteLength+65535)/65536;try{R.grow(i),B();var s=1;break e}catch{}s=void 0}if(s)return!0}return!1},M:e5,N:e8,G:ef,g:e7,m:e9,v:te,l:tr,a:R||t.wasmMemory,w:ti,d:function(e,t,a,n){return ti(e>>>0,t>>>0,a>>>0,n>>>0)}},tu=function(){function e(e,t){var a,n,o;return a=Object.assign({},a=tu=e.exports),n=e=>()=>e()>>>0,o=e=>t=>e(t)>>>0,a.va=n(a.va),a.wa=o(a.wa),a.emscripten_main_runtime_thread_id=n(a.emscripten_main_runtime_thread_id),a.Ja=o(a.Ja),a.Ka=n(a.Ka),tu=a,ed.ab.push(tu.ya),em=tu.za,H.unshift(tu.V),P=t,q(),tu}var a,n,o={a:tl};if(G++,t.instantiateWasm)try{return t.instantiateWasm(o,e)}catch(e){S(`Module.instantiateWasm callback failed with error: ${e}`),f(e)}return(a=function(t){e(t.instance,t.module)},n=X,"function"!=typeof WebAssembly.instantiateStreaming||Z(n)||Q(n)||y||"function"!=typeof fetch?ee(n,o,a):fetch(n,{credentials:"same-origin"}).then(e=>WebAssembly.instantiateStreaming(e,o).then(a,function(e){return S(`wasm streaming compile failed: ${e}`),S("falling back to ArrayBuffer instantiation"),ee(n,o,a)}))).catch(f),{}}();t._OrtInit=(e,a)=>(t._OrtInit=tu.W)(e,a),t._OrtGetLastError=(e,a)=>(t._OrtGetLastError=tu.X)(e,a),t._OrtCreateSessionOptions=(e,a,n,o,i,s,l,u,f,c)=>(t._OrtCreateSessionOptions=tu.Y)(e,a,n,o,i,s,l,u,f,c),t._OrtAppendExecutionProvider=(e,a)=>(t._OrtAppendExecutionProvider=tu.Z)(e,a),t._OrtAddFreeDimensionOverride=(e,a,n)=>(t._OrtAddFreeDimensionOverride=tu._)(e,a,n),t._OrtAddSessionConfigEntry=(e,a,n)=>(t._OrtAddSessionConfigEntry=tu.$)(e,a,n),t._OrtReleaseSessionOptions=e=>(t._OrtReleaseSessionOptions=tu.aa)(e),t._OrtCreateSession=(e,a,n)=>(t._OrtCreateSession=tu.ba)(e,a,n),t._OrtReleaseSession=e=>(t._OrtReleaseSession=tu.ca)(e),t._OrtGetInputOutputCount=(e,a,n)=>(t._OrtGetInputOutputCount=tu.da)(e,a,n),t._OrtGetInputName=(e,a)=>(t._OrtGetInputName=tu.ea)(e,a),t._OrtGetOutputName=(e,a)=>(t._OrtGetOutputName=tu.fa)(e,a),t._OrtFree=e=>(t._OrtFree=tu.ga)(e),t._OrtCreateTensor=(e,a,n,o,i,s)=>(t._OrtCreateTensor=tu.ha)(e,a,n,o,i,s),t._OrtGetTensorData=(e,a,n,o,i)=>(t._OrtGetTensorData=tu.ia)(e,a,n,o,i),t._OrtReleaseTensor=e=>(t._OrtReleaseTensor=tu.ja)(e),t._OrtCreateRunOptions=(e,a,n,o)=>(t._OrtCreateRunOptions=tu.ka)(e,a,n,o),t._OrtAddRunConfigEntry=(e,a,n)=>(t._OrtAddRunConfigEntry=tu.la)(e,a,n),t._OrtReleaseRunOptions=e=>(t._OrtReleaseRunOptions=tu.ma)(e),t._OrtCreateBinding=e=>(t._OrtCreateBinding=tu.na)(e),t._OrtBindInput=(e,a,n)=>(t._OrtBindInput=tu.oa)(e,a,n),t._OrtBindOutput=(e,a,n,o)=>(t._OrtBindOutput=tu.pa)(e,a,n,o),t._OrtClearBoundOutputs=e=>(t._OrtClearBoundOutputs=tu.qa)(e),t._OrtReleaseBinding=e=>(t._OrtReleaseBinding=tu.ra)(e),t._OrtRunWithBinding=(e,a,n,o,i)=>(t._OrtRunWithBinding=tu.sa)(e,a,n,o,i),t._OrtRun=(e,a,n,o,i,s,l,u)=>(t._OrtRun=tu.ta)(e,a,n,o,i,s,l,u),t._OrtEndProfiling=e=>(t._OrtEndProfiling=tu.ua)(e);var tf=t._pthread_self=()=>(tf=t._pthread_self=tu.va)();t._malloc=e=>(t._malloc=tu.wa)(e),t._free=e=>(t._free=tu.xa)(e),t.__emscripten_tls_init=()=>(t.__emscripten_tls_init=tu.ya)();var tc=t.__emscripten_thread_init=(e,a,n,o,i,s)=>(tc=t.__emscripten_thread_init=tu.Aa)(e,a,n,o,i,s);t.__emscripten_thread_crashed=()=>(t.__emscripten_thread_crashed=tu.Ba)();var td=(e,t,a,n,o)=>(td=tu.Ca)(e,t,a,n,o),tp=e=>(tp=tu.Da)(e),th=t.__emscripten_thread_exit=e=>(th=t.__emscripten_thread_exit=tu.Ea)(e),tg=()=>(tg=tu.Fa)(),tm=e=>(tm=tu.Ga)(e),ty=(e,t)=>(ty=tu.Ha)(e,t),tb=e=>(tb=tu.Ia)(e),tw=e=>(tw=tu.Ja)(e),tv=()=>(tv=tu.Ka)();function tO(){if(!(0<G)){if(b)u(t),b||ep(H),startWorker(t);else{if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)$.unshift(t.preRun.shift());ep($),0<G||l||(l=!0,t.calledRun=!0,I||(b||ep(H),u(t),b||ep(W)))}}}return t.wasmMemory=R,t.stackSave=()=>tv(),t.stackRestore=e=>tb(e),t.stackAlloc=e=>tw(e),t.keepRuntimeAlive=()=>0<ei,t.UTF8ToString=eP,t.stringToUTF8=ek,t.lengthBytesUTF8=eU,t.ExitStatus=ea,t.PThread=ed,V=function e(){l||tO(),l||(V=e)},tO(),c}})();"object"==typeof n&&"object"==typeof o?o.exports=i:void 0!==(a=(()=>i).apply(t,[]))&&(e.exports=a)}),tM=H((e,t)=>{t.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),tC=$(()=>{ex=e_(),eM=tx(),eR=!1,eP=!1,eF=!1,eD=e=>{if(1===e)return!1;if(typeof SharedArrayBuffer>"u")return"u">typeof self&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;"u">typeof process&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return"u">typeof MessageChannel&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},eU=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},eN=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",ek=async e=>{if(eR)return Promise.resolve();if(eP)throw Error("multiple calls to 'initializeWebAssembly()' detected.");if(eF)throw Error("previous call to 'initializeWebAssembly()' failed.");eP=!0;let t=e.initTimeout,a=e.numThreads,n=e.simd,o=eD(a),i=n&&eU(),s=e.wasmPaths,l="string"==typeof s?s:void 0,u=eN(i,o),f="object"==typeof s?s[u]:void 0,c=!1,d=[];if(t>0&&d.push(new Promise(e=>{setTimeout(()=>{c=!0,e()},t)})),d.push(new Promise((e,t)=>{let n=o?eM:ex,i={locateFile:(e,t)=>o&&e.endsWith(".worker.js")&&"u">typeof Blob?URL.createObjectURL(new Blob([tM()],{type:"text/javascript"})):e.endsWith(".wasm")?f||(l??t)+u:t+e};if(o){if(i.numThreads=a,typeof Blob>"u")i.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let e=`var ortWasmThreaded=${n.toString()};`;i.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"})}}n(i).then(t=>{eP=!1,eR=!0,eC=t,e()},e=>{eP=!1,eF=!0,t(e)})})),await Promise.race(d),c)throw Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},ej=()=>{if(eR&&eC)return eC;throw Error("WebAssembly is not initialized yet.")}}),tR=$(()=>{tC(),eI=(e,t)=>{let a=ej(),n=a.lengthBytesUTF8(e)+1,o=a._malloc(n);return a.stringToUTF8(e,o,n),t.push(o),o},eB=(e,t,a,n)=>{if("object"==typeof e&&null!==e){if(a.has(e))throw Error("Circular reference in options");a.add(e)}Object.entries(e).forEach(([e,o])=>{let i=t?t+e:e;if("object"==typeof o)eB(o,i+".",a,n);else if("string"==typeof o||"number"==typeof o)n(i,o.toString());else if("boolean"==typeof o)n(i,o?"1":"0");else throw Error(`Can't handle extra config type: ${typeof o}`)})},eL=e=>{let t=ej(),a=t.stackSave();try{let a=t.stackAlloc(8);t._OrtGetLastError(a,a+4);let n=t.HEAP32[a/4],o=t.HEAPU32[a/4+1],i=o?t.UTF8ToString(o):"";throw Error(`${e} ERROR_CODE: ${n}, ERROR_MESSAGE: ${i}`)}finally{t.stackRestore(a)}}}),tP=$(()=>{tC(),tR(),e$=e=>{let t=ej(),a=0,n=[],o=e||{};try{if(e?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(o.terminate=!1);let i=0;return e?.tag!==void 0&&(i=eI(e.tag,n)),a=t._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,i),0===a&&eL("Can't create run options."),e?.extra!==void 0&&eB(e.extra,"",new WeakSet,(e,o)=>{let i=eI(e,n),s=eI(o,n);0!==t._OrtAddRunConfigEntry(a,i,s)&&eL(`Can't set a run config entry: ${e} - ${o}.`)}),[a,n]}catch(e){throw 0!==a&&t._OrtReleaseRunOptions(a),n.forEach(e=>t._free(e)),e}}}),tF=$(()=>{tC(),tR(),eH=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw Error(`unsupported graph optimization level: ${e}`)}},eW=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw Error(`unsupported execution mode: ${e}`)}},eG=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(e=>("string"==typeof e?e:e.name)==="webgpu")&&(e.enableMemPattern=!1)},eY=(e,t,a)=>{for(let n of t){let t="string"==typeof n?n:n.name;switch(t){case"webnn":if(t="WEBNN","string"!=typeof n){if(n?.deviceType){let t=eI("deviceType",a),o=eI(n.deviceType,a);0!==ej()._OrtAddSessionConfigEntry(e,t,o)&&eL(`Can't set a session config entry: 'deviceType' - ${n.deviceType}.`)}if(n?.numThreads){let t=n.numThreads;("number"!=typeof t||!Number.isInteger(t)||t<0)&&(t=0);let o=eI("numThreads",a),i=eI(t.toString(),a);0!==ej()._OrtAddSessionConfigEntry(e,o,i)&&eL(`Can't set a session config entry: 'numThreads' - ${n.numThreads}.`)}if(n?.powerPreference){let t=eI("powerPreference",a),o=eI(n.powerPreference,a);0!==ej()._OrtAddSessionConfigEntry(e,t,o)&&eL(`Can't set a session config entry: 'powerPreference' - ${n.powerPreference}.`)}}break;case"webgpu":if(t="JS","string"!=typeof n&&n?.preferredLayout){if("NCHW"!==n.preferredLayout&&"NHWC"!==n.preferredLayout)throw Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${n.preferredLayout}`);let t=eI("preferredLayout",a),o=eI(n.preferredLayout,a);0!==ej()._OrtAddSessionConfigEntry(e,t,o)&&eL(`Can't set a session config entry: 'preferredLayout' - ${n.preferredLayout}.`)}break;case"wasm":case"cpu":continue;default:throw Error(`not supported execution provider: ${t}`)}let o=eI(t,a);0!==ej()._OrtAppendExecutionProvider(e,o)&&eL(`Can't append execution provider: ${t}.`)}},ez=e=>{let t=ej(),a=0,n=[],o=e||{};eG(o);try{let e=eH(o.graphOptimizationLevel??"all"),i=eW(o.executionMode??"sequential"),s="string"==typeof o.logId?eI(o.logId,n):0,l=o.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw Error(`log serverity level is not valid: ${l}`);let u=o.logVerbosityLevel??0;if(!Number.isInteger(u)||u<0||u>4)throw Error(`log verbosity level is not valid: ${u}`);let f="string"==typeof o.optimizedModelFilePath?eI(o.optimizedModelFilePath,n):0;if(a=t._OrtCreateSessionOptions(e,!!o.enableCpuMemArena,!!o.enableMemPattern,i,!!o.enableProfiling,0,s,l,u,f),0===a&&eL("Can't create session options."),o.executionProviders&&eY(a,o.executionProviders,n),void 0!==o.enableGraphCapture){if("boolean"!=typeof o.enableGraphCapture)throw Error(`enableGraphCapture must be a boolean value: ${o.enableGraphCapture}`);let e=eI("enableGraphCapture",n),i=eI(o.enableGraphCapture.toString(),n);0!==t._OrtAddSessionConfigEntry(a,e,i)&&eL(`Can't set a session config entry: 'enableGraphCapture' - ${o.enableGraphCapture}.`)}if(o.freeDimensionOverrides)for(let[e,i]of Object.entries(o.freeDimensionOverrides)){if("string"!=typeof e)throw Error(`free dimension override name must be a string: ${e}`);if("number"!=typeof i||!Number.isInteger(i)||i<0)throw Error(`free dimension override value must be a non-negative integer: ${i}`);let o=eI(e,n);0!==t._OrtAddFreeDimensionOverride(a,o,i)&&eL(`Can't set a free dimension override: ${e} - ${i}.`)}return void 0!==o.extra&&eB(o.extra,"",new WeakSet,(e,o)=>{let i=eI(e,n),s=eI(o,n);0!==t._OrtAddSessionConfigEntry(a,i,s)&&eL(`Can't set a session config entry: ${e} - ${o}.`)}),[a,n]}catch(e){throw 0!==a&&t._OrtReleaseSessionOptions(a),n.forEach(e=>t._free(e)),e}}}),tD=$(()=>{eV=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw Error(`unsupported data type: ${e}`)}},eq=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw Error(`unsupported data type: ${e}`)}},eJ=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],eX=e=>{switch(e){case"float16":return"u">typeof Float16Array&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw Error(`unsupported type: ${e}`)}},eZ=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw Error(`unsupported logging level: ${e}`)}},eQ=e=>"float32"===e||"float16"===e||"int32"===e||"int64"===e||"uint32"===e||"uint8"===e||"bool"===e,eK=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw Error(`unsupported data location: ${e}`)}}}),tU=$(()=>{e0=async e=>{if("string"!=typeof e)return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e);if("u">typeof process&&process.versions&&process.versions.node)try{return new Uint8Array(await (void 0)(e))}catch(t){if("ERR_FS_FILE_TOO_LARGE"===t.code){let t=(void 0)(e),a=[];for await(let e of t)a.push(e);return new Uint8Array(Buffer.concat(a))}throw t}else{let t=await fetch(e);if(!t.ok)throw Error(`failed to load external data file: ${e}`);let a=t.headers.get("Content-Length"),n=a?parseInt(a,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw Error(`failed to load external data file: ${e}, no response body.`);let a=t.body.getReader(),o;try{o=new ArrayBuffer(n)}catch(e){if(e instanceof RangeError){let e=Math.ceil(n/65536);o=new WebAssembly.Memory({initial:e,maximum:e}).buffer}else throw e}let i=0;for(;;){let{done:e,value:t}=await a.read();if(e)break;let n=t.byteLength;new Uint8Array(o,i,n).set(t),i+=n}return new Uint8Array(o,0,n)}}}}),tN=$(()=>{tP(),tF(),tD(),tC(),tR(),tU(),e1=(e,t)=>{0!==ej()._OrtInit(e,t)&&eL("Can't initialize onnxruntime.")},e2=async e=>{e1(e.wasm.numThreads,eZ(e.logLevel))},e3=async(e,t)=>{},e6=new Map,e4=e=>{let t=ej(),a=t.stackSave();try{let a=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,a,a+4)&&eL("Can't get session input/output count."),[t.HEAP32[a/4],t.HEAP32[a/4+1]]}finally{t.stackRestore(a)}},e5=e=>{let t=ej(),a=t._malloc(e.byteLength);if(0===a)throw Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,a),[a,e.byteLength]},e8=async(e,t)=>{let a,n,o=ej();Array.isArray(e)?[a,n]=e:e.buffer===o.HEAPU8.buffer?[a,n]=[e.byteOffset,e.byteLength]:[a,n]=e5(e);let i=0,s=0,l=[],u=[],f=[];try{if([s,l]=ez(t),t?.externalData&&o.mountExternalData){let e=[];for(let a of t.externalData){let t="string"==typeof a?a:a.path;e.push(e0("string"==typeof a?a:a.data).then(e=>{o.mountExternalData(t,e)}))}await Promise.all(e)}i=await o._OrtCreateSession(a,n,s),0===i&&eL("Can't create a session.");let[e,c]=e4(i),d=!!t?.enableGraphCapture,p=[],h=[];for(let t=0;t<e;t++){let e=o._OrtGetInputName(i,t);0===e&&eL("Can't get an input name."),u.push(e),p.push(o.UTF8ToString(e))}for(let e=0;e<c;e++){let t=o._OrtGetOutputName(i,e);0===t&&eL("Can't get an output name."),f.push(t);let a=o.UTF8ToString(t);h.push(a)}return e6.set(i,[i,u,f,null,d,!1]),[i,p,h]}catch(e){throw u.forEach(e=>o._OrtFree(e)),f.forEach(e=>o._OrtFree(e)),0!==i&&o._OrtReleaseSession(i),e}finally{o._free(a),0!==s&&o._OrtReleaseSessionOptions(s),l.forEach(e=>o._free(e)),o.unmountExternalData?.()}},e7=e=>{let t=ej(),a=e6.get(e);if(!a)throw Error(`cannot release session. invalid session id: ${e}`);let[n,o,i,s,l]=a;s&&(l&&t._OrtClearBoundOutputs(s.handle),t._OrtReleaseBinding(s.handle)),t.jsepOnReleaseSession?.(e),o.forEach(e=>t._OrtFree(e)),i.forEach(e=>t._OrtFree(e)),t._OrtReleaseSession(n),e6.delete(e)},e9=(e,t,a,n,o,i=!1)=>{if(!e){t.push(0);return}let s=ej(),l=e[0],u=e[1],f=e[3],c,d;if("string"===l&&"gpu-buffer"===f)throw Error("String tensor is not supported on GPU.");if(i&&"gpu-buffer"!==f)throw Error(`External buffer must be provided for input/output index ${o} when enableGraphCapture is true.`);if("gpu-buffer"===f){let t=e[2].gpuBuffer,a=eJ(eV(l));d=u.reduce((e,t)=>e*t,1)*a;let i=s.jsepRegisterBuffer;if(!i)throw Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');c=i(n,o,t,d)}else{let t=e[2];if(Array.isArray(t)){d=4*t.length,c=s._malloc(d),a.push(c);let e=c/4;for(let n=0;n<t.length;n++){if("string"!=typeof t[n])throw TypeError(`tensor data at index ${n} is not a string`);s.HEAPU32[e++]=eI(t[n],a)}}else d=t.byteLength,c=s._malloc(d),a.push(c),s.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,d),c)}let p=s.stackSave(),h=s.stackAlloc(4*u.length);try{let e=h/4;u.forEach(t=>s.HEAP32[e++]=t);let a=s._OrtCreateTensor(eV(l),c,d,h,u.length,eK(f));0===a&&eL(`Can't create tensor for input/output. session=${n}, index=${o}.`),t.push(a)}finally{s.stackRestore(p)}},te=async(e,t,a,n,o,i)=>{let s=ej(),l=e6.get(e);if(!l)throw Error(`cannot run inference. invalid session id: ${e}`);let u=l[0],f=l[1],c=l[2],d=l[3],p=l[4],h=(l[5],t.length),g=n.length,m=0,y=[],b=[],w=[],v=[],O=s.stackSave(),_=s.stackAlloc(4*h),E=s.stackAlloc(4*h),A=s.stackAlloc(4*g),T=s.stackAlloc(4*g);try{let l;[m,y]=e$(i);for(let n=0;n<h;n++)e9(a[n],b,v,e,t[n],p);for(let t=0;t<g;t++)e9(o[t],w,v,e,h+n[t],p);let O=_/4,S=E/4,x=A/4,M=T/4;for(let e=0;e<h;e++)s.HEAPU32[O++]=b[e],s.HEAPU32[S++]=f[t[e]];for(let e=0;e<g;e++)s.HEAPU32[x++]=w[e],s.HEAPU32[M++]=c[n[e]];s.jsepOnRunStart?.(u),l=await s._OrtRun(u,E,_,h,T,g,A,m),0!==l&&eL("failed to call OrtRun().");let C=[];for(let e=0;e<g;e++){let t=s.HEAPU32[A/4+e];if(t===w[e]){C.push(o[e]);continue}let a=s.stackSave(),i=s.stackAlloc(16),l=!1,u,f=0;try{0!==s._OrtGetTensorData(t,i,i+4,i+8,i+12)&&eL(`Can't access output tensor data on index ${e}.`);let a=i/4,o=s.HEAPU32[a++];f=s.HEAPU32[a++];let c=s.HEAPU32[a++],p=s.HEAPU32[a++],h=[];for(let e=0;e<p;e++)h.push(s.HEAPU32[c/4+e]);s._OrtFree(c);let g=h.reduce((e,t)=>e*t,1);u=eq(o);let m=d?.outputPreferredLocations[n[e]];if("string"===u){if("gpu-buffer"===m)throw Error("String tensor is not supported on GPU.");let e=[],t=f/4;for(let a=0;a<g;a++){let n=s.HEAPU32[t++],o=a===g-1?void 0:s.HEAPU32[t]-n;e.push(s.UTF8ToString(n,o))}C.push([u,h,e,"cpu"])}else if("gpu-buffer"===m&&g>0){let e=s.jsepGetBuffer;if(!e)throw Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let a=e(f),n=eJ(o);if(void 0===n||!eQ(u))throw Error(`Unsupported data type: ${u}`);l=!0,C.push([u,h,{gpuBuffer:a,download:s.jsepCreateDownloader(a,g*n,u),dispose:()=>{s._OrtReleaseTensor(t)}},"gpu-buffer"])}else{let e=new(eX(u))(g);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(s.HEAPU8.subarray(f,f+e.byteLength)),C.push([u,h,e,"cpu"])}}finally{s.stackRestore(a),"string"===u&&f&&s._free(f),l||s._OrtReleaseTensor(t)}}return d&&!p&&(s._OrtClearBoundOutputs(d.handle),e6.set(e,[u,f,c,d,p,!1])),C}finally{s.stackRestore(O),b.forEach(e=>s._OrtReleaseTensor(e)),w.forEach(e=>s._OrtReleaseTensor(e)),v.forEach(e=>s._free(e)),0!==m&&s._OrtReleaseRunOptions(m),y.forEach(e=>s._free(e))}},tt=e=>{let t=ej(),a=e6.get(e);if(!a)throw Error("invalid session id");let n=a[0],o=t._OrtEndProfiling(n);0===o&&eL("Can't get an profile file name."),t._OrtFree(o)},tr=e=>{let t=[];for(let a of e){let e=a[2];!Array.isArray(e)&&"buffer"in e&&t.push(e.buffer)}return t}}),tk=H((e,t)=>{t.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),tj=$(()=>{ep(),tN(),tC(),ta=()=>!!d.wasm.proxy&&"u">typeof document,to=!1,ti=!1,ts=!1,tu=new Map,tf=(e,t)=>{let a=tu.get(e);a?a.push(t):tu.set(e,[t])},tc=()=>{if(to||!ti||ts||!tn)throw Error("worker not ready")},td=e=>{switch(e.data.type){case"init-wasm":to=!1,e.data.err?(ts=!0,tl[1](e.data.err)):(ti=!0,tl[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=tu.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out)}}},tp="u">typeof document?document?.currentScript?.src:void 0,th=async()=>{if(!ti){if(to)throw Error("multiple calls to 'initWasm()' detected.");if(ts)throw Error("previous call to 'initWasm()' failed.");if(to=!0,ta())return void 0===d.wasm.wasmPaths&&tp&&0!==tp.indexOf("blob:")&&(d.wasm.wasmPaths=tp.substr(0,+tp.lastIndexOf("/")+1)),new Promise((e,t)=>{tn?.terminate();let a=URL.createObjectURL(new Blob([tk()],{type:"text/javascript"}));(tn=new Worker(a,{name:"ort-wasm-proxy-worker"})).onerror=e=>t(e),tn.onmessage=td,URL.revokeObjectURL(a),tl=[e,t];let n={type:"init-wasm",in:d};tn.postMessage(n)});try{await ek(d.wasm),await e2(d),ti=!0}catch(e){throw ts=!0,e}finally{to=!1}}},tg=async e=>{if(ta())return tc(),new Promise((t,a)=>{tf("init-ep",[t,a]);let n={type:"init-ep",in:{epName:e,env:d}};tn.postMessage(n)});await e3(d,e)},tm=async e=>ta()?(tc(),new Promise((t,a)=>{tf("copy-from",[t,a]),tn.postMessage({type:"copy-from",in:{buffer:e}},[e.buffer])})):e5(e),ty=async(e,t)=>{if(!ta())return e8(e,t);if(t?.preferredOutputLocation)throw Error('session option "preferredOutputLocation" is not supported for proxy.');return tc(),new Promise((a,n)=>{tf("create",[a,n]);let o={type:"create",in:{model:e,options:{...t}}},i=[];e instanceof Uint8Array&&i.push(e.buffer),tn.postMessage(o,i)})},tb=async e=>{if(ta())return tc(),new Promise((t,a)=>{tf("release",[t,a]),tn.postMessage({type:"release",in:e})});e7(e)},tw=async(e,t,a,n,o,i)=>{if(!ta())return te(e,t,a,n,o,i);if(a.some(e=>"cpu"!==e[3]))throw Error("input tensor on GPU is not supported for proxy.");if(o.some(e=>e))throw Error("pre-allocated output tensor is not supported for proxy.");return tc(),new Promise((o,s)=>{tf("run",[o,s]),tn.postMessage({type:"run",in:{sessionId:e,inputIndices:t,inputs:a,outputIndices:n,options:i}},tr(a))})},tv=async e=>{if(ta())return tc(),new Promise((t,a)=>{tf("end-profiling",[t,a]),tn.postMessage({type:"end-profiling",in:e})});tt(e)}}),tI=$(()=>{ep(),tj(),tD(),tU(),tO=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw Error(`invalid data location: ${e.location} for ${t()}`)}},t_=e=>{switch(e[3]){case"cpu":return new x(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!eQ(t))throw Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:a,download:n,dispose:o}=e[2];return x.fromGpuBuffer(a,{dataType:t,dims:e[1],download:n,dispose:o})}default:throw Error(`invalid data location: ${e[3]}`)}},tE=class{async fetchModelAndCopyToWasmMemory(e){return tm(await e0(e))}async loadModel(e,t){let a;R(),"string"==typeof e?"u">typeof process&&process.versions&&process.versions.node?a=await e0(e):a=await this.fetchModelAndCopyToWasmMemory(e):a=e,[this.sessionId,this.inputNames,this.outputNames]=await ty(a,t),P()}async dispose(){return tb(this.sessionId)}async run(e,t,a){R();let n=[],o=[];Object.entries(e).forEach(e=>{let t=e[0],a=e[1],i=this.inputNames.indexOf(t);if(-1===i)throw Error(`invalid input '${t}'`);n.push(a),o.push(i)});let i=[],s=[];Object.entries(t).forEach(e=>{let t=e[0],a=e[1],n=this.outputNames.indexOf(t);if(-1===n)throw Error(`invalid output '${t}'`);i.push(a),s.push(n)});let l=n.map((e,t)=>tO(e,()=>`input "${this.inputNames[o[t]]}"`)),u=i.map((e,t)=>e?tO(e,()=>`output "${this.outputNames[s[t]]}"`):null),f=await tw(this.sessionId,o,l,s,u,a),c={};for(let e=0;e<f.length;e++)c[this.outputNames[s[e]]]=i[e]??t_(f[e]);return P(),c}startProfiling(){}endProfiling(){tv(this.sessionId)}}}),tB=$(()=>{ep(),tj(),tI(),tA=()=>{if(("number"!=typeof d.wasm.initTimeout||d.wasm.initTimeout<0)&&(d.wasm.initTimeout=0),"boolean"!=typeof d.wasm.simd&&(d.wasm.simd=!0),"boolean"!=typeof d.wasm.proxy&&(d.wasm.proxy=!1),"boolean"!=typeof d.wasm.trace&&(d.wasm.trace=!1),"number"!=typeof d.wasm.numThreads||!Number.isInteger(d.wasm.numThreads)||d.wasm.numThreads<=0){("u">typeof self&&!self.crossOriginIsolated||"u">typeof process&&process.versions&&process.versions.node)&&(d.wasm.numThreads=1);let e=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;d.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},tT=class{async init(e){tA(),await th(),await tg(e)}async createInferenceSessionHandler(e,t){let a=new tE;return await a.loadModel(e,t),Promise.resolve(a)}}}),tL={};W(tL,{wasmBackend:()=>t$});var t$,tH=$(()=>{tB(),t$=new tT}),tW={};W(tW,{InferenceSession:()=>D,TRACE:()=>M,TRACE_FUNC_BEGIN:()=>R,TRACE_FUNC_END:()=>P,Tensor:()=>x,TrainingSession:()=>k,default:()=>tG,env:()=>d,registerBackend:()=>i}),e.exports=Y(tW),ep(),ep(),ep();var tG=ed;{let e=(tH(),Y(tL)).wasmBackend;i("cpu",e,10),i("wasm",e,10)}Object.defineProperty(d.versions,"web",{value:"1.18.0",enumerable:!0})}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[480,215],()=>a(7181));module.exports=n})();